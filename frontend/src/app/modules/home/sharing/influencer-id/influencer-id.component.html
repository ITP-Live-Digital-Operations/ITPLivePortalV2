<div class="profile-container" *ngIf="profile">
  <div class="profile-header">
    <img [src]="profile.profilePicture || 'assets/default-avatar.png'" alt="{{ profile.Name }}" class="profile-avatar">
    <div class="profile-title">
      <h1>{{ profile.Name }}</h1>
      <h3></h3>
      <div class="profile-quick-info">
        <span><i class="fas fa-map-marker-alt"></i> {{ profile.CityLocation }}, {{ profile.CountryLocation }}</span>
        <span><i class="fas fa-language"></i> {{ profile.MainContentLanguage }}{{ profile.SubContentLang ? ', ' + profile.SubContentLang : '' }}</span>
        <span><i class="fas fa-user"></i> {{ profile.Gender }}</span>
        <span><i class="fas fa-birthday-cake"></i> {{ profile.ageGroup }}</span>
      </div>
    </div>
  </div>

  <div class="profile-content">
    <div class="profile-info">
      <h2>Profile Information</h2>
      <p><strong>Main Vertical:</strong> {{ profile.MainVertical }}</p>
      <p><strong>Sub Vertical:</strong> {{ profile.SubVertical }}</p>
      <p><strong>Nationality:</strong> {{ profile.Nationality }}</p>
      <p><strong>Email:</strong> {{ profile.Email }}</p>
      <p><strong>ITP Relationship:</strong> {{ profile.ItpRelationship }}</p>
      <p><strong>KSA License:</strong> {{ profile.KSALicense ? 'Yes' : 'No' }}</p>
      <p><strong>UAE License:</strong> {{ profile.UAELicense ? 'Yes' : 'No' }}</p>
    </div>

    <div class="social-profiles">
      <h2>Social Media Presence</h2>
      <div class="social-grid">
        <div class="social-item clickable" *ngIf="profile.InstagramFollowers" (click)="togglePlatformDetails('instagram')">
          <i class="fab fa-instagram"></i>
          <span class="social-platform">Instagram</span>
          <span class="social-followers">{{ profile.InstagramFollowers | number }} followers</span>
        </div>
        <div class="social-item clickable" *ngIf="profile.TiktokFollowers" (click)="togglePlatformDetails('tiktok')">
          <i class="fab fa-tiktok"></i>
          <span class="social-platform">TikTok</span>
          <span class="social-followers">{{ profile.TiktokFollowers | number }} followers</span>
        </div>
        <div class="social-item clickable" *ngIf="profile.YoutubeFollowers" (click)="togglePlatformDetails('youtube')">
          <i class="fab fa-youtube"></i>
          <span class="social-platform">YouTube</span>
          <span class="social-followers">{{ profile.YoutubeFollowers | number }} subscribers</span>
        </div>
        <div class="social-item" *ngIf="profile.TwitterFollowers">
          <i class="fab fa-twitter"></i>
          <span class="social-platform">Twitter</span>
          <span class="social-followers">{{ profile.TwitterFollowers | number }} followers</span>
        </div>
        <div class="social-item" *ngIf="profile.FacebookFollowers">
          <i class="fab fa-facebook"></i>
          <span class="social-platform">Facebook</span>
          <span class="social-followers">{{ profile.FacebookFollowers | number }} followers</span>
        </div>
      </div>
    </div>

    <div class="metrics">
      <h2>Performance Metrics</h2>
      <div class="metric-grid">
        <div class="metric-item">
          <span class="metric-value">{{ profile.engagementRate | percent:'1.2-2' }}</span>
          <span class="metric-label">Engagement Rate</span>
        </div>
        <div class="metric-item">
          <span class="metric-value">{{ profile.avgComments | number:'1.0-0' }}</span>
          <span class="metric-label">Avg. Comments</span>
        </div>
        <div class="metric-item" *ngIf="profile.influencerMetrics?.CPE">
          <span class="metric-value">{{ profile.influencerMetrics?.CPE | currency:'USD':'symbol':'1.2-2' }}</span>
          <span class="metric-label">Cost Per Engagement</span>
        </div>
        <div class="metric-item" *ngIf="profile.influencerMetrics?.CPM">
          <span class="metric-value">{{ profile.influencerMetrics?.CPM | currency:'USD':'symbol':'1.2-2' }}</span>
          <span class="metric-label">Cost Per Mille</span>
        </div>
      </div>
    </div>
  </div>



  <!-- Platform-specific details sections -->
  <div *ngIf="selectedPlatform === 'instagram'" class="platform-details">
    <app-instagram-details [profile]="profile.instagramProfile"></app-instagram-details>
  </div>
  <div *ngIf="selectedPlatform === 'tiktok'" class="platform-details">
    <app-tiktok-details [profile]="profile.tiktokProfile"></app-tiktok-details>
  </div>
  <div *ngIf="selectedPlatform === 'youtube'" class="platform-details">
    <app-youtube-details [profile]="profile.youtubeProfile"></app-youtube-details>
  </div>

   <!-- Logs section -->
  <div class="logs-section">
    <h2>Influencer Logs</h2>
    <app-logs-table [logs]="logs"></app-logs-table>
  </div>

  <div class="additional-info" *ngIf="profile.Bio || profile.PreviousBrands">
    <h2>Additional Information</h2>
    <div *ngIf="profile.Bio">
      <h3>Bio</h3>
      <p>{{ profile.Bio }}</p>
    </div>
    <div *ngIf="profile.PreviousBrands">
      <h3>Previous Brand Collaborations</h3>
      <p>{{ profile.PreviousBrands }}</p>
    </div>
  </div>
</div>
