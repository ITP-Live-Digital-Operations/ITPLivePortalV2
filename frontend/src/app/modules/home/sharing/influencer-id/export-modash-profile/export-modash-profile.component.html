<div class="profile-container" *ngIf="profile">
  <img
    src="../../../../../../assets/images/logo1.jpg"
    alt="Logo"
    class="logo"
  />
  <div class="profile-section">
    <div class="category-label">{{ influencerCategory | uppercase }}</div>
    <div class="profile-picture-container">
      <img
        [src]="profile.instagramProfile.profilePicture"
        alt="{{ profile.Name }}"
        class="profile-picture"
      />
    </div>
    <h2 class="profile-name">{{ profile.Name }}</h2>
    <div class="profile-bio">
      <p>{{ bio }}</p>
    </div>
    <div class="social-info">
      <div class="social-platform instagram" (click)="openInstagram()">
        <img
          src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdib3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0ic29jaWFsLWljb24iPgogICAgICAgICAgICA8cmVjdCB4PSIyIiB5PSIyIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHJ4PSI1IiByeT0iNSI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTYgMTEuMzdBNCA0IDAgMSAxIDEyLjYzIDggNCA0IDAgMCAxIDE2IDExLjM3eiI+PC9wYXRoPgogICAgICAgICAgICA8bGluZSB4MT0iMTcuNSIgeTE9IjYuNSIgeDI9IjE3LjUxIiB5Mj0iNi41Ij48L2xpbmU+CiAgICAgICAgICA8L3N2Zz4="
          class="social-icon"
          alt="Instagram"
        />
        <div class="profile-info">
          <span class="username">{{ profile.instagramProfile.username }}</span>
          <span class="followers"
            >{{
              profile.instagramProfile.followerCount | numberFormat
            }}
            followers</span
          >
        </div>
      </div>
      <div class="social-platform tiktok" *ngIf="profile.TiktokHandle" (click)="openTikTok()">
        <img
          src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdib3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0ic29jaWFsLWljb24iPgogICAgICAgICAgICA8cGF0aCBkPSJNOSAxMmE0IDQgMCAxIDAgNCA0VjRhNSA1IDAgMCAwIDUgNSI+PC9wYXRoPgogICAgICAgICAgPC9zdmc+"
          class="social-icon"
          alt="TikTok"
        />
        <div class="profile-info">
          <span class="username">{{ profile.TiktokHandle }}</span>
          <span class="followers"
            >{{ profile.TiktokFollowers | numberFormat }} followers</span
          >
        </div>
      </div>
      <div class="social-platform youtube" *ngIf="profile.YoutubeHandle" (click)="openYoutube()">
        <img
          src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdib3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0ic29jaWFsLWljb24iPgogICAgICAgICAgICA8cGF0aCBkPSJNMjIuNTQgNi40MmEyLjc4IDIuNzggMCAwIDAtMS45NC0yQzE4Ljg4IDQgMTIgNCAxMiA0cy02Ljg4IDAtOC42LjQ2YTIuNzggMi43OCAwIDAgMC0xLjk0IDJBMjkgMjkgMCAwIDAgMSAxMS43NWEyOSAyOSAwIDAgMCAuNDYgNS4zM0EyLjc4IDIuNzggMCAwIDAgMy40IDE5YzEuNzIuNDYgOC42LjQ2IDguNi40NnM2Ljg4IDAgOC42LS40NmEyLjc4IDIuNzggMCAwIDAgMS45NC0yIDI5IDI5IDAgMCAwIC40Ni01LjI1IDI5IDI5IDAgMCAwLS40Ni01LjMzeiI+PC9wYXRoPgogICAgICAgICAgICA8cG9seWdvbiBwb2ludHM9IjkuNzUgMTUuMDIgMTUuNSAxMS43NSA5Ljc1IDguNDggOS43NSAxNS4wMiI+PC9wb2x5Z29uPgogICAgICAgICAgPC9zdmc+"
          class="social-icon"
          alt="YouTube"
        />
        <div class="profile-info">
          <span class="username">{{ profile.YoutubeHandle }}</span>
          <span class="followers"
            >{{ profile.YoutubeFollowers | numberFormat }} subscribers</span
          >
        </div>
      </div>
      <div class="social-platform snapchat" *ngIf="profile.SnapchatHandle" (click)="openSnapchat()">
        <img
          src="../../../../../../assets/images/snapchat.png"
          class="social-icon"
          alt="Snapchat"
        />
        <div class="profile-info">
          <span class="username">{{ profile.SnapchatHandle }}</span>
          <span class="followers"
            >{{ profile.SnapchatFollowers | numberFormat }} followers</span
          >
        </div>
      </div>
      <div class="social-platform twitch" *ngIf="profile.TwitchHandle" (click)="openTwitch()">
        <img
          src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdib3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0ic29jaWFsLWljb24iPgogICAgICAgICAgICA8cGF0aCBkPSJNMjEgMkgzdjE2aDV2NGw0LTRoNWw0LTRWMnptLTEwIDlWN201IDRWNyI+PC9wYXRoPgogICAgICAgICAgPC9zdmc+"
          class="social-icon"
          alt="Twitch"
        />
        <div class="profile-info">
          <span class="username">{{ profile.TwitchHandle }}</span>
          <span class="followers"
            >{{ profile.TwitchFollowers | numberFormat }} followers</span
          >
        </div>
      </div>
      <div class="social-platform twitter" *ngIf="profile.TwitterHandle" (click)="openTwitter()">
        <img
          src="../../../../../../assets/images/twitter.png"
          class="social-icon"
          alt="Twitter"
        />
        <div class="profile-info">
          <span class="username">{{ profile.TwitterHandle }}</span>
          <span class="followers"
            >{{ profile.TwitterFollowers | numberFormat }} followers</span
          >
        </div>
      </div>
    </div>
  </div>

  <div class="stats-section">
    <div class="charts-container">
      <div class="chart-section">
        <h3>Age & Gender split</h3>
        <div class="chart-container">
          <canvas
            baseChart
            [data]="ageGenderChartData"
            [options]="barChartOptions"
            [plugins]="[ChartDataLabels]"
            type="bar"
          >
          </canvas>
        </div>
      </div>
      <div class="chart-section">
        <h3>Gender Split</h3>
        <div class="chart-container">
          <canvas
            baseChart
            [data]="genderChartData"
            [options]="genderChartOptions"
            type="doughnut"
          >
          </canvas>
        </div>
      </div>
    </div>

    <div class="data-section">
      <div class="follower-interests">
        <h3>Follower Interests</h3>
        <ul>
          <li
            *ngFor="let interest of profile.instagramProfile.InstagramInterest"
          >
            <div class="interest-info">
              <span class="interest-name">{{ interest.name }}</span>
              <span class="interest-percentage">{{
                interest.weight | percent : "1.2-2"
              }}</span>
            </div>
          </li>
        </ul>
      </div>
      <div class="top-countries">
        <h3>Location By Country</h3>
        <ul>
          <li *ngFor="let country of getTopCountries()">
            <div class="country-info">
              <span class="country-name">{{ country.name }}</span>
              <span class="country-percentage">{{
                country.weight | percent : "1.2-2"
              }}</span>
            </div>
            <div class="percentage-bar">
              <div
                class="bar"
                [style.width]="country.weight | percent : '1.2-2'"
              ></div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <div class="metrics-row">
      <div class="metric-item">
        <svg class="metric-icon" viewBox="0 0 24 24" width="24" height="24">
          <path
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
          />
        </svg>
        <span class="metric-value">{{
          profile.instagramProfile.avgLikes | numberFormat
        }}</span>
        <span class="metric-label">Avg. Likes</span>
      </div>

      <div class="metric-item">
        <svg class="metric-icon" viewBox="0 0 24 24" width="24" height="24">
          <path
            d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"
          />
        </svg>
        <span class="metric-value">{{
          profile.instagramProfile.followerCount | numberFormat
        }}</span>
        <span class="metric-label">Followers</span>
      </div>

      <div class="metric-item">
        <svg class="metric-icon" viewBox="0 0 24 24" width="24" height="24">
          <path
            d="M18.6 6.62c-1.44 0-2.8.56-3.77 1.53L12 10.66 10.48 12h.01L7.8 14.39c-.64.64-1.49.99-2.4.99-1.87 0-3.39-1.51-3.39-3.38S3.53 8.62 5.4 8.62c.91 0 1.76.35 2.44 1.03l1.13 1 1.51-1.34L9.22 8.2C8.2 7.18 6.84 6.62 5.4 6.62 2.42 6.62 0 9.04 0 12s2.42 5.38 5.4 5.38c1.44 0 2.8-.56 3.77-1.53l2.83-2.5.01.01L13.52 12h-.01l2.69-2.39c.64-.64 1.49-.99 2.4-.99 1.87 0 3.39 1.51 3.39 3.38s-1.52 3.38-3.39 3.38c-.9 0-1.76-.35-2.44-1.03l-1.14-1.01-1.51 1.34 1.27 1.12c1.02 1.01 2.37 1.57 3.82 1.57 2.98 0 5.4-2.41 5.4-5.38s-2.42-5.37-5.4-5.37z"
          />
        </svg>
        <span class="metric-value">{{
          profile.instagramProfile.engagementRate | percent
        }}</span>
        <span class="metric-label">Engagement Rate</span>
      </div>
    </div>

    <div class="reasons-section">
      <h2 class="reasons-name"> Why {{profile.Name}} ?</h2>
      <p class="reasons-item">{{reasonToChoose}}</p>
    </div>
  </div>
</div>
