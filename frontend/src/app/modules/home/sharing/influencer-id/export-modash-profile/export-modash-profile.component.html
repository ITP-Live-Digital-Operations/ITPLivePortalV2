<div class="profile-container" *ngIf="profile">
  <img src="../../../../../../assets/images/logo1.jpg" alt="Logo" class="logo">
  <div class="profile-section">
    <div class="category-label">{{ influencerCategory }}</div>
    <div class="profile-picture-container">
      <img
        [src]="profile.instagramProfile.profilePicture"
        alt="{{ profile.Name }}"
        class="profile-picture"
      />
    </div>
    <h2 class="profile-name">{{ profile.Name }}</h2>
    <div class="profile-bio">
      <p>{{ bio }}</p>
    </div>
      <div class="social-info">
        <div class="social-platform instagram" (click)="openInstagram()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="social-icon"
          >
            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
          </svg>
          <div class="profile-info">
            <span class="username">{{
              profile.instagramProfile.username
            }}</span>
            <span class="followers"
              >{{
                profile.instagramProfile.followerCount | numberFormat
              }}
              followers</span
            >
          </div>
        </div>

        <div *ngIf="profile.TiktokHandle" class="social-platform tiktok" (click)="openTikTok()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="social-icon"
          >
            <path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"></path>
          </svg>
          <div class="profile-info">
            <span class="username">{{ profile.TiktokHandle }}</span>
            <span class="followers"
              >{{ profile.TiktokFollowers | numberFormat }} followers</span
            >
          </div>
        </div>

        <div *ngIf="profile.YoutubeHandle" class="social-platform youtube" (click)="openYoutube()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="social-icon"
          >
            <path
              d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"
            ></path>
            <polygon
              points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"
            ></polygon>
          </svg>
          <div class="profile-info">
            <span class="username">{{ profile.YoutubeHandle }}</span>
            <span class="followers"
              >{{ profile.YoutubeFollowers | numberFormat }} subscribers</span
            >
          </div>
        </div>

        <div *ngIf="profile.SnapchatHandle" class="social-platform snapchat" (click)="openSnapchat()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="social-icon"
          >
            <path
              d="M12 2a10 10 0 0 0-3.16 19.5c.3.05.6.07.89.07h1.27c.29 0 .59-.02.89-.07A10 10 0 0 0 12 2z"
            ></path>
            <path d="M6.5 10a2.5 2.5 0 0 1 5 0v1a2.5 2.5 0 0 1-5 0v-1z"></path>
            <path d="M17.5 10a2.5 2.5 0 0 1-5 0v1a2.5 2.5 0 0 1 5 0v-1z"></path>
          </svg>
          <div class="profile-info">
            <span class="username">{{ profile.SnapchatHandle }}</span>
            <span class="followers"
              >{{ profile.SnapchatFollowers | numberFormat }} followers</span
            >
          </div>
        </div>

        <div *ngIf="profile.TwitchHandle" class="social-platform twitch" (click)="openTwitch()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="social-icon"
          >
            <path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>
          </svg>
          <div class="profile-info">
            <span class="username">{{ profile.TwitchHandle }}</span>
            <span class="followers"
              >{{ profile.TwitchFollowers | numberFormat }} followers</span
            >
          </div>
        </div>

        <div *ngIf="profile.TwitterHandle" class="social-platform twitter" (click)="openTwitter()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="social-icon"
          >
            <path
              d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"
            ></path>
          </svg>
          <div class="profile-info">
            <span class="username">{{ profile.TwitterHandle }}</span>
            <span class="followers"
              >{{ profile.TwitterFollowers | numberFormat }} followers</span
            >
          </div>
        </div>
      </div>
  </div>

  <div class="stats-section">
    <div class="charts-container">
      <div class="chart-section">
        <h3>Age & Gender split</h3>
        <div class="chart-container">
          <canvas
            baseChart
            [data]="ageGenderChartData"
            [options]="barChartOptions"
            [plugins]="[ChartDataLabels]"
            type="bar"
          >
          </canvas>
        </div>
      </div>
      <div class="chart-section">
        <h3>Gender Split</h3>
        <div class="chart-container">
          <canvas
            baseChart
            [data]="genderChartData"
            [options]="genderChartOptions"
            type="doughnut"
          >
          </canvas>
        </div>
      </div>
    </div>

    <div class="data-section">
      <div class="follower-interests">
        <h3>Follower Interests</h3>
        <ul>
          <li
            *ngFor="let interest of profile.instagramProfile.InstagramInterest"
          >
            <div class="interest-info">
              <span class="interest-name">{{ interest.name }}</span>
              <span class="interest-percentage">{{
                interest.weight | percent : "1.2-2"
              }}</span>
            </div>
          </li>
        </ul>
      </div>
      <div class="top-countries">
        <h3>Location By Country</h3>
        <ul>
          <li *ngFor="let country of getTopCountries()">
            <div class="country-info">
              <span class="country-name">{{ country.name }}</span>
              <span class="country-percentage">{{
                country.weight | percent : "1.2-2"
              }}</span>
            </div>
            <div class="percentage-bar">
              <div
                class="bar"
                [style.width]="country.weight | percent : '1.2-2'"
              ></div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <div class="metrics-row">
      <div class="metric-item">
        <svg class="metric-icon" viewBox="0 0 24 24" width="24" height="24">
          <path
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
          />
        </svg>
        <span class="metric-value">{{
          profile.instagramProfile.avgLikes | numberFormat
        }}</span>
        <span class="metric-label">Avg. Likes</span>
      </div>

      <div class="metric-item">
        <svg class="metric-icon" viewBox="0 0 24 24" width="24" height="24">
          <path
            d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"
          />
        </svg>
        <span class="metric-value">{{
          profile.instagramProfile.followerCount | numberFormat
        }}</span>
        <span class="metric-label">Followers</span>
      </div>

      <div class="metric-item">
        <svg class="metric-icon" viewBox="0 0 24 24" width="24" height="24">
          <path
            d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"
          />
        </svg>
        <span class="metric-value">{{
          profile.instagramProfile.engagementRate | percent
        }}</span>
        <span class="metric-label">Engagement Rate</span>
      </div>
    </div>
  </div>
</div>
