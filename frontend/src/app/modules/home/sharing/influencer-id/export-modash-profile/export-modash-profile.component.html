<div *ngIf="profile" class="profile-container">
  <div class="profile-header">
    <div class="category-label">{{ influencerCategory }}</div>
    <img [src]="profile.instagramProfile.profilePicture" alt="{{ profile.Name }}" class="profile-picture">
    <h2 class="profile-name">{{ profile.Name }}</h2>
    <div class="social-info">
      <span class="instagram">  {{ profile.instagramProfile.username }}</span>
      <span class="followers">{{ profile.instagramProfile.followerCount | number }} followers</span>
    </div>
  </div>

  <div class="charts-container">
    <div class="chart-section">
      <h3>Age & Gender split</h3>
      <div class="chart-container">
        <canvas
          baseChart
          [data]="ageGenderChartData"
          [options]="barChartOptions"
          [plugins]="[ChartDataLabels]"
          type="bar"
        >
        </canvas>
      </div>
    </div>

    <div class="chart-section">
      <h3>Gender Split</h3>
      <div class="chart-container">
        <canvas
          baseChart
          [data]="genderChartData"
          [options]="genderChartOptions"
          type="doughnut"
        >
        </canvas>
      </div>
    </div>
  </div>

  <div class="data-section">
    <div class="follower-interests">
      <h3>Follower Interests</h3>
      <ul>
        <li *ngFor="let interest of profile.instagramProfile.InstagramInterest">
          <div class="interest-info">
            <span class="interest-name">{{ interest.name }}</span>
            <span class="interest-percentage">{{
              interest.weight | percent : "1.2-2"
            }}</span>
          </div>
          <div class="percentage-bar">
            <div
              class="bar"
              [style.width]="interest.weight | percent : '1.2-2'"
            ></div>
          </div>
        </li>
      </ul>
    </div>

    <div class="top-countries">
      <h3>Location By Country</h3>
      <ul>
        <li *ngFor="let country of getTopCountries()">
          <div class="country-info">
            <span class="country-name">{{ country.name }}</span>
            <span class="country-percentage">{{
              country.weight | percent : "1.2-2"
            }}</span>
          </div>
          <div class="percentage-bar">
            <div
              class="bar"
              [style.width]="country.weight | percent : '1.2-2'"
            ></div>
          </div>
        </li>
      </ul>
    </div>
  </div>

  <div class="metrics-row">
    <div class="metric-item">
      <svg class="metric-icon" viewBox="0 0 24 24" width="24" height="24">
        <path
          d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
        />
      </svg>
      <span class="metric-value">{{
        profile.instagramProfile.avgLikes | number
      }}</span>
      <span class="metric-label">Avg. Likes</span>
    </div>

    <div class="metric-item">
      <svg class="metric-icon" viewBox="0 0 24 24" width="24" height="24">
        <path
          d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"
        />
      </svg>
      <span class="metric-value">{{
        profile.instagramProfile.followerCount | number
      }}</span>
      <span class="metric-label">Followers</span>
    </div>

    <div class="metric-item">
      <svg class="metric-icon" viewBox="0 0 24 24" width="24" height="24">
        <path
          d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"
        />
      </svg>
      <span class="metric-value">{{
        profile.instagramProfile.engagementRate | percent
      }}</span>
      <span class="metric-label">Engagement Rate</span>
    </div>
  </div>
</div>
