<div style="position: relative">

  <div  class="table-container" cdkDropList (cdkDropListDropped)="drop($event)">

    <table mat-table [dataSource]="dataSource" matSort>

      <ng-container matColumnDef="CampaignName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Campaign Name</th>
        <td mat-cell *matCellDef="let element">{{ element.CampaignName }}</td>
      </ng-container>

      <ng-container matColumnDef="Agency">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Agency</th>
        <td mat-cell *matCellDef="let element">{{ element.Agency }}</td>
      </ng-container>

      <ng-container matColumnDef="Client">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Client</th>
        <td mat-cell *matCellDef="let element">{{ element.Client }}</td>
      </ng-container>

      <ng-container matColumnDef="CampaignStartDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Campaign Start Date
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.CampaignStartDate | date }}
        </td>
      </ng-container>

      <ng-container matColumnDef="CampaignObjective">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          CampaignObjective
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element.CampaignObjective }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Priority">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Priority</th>
        <td mat-cell *matCellDef="let element">
          {{ element.Status !== 'InActive' ? element.Priority : '' }}
        </td>
      </ng-container>

      <ng-container matColumnDef="SubmittedBy">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Submitted By</th>
        <td mat-cell *matCellDef="let element">
          {{ element.CreatedbyID | userNamePipe }}
        </td>
      </ng-container>

      <ng-container matColumnDef="AssignedTo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Assigned To</th>
        <td mat-cell *matCellDef="let element">
          {{ getUsername( element.task?.assigned_to) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="ViewedByTalent">     <!-- ONLY HEADTALENT SEES THIS -->
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Viewed</th>
        <td mat-cell *matCellDef="let element">
          <span *ngIf="element.ViewedByTalent > 0"> Yes </span>
          <span *ngIf="element.ViewedByTalent < 1"> No </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="Status">        <!-- ONLY HEADTALENT SEES THIS -->
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
        <td mat-cell *matCellDef="let element">{{ element.Status }}</td>
      </ng-container>

      <ng-container matColumnDef="Action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let element">
          <button
            mat-raised-button
            color="primary"
            (click)="viewedTask(element.id)"
          >
            View
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <ng-container *ngIf="userRole == 'sales'">
        <tr mat-row cdkDrag *matRowDef="let row; columns: displayedColumns"></tr>
      </ng-container>
      <ng-container *ngIf="userRole == 'talent'">
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </ng-container>
    </table>
    <mat-paginator
      [length]="100"
      [pageSize]="10"
      [pageSizeOptions]="[3, 5, 10, 25, 100]"
      aria-label="Select page"
    >
    </mat-paginator>

  </div>
</div>
