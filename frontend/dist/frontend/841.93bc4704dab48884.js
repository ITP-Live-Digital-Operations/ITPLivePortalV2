"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[841],{3841:(Oe,R,l)=>{l.r(R),l.d(R,{TalentModule:()=>T});var u=l(6814),d=l(1896),C=l(1476),g=l(3566),s=l(5313),v=l(5753),t=l(5879),J=l(9554),B=l(1921),b=l(3934),P=l(617);function G(i,n){1&i&&(t.TgZ(0,"th",18),t._uU(1,"Brief Name"),t.qZA())}function E(i,n){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.Brief.campaignName," ")}}function $(i,n){1&i&&(t.TgZ(0,"th",18),t._uU(1,"Deadline"),t.qZA())}function H(i,n){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.deadline)," ")}}function V(i,n){1&i&&(t.TgZ(0,"th",18),t._uU(1,"Weight"),t.qZA())}function j(i,n){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.weight)}}function z(i,n){1&i&&(t.TgZ(0,"th",18),t._uU(1,"Created On"),t.qZA())}function K(i,n){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.createdAt)," ")}}function W(i,n){1&i&&(t.TgZ(0,"th",18),t._uU(1,"Progress"),t.qZA())}function X(i,n){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.progress)}}function tt(i,n){1&i&&(t.TgZ(0,"th",18),t._uU(1,"Viewed"),t.qZA())}function et(i,n){1&i&&(t.TgZ(0,"span"),t._uU(1," Yes "),t.qZA())}function nt(i,n){1&i&&(t.TgZ(0,"span"),t._uU(1," No "),t.qZA())}function it(i,n){if(1&i&&(t.TgZ(0,"td",19),t.YNc(1,et,2,0,"span",20),t.YNc(2,nt,2,0,"span",20),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",e.ViewedByTalent>0),t.xp6(1),t.Q6J("ngIf",e.ViewedByTalent<1)}}function ot(i,n){1&i&&(t.TgZ(0,"th",18),t._uU(1,"Priority"),t.qZA())}function at(i,n){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.priority)}}function rt(i,n){1&i&&(t.TgZ(0,"th",18),t._uU(1,"Status"),t.qZA())}function lt(i,n){if(1&i&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.Brief.Status)}}function st(i,n){1&i&&(t.TgZ(0,"th",21),t._uU(1,"View"),t.qZA())}function ct(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"td",19)(1,"button",22),t.NdJ("click",function(){const c=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.viewedTask(c.id))}),t.TgZ(2,"mat-icon"),t._uU(3,"remove_red_eye"),t.qZA()()()}}function mt(i,n){1&i&&t._UZ(0,"tr",23)}function ut(i,n){1&i&&t._UZ(0,"tr",24)}const pt=function(){return[3,5,10,25,100]};class x{constructor(n,e,o,a,c){this.salesService=n,this.route=e,this.taskService=o,this.userService=a,this.activatedRoute=c,this.path=v.m,this.displayedColumns=["briefName","deadline","progress","weight","createdAt","status","Action"],this.privilegeLevel=this.userService.getPrivilegeLevel()}ngOnInit(){this.privilegeLevel<7?(this.userID=this.userService.getID(),this.getMyTasks(this.userID)):this.activatedRoute.params.subscribe(n=>{this.id=n.id,this.taskService.getMyTasks(this.id).subscribe(e=>{this.dataSource=e.data?.assignedUsers,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})})}getMyTasks(n){this.taskService.getMyTasks(n).subscribe(e=>{this.briefDetails=e,this.dataSource=new s.by(this.briefDetails.data?.assignedUsers),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}viewedTask(n){this.privilegeLevel<7&&this.taskService.updateStatus({id:n}).subscribe(e=>{}),this.salesService.getSalesBriefIdbyTaskId(n).subscribe(e=>{this.route.navigate([`${this.path.viewBrief+e.data.brief_id}`])})}}x.\u0275fac=function(n){return new(n||x)(t.Y36(J.M),t.Y36(d.F0),t.Y36(B.M),t.Y36(b.K),t.Y36(d.gz))},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-person-tasks"]],viewQuery:function(n,e){if(1&n&&(t.Gf(C.NW,5),t.Gf(g.YE,5)),2&n){let o;t.iGM(o=t.CRH())&&(e.paginator=o.first),t.iGM(o=t.CRH())&&(e.sort=o.first)}},decls:33,vars:8,consts:[[2,"position","relative"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","briefName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","deadline"],["matColumnDef","weight"],["matColumnDef","createdAt"],["matColumnDef","progress"],["matColumnDef","ViewedByTalent"],["matColumnDef","priority"],["matColumnDef","status"],["matColumnDef","Action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf"],["mat-header-cell",""],[1,"icon-btn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"table",2),t.ynx(3,3),t.YNc(4,G,2,0,"th",4),t.YNc(5,E,2,1,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,$,2,0,"th",4),t.YNc(8,H,3,3,"td",5),t.BQk(),t.ynx(9,7),t.YNc(10,V,2,0,"th",4),t.YNc(11,j,2,1,"td",5),t.BQk(),t.ynx(12,8),t.YNc(13,z,2,0,"th",4),t.YNc(14,K,3,3,"td",5),t.BQk(),t.ynx(15,9),t.YNc(16,W,2,0,"th",4),t.YNc(17,X,2,1,"td",5),t.BQk(),t.ynx(18,10),t.YNc(19,tt,2,0,"th",4),t.YNc(20,it,3,2,"td",5),t.BQk(),t.ynx(21,11),t.YNc(22,ot,2,0,"th",4),t.YNc(23,at,2,1,"td",5),t.BQk(),t.ynx(24,12),t.YNc(25,rt,2,0,"th",4),t.YNc(26,lt,2,1,"td",5),t.BQk(),t.ynx(27,13),t.YNc(28,st,2,0,"th",14),t.YNc(29,ct,4,0,"td",5),t.BQk(),t.YNc(30,mt,1,0,"tr",15),t.YNc(31,ut,1,0,"tr",16),t.qZA(),t._UZ(32,"mat-paginator",17),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("length",100)("pageSize",10)("pageSizeOptions",t.DdM(7,pt)))},dependencies:[u.O5,P.Hw,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,C.NW,g.YE,g.nU,u.uU],styles:[".warn[_ngcontent-%COMP%]{background-color:red;color:#fff}.table-container[_ngcontent-%COMP%]{padding-top:1%;overflow-y:scroll;max-height:auto}.search-container[_ngcontent-%COMP%]{padding-top:2%;padding-bottom:2%;padding-left:1%;position:absolute;top:5;left:0;right:0;z-index:1;background-color:#fff}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-top:1px solid black;cursor:pointer}"]});var r=l(6223),L=l(9229),O=l(96),S=l(2032),f=l(4170),F=l(2296),gt=l(1587);function ft(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1,"Response Rate"),t.qZA())}function dt(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.responseRate)}}function ht(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1,"Content Quality"),t.qZA())}function _t(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.contentQuality)}}function Ct(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1,"Creativity"),t.qZA())}function Zt(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.creativity)}}function Tt(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1,"Flexibility"),t.qZA())}function vt(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.flexibility)}}function bt(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1," Campaign Performance "),t.qZA())}function xt(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.campaignPerformance," ")}}function yt(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1,"Notes"),t.qZA())}function It(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.notes)}}function At(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1,"Reviewed By"),t.qZA())}function kt(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.userID.name)}}function Nt(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1,"Date"),t.qZA())}function qt(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.createdAt))}}function Pt(i,n){1&i&&t._UZ(0,"tr",26)}function Ot(i,n){1&i&&t._UZ(0,"tr",27)}const St=function(){return[3,5,10,25,100]};class y{constructor(n,e,o,a,c){this.formBuilder=n,this.route=e,this.userService=o,this.toastrService=a,this.influencerService=c,this.displayedColumns=["responseRate","contentQuality","creativity","flexibility","campaignPerformance","notes","name","createdAt"],this.influencerForm=this.formBuilder.group({responseRate:["",r.kI.required],contentQuality:["",r.kI.required],creativity:["",r.kI.required],flexibility:["",r.kI.required],campaignPerformance:["",r.kI.required],notes:["",r.kI.maxLength(500)]})}ngOnInit(){this.influencerID=this.route.snapshot.paramMap.get("id"),this.GetInfluencerRatings(this.influencerID)}GetInfluencerRatings(n){this.influencerService.getInfluencerRatings(n).subscribe(e=>{this.influenceRatings=e,this.dataSource=new s.by(this.influenceRatings.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}onRatingClicked(n,e){const o=parseInt(n.target.dataset.rating,10);this.influencerForm.controls[e].setValue(o)}onSubmit(){this.influencerService.createInfluencerRating({influencer_id:this.influencerID,createdBy_id:this.userService.getID(),...this.influencerForm.value}).subscribe(n=>{this.data=n,"success"==this.data.status&&this.toastrService.success("Rating Added Successfully!")})}handleClickResponseRate(n){this.influencerForm.controls.responseRate.setValue(n)}handleClickContentQuality(n){this.influencerForm.controls.contentQuality.setValue(n)}handleClickCreativity(n){this.influencerForm.controls.creativity.setValue(n)}handleClickFlexibility(n){this.influencerForm.controls.flexibility.setValue(n)}handleClickCampaignPerformance(n){this.influencerForm.controls.campaignPerformance.setValue(n)}}y.\u0275fac=function(n){return new(n||y)(t.Y36(r.qu),t.Y36(d.gz),t.Y36(b.K),t.Y36(L._W),t.Y36(O.N))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-influencer-rating"]],viewQuery:function(n,e){if(1&n&&(t.Gf(C.NW,5),t.Gf(g.YE,7),t.Gf(s.BZ,5)),2&n){let o;t.iGM(o=t.CRH())&&(e.paginator=o.first),t.iGM(o=t.CRH())&&(e.sort=o.first),t.iGM(o=t.CRH())&&(e.table=o.first)}},decls:81,vars:11,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"table"],[1,"star-rating"],[3,"onClick"],["formControlName","notes","matInput","","placeholder","Notes"],["align","end"],["mat-raised-button","","type","submit",2,"margin-top","2%",3,"disabled"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["table",""],["matColumnDef","responseRate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","contentQuality"],["matColumnDef","creativity"],["matColumnDef","flexibility"],["matColumnDef","campaignPerformance"],["matColumnDef","notes"],["matColumnDef","name"],["matColumnDef","createdAt"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t._UZ(1,"h2"),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Field"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Rating"),t.qZA()()(),t.TgZ(10,"tbody")(11,"tr")(12,"td"),t._uU(13,"Response Rate"),t.qZA(),t.TgZ(14,"td")(15,"span",3)(16,"app-star-rating",4),t.NdJ("onClick",function(a){return e.handleClickResponseRate(a)}),t.qZA()()()(),t.TgZ(17,"tr")(18,"td"),t._uU(19,"Content Quality"),t.qZA(),t.TgZ(20,"td")(21,"span",3)(22,"app-star-rating",4),t.NdJ("onClick",function(a){return e.handleClickContentQuality(a)}),t.qZA()()()(),t.TgZ(23,"tr")(24,"td"),t._uU(25,"Creativity"),t.qZA(),t.TgZ(26,"td")(27,"span",3)(28,"app-star-rating",4),t.NdJ("onClick",function(a){return e.handleClickCreativity(a)}),t.qZA()()()(),t.TgZ(29,"tr")(30,"td"),t._uU(31,"Flexibility"),t.qZA(),t.TgZ(32,"td")(33,"span",3)(34,"app-star-rating",4),t.NdJ("onClick",function(a){return e.handleClickFlexibility(a)}),t.qZA()()()(),t.TgZ(35,"tr")(36,"td"),t._uU(37,"Campaign Performance"),t.qZA(),t.TgZ(38,"td")(39,"span",3)(40,"app-star-rating",4),t.NdJ("onClick",function(a){return e.handleClickCampaignPerformance(a)}),t.qZA()()()(),t.TgZ(41,"tr")(42,"td"),t._uU(43,"Notes"),t.qZA(),t.TgZ(44,"td")(45,"mat-form-field"),t._UZ(46,"textarea",5),t.TgZ(47,"mat-hint",6),t._uU(48),t.qZA()()()(),t.TgZ(49,"button",7),t._uU(50," Submit "),t.qZA()()()()(),t.TgZ(51,"div",8)(52,"table",9,10),t.ynx(54,11),t.YNc(55,ft,2,0,"th",12),t.YNc(56,dt,2,1,"td",13),t.BQk(),t.ynx(57,14),t.YNc(58,ht,2,0,"th",12),t.YNc(59,_t,2,1,"td",13),t.BQk(),t.ynx(60,15),t.YNc(61,Ct,2,0,"th",12),t.YNc(62,Zt,2,1,"td",13),t.BQk(),t.ynx(63,16),t.YNc(64,Tt,2,0,"th",12),t.YNc(65,vt,2,1,"td",13),t.BQk(),t.ynx(66,17),t.YNc(67,bt,2,0,"th",12),t.YNc(68,xt,2,1,"td",13),t.BQk(),t.ynx(69,18),t.YNc(70,yt,2,0,"th",12),t.YNc(71,It,2,1,"td",13),t.BQk(),t.ynx(72,19),t.YNc(73,At,2,0,"th",12),t.YNc(74,kt,2,1,"td",13),t.BQk(),t.ynx(75,20),t.YNc(76,Nt,2,0,"th",12),t.YNc(77,qt,3,3,"td",13),t.BQk(),t.YNc(78,Pt,1,0,"tr",21),t.YNc(79,Ot,1,0,"tr",22),t.qZA(),t._UZ(80,"mat-paginator",23),t.qZA()),2&n){let o;t.xp6(2),t.Q6J("formGroup",e.influencerForm),t.xp6(46),t.hij("",(null==(o=e.influencerForm.get("notes"))||null==o.value?null:o.value.length)||0,"/500"),t.xp6(1),t.Q6J("disabled",e.influencerForm.invalid),t.xp6(3),t.Q6J("dataSource",e.dataSource),t.xp6(26),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("length",100)("pageSize",5)("pageSizeOptions",t.DdM(10,St))}},dependencies:[S.Nt,f.KE,f.bx,F.lW,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,C.NW,g.YE,g.nU,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,gt.T,u.uU]});var h=l(9347),w=l(8074);function wt(i,n){1&i&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Platform "),t.qZA())}function Ut(i,n){if(1&i&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.platform," ")}}function Mt(i,n){1&i&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Deliverable "),t.qZA())}function Lt(i,n){if(1&i&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.deliverable," ")}}function Ft(i,n){1&i&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Quantity "),t.qZA())}function Dt(i,n){if(1&i&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==e?null:e.quantity,"1.0-0")," ")}}function Yt(i,n){1&i&&t._UZ(0,"mat-header-row")}function Rt(i,n){1&i&&t._UZ(0,"mat-row")}function Qt(i,n){if(1&i&&(t.TgZ(0,"div")(1,"mat-table",2),t.ynx(2,3),t.YNc(3,wt,2,0,"mat-header-cell",4),t.YNc(4,Ut,2,1,"mat-cell",5),t.BQk(),t.ynx(5,6),t.YNc(6,Mt,2,0,"mat-header-cell",4),t.YNc(7,Lt,2,1,"mat-cell",5),t.BQk(),t.ynx(8,7),t.YNc(9,Ft,2,0,"mat-header-cell",4),t.YNc(10,Dt,3,4,"mat-cell",5),t.BQk(),t.YNc(11,Yt,1,0,"mat-header-row",8),t.YNc(12,Rt,1,0,"mat-row",9),t.qZA(),t._UZ(13,"hr"),t.TgZ(14,"h2"),t._uU(15),t.qZA(),t.TgZ(16,"h2"),t._uU(17),t.qZA(),t.TgZ(18,"h2"),t._uU(19),t.qZA()()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("dataSource",e.log.packages),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumnsForPackages),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumnsForPackages),t.xp6(3),t.hij("Reply Time : ",e.log.time_to_reply,""),t.xp6(2),t.hij("Notes: ",e.log.notes,""),t.xp6(2),t.AsE("Rate: ",e.log.currency," ",e.log.rate,"")}}function Jt(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",10)(2,"div",11)(3,"span",12),t._uU(4,"Platform:"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA()(),t.TgZ(7,"div",11)(8,"span",12),t._uU(9,"Deliverable:"),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"span",12),t._uU(14,"Quantity:"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"number"),t.qZA()(),t.TgZ(18,"div",11)(19,"span",12),t._uU(20,"Currency:"),t.qZA(),t.TgZ(21,"span"),t._uU(22),t.qZA()(),t.TgZ(23,"div",11)(24,"span",12),t._uU(25,"Rate:"),t.qZA(),t.TgZ(26,"span"),t._uU(27),t.ALo(28,"number"),t.qZA()(),t.TgZ(29,"h2"),t._uU(30),t.qZA(),t.TgZ(31,"h2"),t._uU(32),t.qZA()()()),2&i){const e=t.oxw();t.xp6(6),t.Oqu(e.log.logItems.platform),t.xp6(5),t.Oqu(e.log.logItems.deliverable),t.xp6(5),t.Oqu(t.xi3(17,7,e.log.logItems.quantity,"1.0-0")),t.xp6(6),t.Oqu(e.log.logItems.currency),t.xp6(5),t.Oqu(t.xi3(28,10,e.log.logItems.rate,"1.2-2")),t.xp6(3),t.hij("Reply Time: ",e.log.time_to_reply,""),t.xp6(2),t.hij("Notes: ",e.log.notes,"")}}class I{constructor(n,e){this.source=n,this.logService=e,this.id=this.source.id,this.type=this.source.type,this.package=!1,this.single=!1,this.displayedColumnsSingle=["platform","deliverable","quantity","currency","rate"],this.displayedColumnsForPackages=["platform","deliverable","quantity"]}ngAfterViewInit(){this.logService.getLogById(this.id).subscribe(n=>{this.log=n,console.log(this.log),"single"==this.type?this.single=!0:"package"==this.type&&(this.package=!0)})}}I.\u0275fac=function(n){return new(n||I)(t.Y36(h.WI),t.Y36(w.$))},I.\u0275cmp=t.Xpm({type:I,selectors:[["app-view-log"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","platform"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","deliverable"],["matColumnDef","quantity"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"log-details","mat-elevation-z8"],[1,"log-detail"],[1,"log-label"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Qt,20,7,"div",1),t.YNc(2,Jt,33,13,"div",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.package),t.xp6(1),t.Q6J("ngIf",e.single))},dependencies:[u.O5,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,u.JJ],styles:[".single[_ngcontent-%COMP%], .package[_ngcontent-%COMP%]{color:#fff;margin-top:2%}.row[_ngcontent-%COMP%]{margin-top:2%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%]{padding:4%}.log-details[_ngcontent-%COMP%]{color:#fff;padding:20px;border-radius:8px;background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 4px 6px #0000001a}.log-details[_ngcontent-%COMP%]   .log-detail[_ngcontent-%COMP%]{display:flex;margin-bottom:10px;align-items:center}.log-details[_ngcontent-%COMP%]   .log-detail[_ngcontent-%COMP%]   .log-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;color:#fffc}.log-details[_ngcontent-%COMP%]   .log-detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;min-height:22px;color:#ffffffe6}.log-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:20px;font-size:1.25rem;color:#ffffffe6}"]});var U=l(1218),D=l(8525),Y=l(3680);function Bt(i,n){if(1&i&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function Gt(i,n){if(1&i&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Et(i,n){if(1&i&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function $t(i,n){if(1&i&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Ht(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",2)(2,"mat-form-field")(3,"mat-label"),t._uU(4),t.qZA(),t.TgZ(5,"mat-select",13),t.NdJ("change",function(){const c=t.CHM(e).index,m=t.oxw();return t.KtG(m.onPlatformChange(c))}),t.YNc(6,Gt,2,2,"mat-option",4),t.qZA()(),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Deliverable"),t.qZA(),t.TgZ(10,"mat-select",14),t.YNc(11,Et,2,2,"mat-option",4),t.qZA()(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"Quantity"),t.qZA(),t.TgZ(15,"input",15),t.NdJ("input",function(a){const m=t.CHM(e).index,p=t.oxw();return t.KtG(p.onFieldNumericInput(m,"Quantity",a.target.value))}),t.qZA()(),t.TgZ(16,"mat-form-field")(17,"mat-label"),t._uU(18,"Currency"),t.qZA(),t.TgZ(19,"mat-select",16),t.YNc(20,$t,2,2,"mat-option",4),t.qZA()(),t.TgZ(21,"mat-form-field")(22,"mat-label"),t._uU(23,"Rate"),t.qZA(),t.TgZ(24,"input",15),t.NdJ("input",function(a){const m=t.CHM(e).index,p=t.oxw();return t.KtG(p.onFieldNumericInput(m,"Rate",a.target.value))}),t.qZA()(),t.TgZ(25,"button",17),t.NdJ("click",function(){const c=t.CHM(e).index,m=t.oxw();return t.KtG(m.removeFields(c))}),t.TgZ(26,"mat-icon"),t._uU(27," delete "),t.qZA()()()()}if(2&i){const e=n.$implicit,o=n.index,a=t.oxw();let c,m;t.Q6J("formGroupName",o),t.xp6(4),t.hij("Platform ",o+1,""),t.xp6(2),t.Q6J("ngForOf",a.platforms),t.xp6(5),t.Q6J("ngForOf",a.getAvailableDeliverables(o)),t.xp6(4),t.Q6J("value",a.formatNumber(null==(c=e.get("Quantity"))?null:c.value)),t.xp6(5),t.Q6J("ngForOf",a.currencies),t.xp6(4),t.Q6J("value",a.formatNumber(null==(m=e.get("Rate"))?null:m.value))}}class A{constructor(n,e,o,a,c,m,p,_){this.formBuilder=n,this.router=e,this.influencerService=o,this.userService=a,this.logService=c,this.toastrService=m,this.dialog=p,this.source=_,this.currencies=U.QT,this.platforms=U.Zk,this.submitted=!1,this.path=v.m,this.userId=this.userService.getID(),this.id=this.source.id,this.logForm=this.formBuilder.group({Influencer:["",r.kI.required],Campaign:["",r.kI.required],Notes:[""],Time_to_reply:["",r.kI.required]}),this.form=this.formBuilder.group({fields:this.formBuilder.array([])})}ngOnInit(){this.getInfluencers(),this.addFields(),this.loadRateLog()}get fields(){return this.form.get("fields")}addFields(){const n=this.formBuilder.group({Platform:["",r.kI.required],Deliverable:["",r.kI.required],Quantity:["",r.kI.required],Currency:["",r.kI.required],Rate:["",r.kI.required]});this.fields.push(n)}removeFields(n){this.fields.removeAt(n)}getInfluencers(){this.influencerService.getInfluencerNames().subscribe(n=>{this.influencers=n})}loadRateLog(){this.logService.getLogById(this.id).subscribe(n=>{console.log("Log data:",n),this.log=n,console.log(this.log),this.logForm.patchValue({Influencer:this.log.influencerID,Campaign:this.log.campaign,Notes:this.log.notes,Time_to_reply:this.log.time_to_reply}),this.logItemId=this.log.logItems.id,console.log(this.logItemId),this.fields.controls.forEach((e,o)=>{e.patchValue({Platform:this.log.logItems.platform,Deliverable:this.log.logItems.deliverable,Quantity:this.log.logItems.quantity,Currency:this.log.logItems.currency,Rate:this.log.logItems.rate})})})}onSubmit(){if(!this.submitted){if(this.submitted=!0,this.form.valid){const n={UserID:this.userId,InfluencerID:this.logForm.value.Influencer,Campaign:this.logForm.value.Campaign,type:"single",Notes:this.logForm.value.Notes,Time_to_reply:this.logForm.value.Time_to_reply,Item:this.form.value.fields,packageItems:{},logItemId:this.logItemId};console.log(n),this.logService.updateSingleLog(this.id,n).subscribe(e=>{this.toastrService.success("Log updated successfully"),this.router.navigate([this.path.rateLogs])})}this.dialog.closeAll()}}getAvailableDeliverables(n){switch(this.fields.controls[n].get("Platform")?.value){case"Instagram":return["Static image posts","Carousel posts","Instagram Stories","Instagram Reels","IGTV","Influencer partnerships and collaborations"];case"Tiktok":return["Short-form video content","Hashtag challenges","Influencer partnerships and collaborations"];case"Snapchat":return["Snap stories","Geofilters and lenses","Influencer partnerships and collaborations"];case"Twitter":return["Tweets","Retweets","Twitter threads","Hashtags","Influencer partnerships and collaborations"];case"Facebook":return["Facebook posts","Facebook Stories","Live videos","Groups","Influencer partnerships and collaborations"];case"Youtube":return["Video content","Livestreams","Live videos","Collaborations with other YouTubers or brands","Product reviews or demonstrations","Influencer partnerships and collaborations"];default:return[]}}onPlatformChange(n){const e=this.fields.controls[n].get("Platform")?.value,o=this.fields.controls[n].get("Deliverable");o?.setValue(null),o?.enable(),e?o?.setValidators(r.kI.required):o?.clearValidators()}formatNumber(n){return null===n?"":new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}onFieldNumericInput(n,e,o){const a=this.parseFormattedNumber(o);this.form.get("fields").at(n).get(e)?.setValue(a,{emitEvent:!1})}parseFormattedNumber(n){return Number(n.replace(/,/g,""))}}function Vt(i,n){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function jt(i,n){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function zt(i,n){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Kt(i,n){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Wt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",2)(2,"mat-form-field")(3,"mat-label"),t._uU(4),t.qZA(),t.TgZ(5,"mat-select",15),t.NdJ("change",function(){const c=t.CHM(e).index,m=t.oxw();return t.KtG(m.onPlatformChange(c))}),t.YNc(6,zt,2,2,"mat-option",4),t.qZA()(),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Deliverable"),t.qZA(),t.TgZ(10,"mat-select",16),t.YNc(11,Kt,2,2,"mat-option",4),t.qZA()(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"Quantity"),t.qZA(),t._UZ(15,"input",17),t.qZA(),t.TgZ(16,"button",18),t.NdJ("click",function(){const c=t.CHM(e).index,m=t.oxw();return t.KtG(m.removeFields(c))}),t.TgZ(17,"mat-icon"),t._uU(18,"delete"),t.qZA()()()()}if(2&i){const e=n.index,o=t.oxw();t.Q6J("formGroupName",e),t.xp6(4),t.hij("Platform ",e+1,""),t.xp6(2),t.Q6J("ngForOf",o.platforms),t.xp6(5),t.Q6J("ngForOf",o.getAvailableDeliverables(e))}}A.\u0275fac=function(n){return new(n||A)(t.Y36(r.qu),t.Y36(d.F0),t.Y36(O.N),t.Y36(b.K),t.Y36(w.$),t.Y36(L._W),t.Y36(h.uw),t.Y36(h.WI))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-edit-item-log"]],decls:27,vars:5,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"row"],["formControlName","Influencer"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","Campaign","autocomplete","off","required",""],["matInput","","formControlName","Notes","rows","2","autocomplete","off"],["matInput","","type","text","formControlName","Time_to_reply","autocomplete","off","required",""],["formArrayName","fields"],[3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","type","submit",1,"btn-color",3,"disabled"],[3,"value"],[3,"formGroupName"],["formControlName","Platform",3,"change"],["formControlName","Deliverable"],["matInput","","type","text","autocomplete","off","required","",3,"value","input"],["formControlName","Currency","required",""],[1,"icon-btn",2,"max-width","5%",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(2,"div",2)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Influencer"),t.qZA(),t.TgZ(6,"mat-select",3),t.YNc(7,Bt,2,2,"mat-option",4),t.qZA()(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10," Campaign "),t.qZA(),t._UZ(11,"input",5),t.qZA()(),t.TgZ(12,"div",2)(13,"mat-form-field")(14,"mat-label"),t._uU(15,"Notes "),t.qZA(),t._UZ(16,"textarea",6),t.qZA(),t.TgZ(17,"mat-form-field")(18,"mat-label"),t._uU(19," Time to reply "),t.qZA(),t._UZ(20,"input",7),t.qZA()()(),t.TgZ(21,"form",1),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(22,"div",8),t.YNc(23,Ht,28,7,"div",9),t.qZA(),t.TgZ(24,"div",2)(25,"button",10),t._uU(26," Edit "),t.qZA()()()()),2&n&&(t.xp6(1),t.Q6J("formGroup",e.logForm),t.xp6(6),t.Q6J("ngForOf",e.influencers),t.xp6(14),t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngForOf",e.fields.controls),t.xp6(2),t.Q6J("disabled",!(e.logForm.valid&&e.form.valid)||0==e.fields.length))},dependencies:[u.sg,S.Nt,f.KE,f.hX,F.lW,P.Hw,D.gD,Y.ey,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,r.x0,r.CE],styles:[".form-container[_ngcontent-%COMP%]{padding:2%}.btn-color[_ngcontent-%COMP%]{background-color:#4789a1}"]});class k{constructor(n,e,o,a,c,m,p,_){this.formBuilder=n,this.router=e,this.service=o,this.userService=a,this.logService=c,this.toastrService=m,this.dialog=p,this.source=_,this.currencies=U.QT,this.platforms=U.Zk,this.submitted=!1,this.path=v.m,this.userId=this.userService.getID(),this.id=this.source.id,this.packageIds=[],this.logForm=this.formBuilder.group({Influencer:["",r.kI.required],Campaign:["",r.kI.required],Currency:["",r.kI.required],Rate:["",r.kI.required],Notes:[""],Time_to_reply:["",r.kI.required]}),this.form=this.formBuilder.group({fields:this.formBuilder.array([])})}ngOnInit(){this.getInfluencers(),this.addFields(),this.loadRateLog()}get fields(){return this.form.get("fields")}addFields(){const n=this.formBuilder.group({Platform:["",r.kI.required],Deliverable:["",r.kI.required],Quantity:["",r.kI.required]});this.fields.push(n)}removeFields(n){this.fields.removeAt(n)}getInfluencers(){this.service.getInfluencerNames().subscribe(n=>{this.influencers=n})}loadRateLog(){this.logService.getLogById(this.id).subscribe(n=>{this.log=n,this.logForm.patchValue({Influencer:this.log.influencerID,Campaign:this.log.campaign,Notes:this.log.notes,Time_to_reply:this.log.time_to_reply,Currency:this.log.currency,Rate:this.log.rate});for(let e=0;e<this.log.packages.length;e++)null!=this.log.packages[e].id&&(this.addFields(),this.packageIds.push(this.log.packages[e].id)),this.removeFields(this.log.packages.length);this.fields.controls.forEach((e,o)=>{e.patchValue({Platform:this.log.packages[o].platform,Deliverable:this.log.packages[o].deliverable,Quantity:this.log.packages[o].quantity})})})}onSubmit(){if(!this.submitted){if(this.submitted=!0,this.form.valid){console.log(this.form.value.fields);const n={UserID:this.userId,InfluencerID:this.logForm.value.Influencer,Campaign:this.logForm.value.Campaign,type:"package",Time_to_reply:this.logForm.value.Time_to_reply,Notes:this.logForm.value.Notes,Currency:this.logForm.value.Currency,Rate:this.logForm.value.Rate,package:this.form.value.fields,rateLogItems:{},packageIds:this.packageIds};this.logService.updatePackageLog(this.id,n).subscribe(e=>{this.data=e,"success"===this.data.status?(this.toastrService.success("Log Added Successfully!"),sessionStorage.removeItem("influencerData"),this.router.navigate([this.path.influencerRating+this.logForm.value.Influencer])):this.toastrService.error("Error! Please Try Again!")})}setTimeout(()=>{this.dialog.closeAll()},1e3)}}getAvailableDeliverables(n){switch(this.fields.controls[n].get("Platform")?.value){case"Instagram":return["Static image posts","Carousel posts","Instagram Stories","Instagram Reels","IGTV","Influencer partnerships and collaborations"];case"Tiktok":return["Short-form video content","Hashtag challenges","Influencer partnerships and collaborations"];case"Snapchat":return["Snap stories","Geofilters and lenses","Influencer partnerships and collaborations"];case"Twitter":return["Tweets","Retweets","Twitter threads","Hashtags","Influencer partnerships and collaborations"];case"Facebook":return["Facebook posts","Facebook Stories","Live videos","Groups","Influencer partnerships and collaborations"];case"Youtube":return["Video content","Livestreams","Live videos","Collaborations with other YouTubers or brands","Product reviews or demonstrations","Influencer partnerships and collaborations"];default:return[]}}onPlatformChange(n){const e=this.fields.controls[n].get("Platform")?.value,o=this.fields.controls[n].get("Deliverable");o?.setValue(null),o?.enable(),e?o?.setValidators(r.kI.required):o?.clearValidators()}}k.\u0275fac=function(n){return new(n||k)(t.Y36(r.qu),t.Y36(d.F0),t.Y36(O.N),t.Y36(b.K),t.Y36(w.$),t.Y36(L._W),t.Y36(h.uw),t.Y36(h.WI))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-edit-package-log"]],decls:36,vars:6,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"row"],["formControlName","Influencer"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","Campaign","autocomplete","off","required",""],["formControlName","Currency","required",""],["matInput","","type","number","formControlName","Rate","autocomplete","off","required",""],["matInput","","formControlName","Notes","rows","2","autocomplete","off"],["matInput","","type","text","formControlName","Time_to_reply","autocomplete","off","required",""],["formArrayName","fields"],[3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"],[3,"formGroupName"],["formControlName","Platform",3,"change"],["formControlName","Deliverable"],["matInput","","type","number","formControlName","Quantity","autocomplete","off","required",""],["color","warn",1,"icon-btn",2,"max-width","5%",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(2,"div",2)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Influencer"),t.qZA(),t.TgZ(6,"mat-select",3),t.YNc(7,Vt,2,2,"mat-option",4),t.qZA()(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10," Campaign "),t.qZA(),t._UZ(11,"input",5),t.qZA(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"Currency"),t.qZA(),t.TgZ(15,"mat-select",6),t.YNc(16,jt,2,2,"mat-option",4),t.qZA()(),t.TgZ(17,"mat-form-field")(18,"mat-label"),t._uU(19," Rate"),t.qZA(),t._UZ(20,"input",7),t.qZA()(),t.TgZ(21,"div",2)(22,"mat-form-field")(23,"mat-label"),t._uU(24,"Notes "),t.qZA(),t._UZ(25,"textarea",8),t.qZA(),t.TgZ(26,"mat-form-field")(27,"mat-label"),t._uU(28," Time to reply "),t.qZA(),t._UZ(29,"input",9),t.qZA()()(),t.TgZ(30,"form",1),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(31,"div",10),t.YNc(32,Wt,19,4,"div",11),t.qZA(),t.TgZ(33,"div",2)(34,"button",12),t._uU(35," Edit "),t.qZA()()()()),2&n&&(t.xp6(1),t.Q6J("formGroup",e.logForm),t.xp6(6),t.Q6J("ngForOf",e.influencers),t.xp6(9),t.Q6J("ngForOf",e.currencies),t.xp6(14),t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngForOf",e.fields.controls),t.xp6(2),t.Q6J("disabled",!(e.logForm.valid&&e.form.valid)||0==e.fields.length))},dependencies:[u.sg,S.Nt,f.KE,f.hX,F.lW,P.Hw,D.gD,Y.ey,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u,r.x0,r.CE],styles:[".form-container[_ngcontent-%COMP%]{padding:2%}"]});var M=l(3305),Xt=l(6085),te=l(7398);class N{constructor(n){this.influencerService=n,this.influencers=[]}ngOnInit(){}transform(n){return this.influencerService.getInfluencer(n).pipe((0,te.U)(e=>e.data.Name))}}N.\u0275fac=function(n){return new(n||N)(t.Y36(O.N,16))},N.\u0275pipe=t.Yjl({name:"influencerName",type:N,pure:!0});const ee=["influencerSelect"],ne=["campaignSelect"],ie=["contactSelect"];function oe(i,n){if(1&i&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ae(i,n){if(1&i&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function re(i,n){if(1&i&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function le(i,n){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Influencer"),t.qZA())}function se(i,n){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"async"),t.ALo(3,"influencerName"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,e.influencerID))," ")}}function ce(i,n){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Campaign"),t.qZA())}function me(i,n){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.campaign)}}function ue(i,n){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Contact"),t.qZA())}function pe(i,n){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"async"),t.ALo(3,"userNamePipe"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,e.userID))," ")}}function ge(i,n){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Date"),t.qZA())}function fe(i,n){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.createdAt))}}function de(i,n){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Reply time"),t.qZA())}function he(i,n){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.time_to_reply," ")}}function _e(i,n){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Type"),t.qZA())}function Ce(i,n){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.type))}}function Ze(i,n){1&i&&(t.TgZ(0,"th",35),t._uU(1,"View"),t.qZA())}function Te(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,c=t.oxw();return t.KtG(c.editInfluencerLog(a.id,a.type))}),t._uU(1," edit "),t.qZA()}}function ve(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"td",36)(1,"mat-icon",38),t.NdJ("click",function(){const c=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.viewInfluencerLog(c.id,c.type))}),t._uU(2," remove_red_eye "),t.qZA(),t.YNc(3,Te,2,0,"mat-icon",39),t.qZA()}if(2&i){const e=n.$implicit,o=t.oxw();t.xp6(3),t.Q6J("ngIf",o.userId===e.userID)}}function be(i,n){1&i&&t._UZ(0,"tr",40)}function xe(i,n){1&i&&t._UZ(0,"tr",41)}const ye=function(){return[3,5,10,25,100]};class q{constructor(n,e,o,a,c){this.userService=n,this.router=e,this.logService=o,this.dialog=a,this.cdr=c,this.userRole=this.userService.getRole(),this.userId=this.userService.getID(),this.path=v.m,this.allInfluencers=[],this.allCampaigns=[],this.allContacts=[],this.influencers=[],this.campaigns=[],this.contacts=[],this.filterCriteria={search:"",campaigns:[],influencers:[],contacts:[]},this.displayedColumns=["Influencer","Campaign","Contact","Time_to_reply","Date","type","Action"],this.filterValues={influencerID:"",campaign:"",userID:""},this.single=!1,this.package=!1,this.logs=[],this.activeTabIndex=0,this.tabCount=6}ngOnInit(){this.getAllLogs()}ngAfterViewInit(){this.extractColumnData()}extractColumnData(){const n=this.table._data;for(let e=0;e<n?.length;e++){const o=n[e];this.influencers.push(o.influencer??""),this.campaigns.push(o.campaign??""),this.contacts.push(o.contact??"")}}resetFilters(){this.filterCriteria={search:"",campaigns:[],influencers:[],contacts:[]},this.allCampaigns=this.extractUniqueAttributes(this.dataSource.data,"campaigns"),this.allContacts=this.extractUniqueAttributes(this.dataSource.data,"user.name"),this.allInfluencers=this.extractUniqueAttributes(this.dataSource.data,"influencers.Name"),this.resetMatSelects(),this.applyFilter()}resetMatSelects(){this.influencerSelect&&(this.influencerSelect.value=[]),this.campaignSelect&&(this.campaignSelect.value=[]),this.contactSelect&&(this.contactSelect.value=[])}getAllLogs(){this.logService.getAllLogsUpdated().subscribe(n=>{console.log(n),this.logs=n,this.dataSource=new s.by(n),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.allInfluencers=[...new Set(n.map(e=>e.influencer.Name))],this.allCampaigns=[...new Set(n.map(e=>e.campaign))],this.allContacts=[...new Set(n.map(e=>e.user.name))],this.updateFilterOptions()})}extractUniqueAttributes(n,e){const o=new Set(n.map(a=>{const m=function c(p,_){return _.split(".").reduce((Q,Pe)=>Q&&Q[Pe],p)}(a,e);return"string"==typeof m||"number"==typeof m?m.toString().trim():null}).filter(a=>null!==a&&""!==a));return Array.from(o).sort()}filterInfluencer(n){this.filterValues.influencerID=n,this.applyFilter(),this.updateFilterOptions()}filterCampaign(n){this.filterValues.campaign=n,this.applyFilter(),this.updateFilterOptions()}filterContact(n){this.filterValues.userID=n,this.applyFilter(),this.updateFilterOptions()}applyFilter(){console.log("Applying filter:",this.filterCriteria);const n=this.filterCriteria.search?this.filterCriteria.search.toString().toLowerCase():"";this.dataSource.filterPredicate=(e,o)=>{try{const a=JSON.parse(o),c=!n||e.influencer.Name.toLowerCase().includes(n)||e.campaign.toLowerCase().includes(n)||e.user.name.toLowerCase().includes(n),m=!a.influencers.length||a.influencers.includes(e.influencer?.Name.trim().toLowerCase()),p=!a.campaigns.length||a.campaigns.includes(e.campaign?.trim().toLowerCase()),_=!a.contacts.length||a.contacts.includes(e.user?.name.trim().toLowerCase());return c&&m&&p&&_}catch(a){return console.error("Error parsing filter JSON:",a),!1}},this.dataSource.filter=JSON.stringify(this.filterCriteria),this.updateFilterOptions(),this.cdr.detectChanges()}applyFilterChange(n,e){switch(console.log(`Filter change - Type: ${n}, Value: ${e}`),n){case"influencers":this.filterCriteria.influencers=e.map(o=>"string"==typeof o?o.trim().toLowerCase():o);break;case"campaigns":this.filterCriteria.campaigns=e.map(o=>"string"==typeof o?o.trim().toLowerCase():o);break;case"contacts":this.filterCriteria.contacts=e.map(o=>"string"==typeof o?o.trim().toLowerCase():o)}Array.isArray(e)||(e=[e]),this.filterCriteria[n]=e.map(o=>"string"==typeof o?o.trim().toLowerCase():o),this.applyFilter(),this.updateFilterOptions()}updateFilterOptions(){let n=[...this.dataSource.data];this.allInfluencers=this.extractUniqueAttributes(n.filter(e=>(!this.filterCriteria.campaigns.length||this.filterCriteria.campaigns.includes(e.campaign?.trim().toLowerCase()))&&(!this.filterCriteria.contacts.length||this.filterCriteria.contacts.includes(e.user?.name?.trim().toLowerCase()))),"influencer.Name"),this.allCampaigns=this.extractUniqueAttributes(n.filter(e=>(!this.filterCriteria.influencers.length||this.filterCriteria.influencers.includes(e.influencer?.Name?.trim().toLowerCase()))&&(!this.filterCriteria.contacts.length||this.filterCriteria.contacts.includes(e.user?.name?.trim().toLowerCase()))&&"string"==typeof e.campaign),"campaign"),this.allContacts=this.extractUniqueAttributes(n.filter(e=>(!this.filterCriteria.influencers.length||this.filterCriteria.influencers.includes(e.influencer?.Name?.trim().toLowerCase()))&&(!this.filterCriteria.campaigns.length||this.filterCriteria.campaigns.includes(e.campaign?.trim().toLowerCase()))),"user.name")}nextTab(){this.activeTabIndex<this.tabCount-1&&this.activeTabIndex++}prevTab(){this.activeTabIndex>0&&this.activeTabIndex--}onPageChange(n){this.getAllLogs()}editInfluencerLog(n,e){"single"==e?this.dialog?.open(A,{width:"70%",height:"60%",exitAnimationDuration:"1000ms",enterAnimationDuration:"1000ms",data:{id:n}}):this.dialog?.open(k,{width:"70%",height:"60%",exitAnimationDuration:"1000ms",enterAnimationDuration:"1000ms",data:{id:n}})}viewInfluencerLog(n,e){this.dialog?.open(I,{width:"70%",height:"50%",exitAnimationDuration:"1000ms",enterAnimationDuration:"1000ms",data:{id:n,type:e}})}redirectToNewLog(){this.router.navigate([this.path.newRateLog])}}q.\u0275fac=function(n){return new(n||q)(t.Y36(b.K),t.Y36(d.F0),t.Y36(w.$),t.Y36(h.uw),t.Y36(t.sBO))},q.\u0275cmp=t.Xpm({type:q,selectors:[["app-influencer-logs"]],viewQuery:function(n,e){if(1&n&&(t.Gf(C.NW,5),t.Gf(g.YE,5),t.Gf(s.BZ,5),t.Gf(ee,5),t.Gf(ne,5),t.Gf(ie,5)),2&n){let o;t.iGM(o=t.CRH())&&(e.paginator=o.first),t.iGM(o=t.CRH())&&(e.sort=o.first),t.iGM(o=t.CRH())&&(e.table=o.first),t.iGM(o=t.CRH())&&(e.influencerSelect=o.first),t.iGM(o=t.CRH())&&(e.campaignSelect=o.first),t.iGM(o=t.CRH())&&(e.contactSelect=o.first)}},decls:68,vars:11,consts:[[2,"align-items","center","font-size","35px"],["id","search"],["viewBox","0 0 420 60"],[1,"bar"],["matInput","","placeholder","Search",3,"keyup"],["searchInput",""],["matPrefix","",2,"color","aliceblue"],[1,"search-container"],[1,"filter",2,"width","30%"],["multiple","","placeholder","Influencers Filter",3,"selectionChange"],["influencerSelect",""],[3,"value",4,"ngFor","ngForOf"],["multiple","","placeholder","Campaigns Filter",3,"selectionChange"],["campaignSelect",""],["multiple","","placeholder","Contacts Filter",3,"selectionChange"],["contactSelect",""],[1,"logs-button"],["type","button",1,"glow-on-hover",2,"margin-left","2%",3,"click"],["type","button",1,"glow-on-add-new",3,"click"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Influencer"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Campaign"],["matColumnDef","Contact"],["matColumnDef","Date"],["matColumnDef","Time_to_reply"],["mat-cell","","class","truncate-text",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",1,"truncate-text"],[3,"click"],[3,"click",4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"h2",0),t._uU(1,"Logs"),t.qZA(),t.TgZ(2,"div",1),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"rect",3),t.qZA(),t.kcU(),t.TgZ(5,"mat-form-field")(6,"input",4,5),t.NdJ("keyup",function(){t.CHM(o);const c=t.MAs(7);return t.KtG(e.applyFilterChange("search",c.value))}),t.qZA(),t.TgZ(8,"mat-icon",6),t._uU(9,"search"),t.qZA()()(),t.TgZ(10,"div")(11,"div",7)(12,"mat-expansion-panel")(13,"mat-expansion-panel-header")(14,"mat-panel-title")(15,"mat-icon"),t._uU(16,"filter_list"),t.qZA()()(),t.TgZ(17,"mat-form-field",8)(18,"mat-label"),t._uU(19,"Influencers Filter"),t.qZA(),t.TgZ(20,"mat-select",9,10),t.NdJ("selectionChange",function(c){return e.applyFilterChange("influencers",c.value)}),t.YNc(22,oe,2,2,"mat-option",11),t.qZA()(),t.TgZ(23,"mat-form-field",8)(24,"mat-label"),t._uU(25,"Campaigns Filter"),t.qZA(),t.TgZ(26,"mat-select",12,13),t.NdJ("selectionChange",function(c){return e.applyFilterChange("campaigns",c.value)}),t.YNc(28,ae,2,2,"mat-option",11),t.qZA()(),t.TgZ(29,"mat-form-field",8)(30,"mat-label"),t._uU(31,"Contacts Filter"),t.qZA(),t.TgZ(32,"mat-select",14,15),t.NdJ("selectionChange",function(c){return e.applyFilterChange("contacts",c.value)}),t.YNc(34,re,2,2,"mat-option",11),t.qZA()(),t.TgZ(35,"div",16)(36,"button",17),t.NdJ("click",function(){return e.resetFilters()}),t._uU(37," Reset Filters "),t.qZA()()()()(),t.TgZ(38,"div",16)(39,"button",18),t.NdJ("click",function(){return e.redirectToNewLog()}),t._uU(40," Add New Log "),t.qZA()(),t.TgZ(41,"div",19)(42,"table",20),t.ynx(43,21),t.YNc(44,le,2,0,"th",22),t.YNc(45,se,4,5,"td",23),t.BQk(),t.ynx(46,24),t.YNc(47,ce,2,0,"th",22),t.YNc(48,me,2,1,"td",23),t.BQk(),t.ynx(49,25),t.YNc(50,ue,2,0,"th",22),t.YNc(51,pe,4,5,"td",23),t.BQk(),t.ynx(52,26),t.YNc(53,ge,2,0,"th",22),t.YNc(54,fe,3,3,"td",23),t.BQk(),t.ynx(55,27),t.YNc(56,de,2,0,"th",22),t.YNc(57,he,2,1,"td",28),t.BQk(),t.ynx(58,29),t.YNc(59,_e,2,0,"th",22),t.YNc(60,Ce,3,3,"td",23),t.BQk(),t.ynx(61,30),t.YNc(62,Ze,2,0,"th",22),t.YNc(63,ve,4,1,"td",23),t.BQk(),t.YNc(64,be,1,0,"tr",31),t.YNc(65,xe,1,0,"tr",32),t.qZA(),t._UZ(66,"mat-paginator",33)(67,"hr"),t.qZA()}2&n&&(t.xp6(22),t.Q6J("ngForOf",e.allInfluencers),t.xp6(6),t.Q6J("ngForOf",e.allCampaigns),t.xp6(6),t.Q6J("ngForOf",e.allContacts),t.xp6(8),t.Q6J("dataSource",e.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("length",null==e.dataSource?null:e.dataSource.data.length)("pageSize",15)("pageSizeOptions",t.DdM(10,ye)))},dependencies:[u.sg,u.O5,S.Nt,f.KE,f.hX,f.qo,P.Hw,D.gD,Y.ey,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,C.NW,g.YE,g.nU,M.ib,M.yz,M.yK,u.Ov,u.gd,u.uU,Xt.z,N],styles:['h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin:10px 0;text-align:center}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:8px}.table-container[_ngcontent-%COMP%]   .truncate-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.logs-button[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin-bottom:1%;width:100%}.logs-button[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{flex-grow:1;margin-right:20px;width:-moz-fit-content;width:fit-content}.logs-button[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]:last-child, .filter-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]:last-child{margin-right:0}mat-paginator[_ngcontent-%COMP%]{background-color:#f0f0f0}mat-paginator[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin:0 12px}.single[_ngcontent-%COMP%], .package[_ngcontent-%COMP%]{background-color:#fff;color:#333;padding:15px;border-radius:4px;margin-top:20px}.single[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%], .package[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}@media (max-width: 768px){.logs-button[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.logs-button[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%], .logs-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0;margin-bottom:10px}.row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#888;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#555}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.mat-expansion-panel[_ngcontent-%COMP%]{background:#1f3371!important;color:#000000de}.search-container[_ngcontent-%COMP%]{padding-bottom:5px}  .mat-mdc-select-panel{background:rgba(50,68,129,.9921568627)!important}  .mat-mdc-option .mdc-list-item__primary-text{color:#fff!important}  .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0;border-radius:5px;border-color:#fff}.mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.mat-input-element[_ngcontent-%COMP%]{font-size:16px;color:#333}  .mat-expansion-indicator.ng-tns-c2690051721-4{display:none}.mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:8px;overflow:hidden}.mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#1f3371}.mat-expansion-indicator[_ngcontent-%COMP%]{color:#333}.mat-option[_ngcontent-%COMP%]{font-size:14px}.mat-header-cell[_ngcontent-%COMP%]{font-weight:700}.mat-cell[_ngcontent-%COMP%]{font-size:16px;color:#333}.mat-paginator[_ngcontent-%COMP%]{margin-top:16px}.package[_ngcontent-%COMP%], .single[_ngcontent-%COMP%]{margin-top:16px;padding:16px;border:1px solid #3e0a76;border-radius:4px}.package[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .single[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .package[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .single[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px}.mat-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;margin-right:8px;color:#333;transition:color .3s ease-in-out}.mat-icon[_ngcontent-%COMP%]:hover{color:#ff4081}.mat-icon[_ngcontent-%COMP%]{color:#fff}#search[_ngcontent-%COMP%]{display:grid;grid-area:search;grid-template:"search" 60px/420px;justify-content:center;align-content:center;justify-items:stretch;align-items:stretch}#searchInput[_ngcontent-%COMP%]{display:block;grid-area:search;-webkit-appearance:none;appearance:none;width:100%;height:100%;background:none;padding:0 30px 0 60px;border:none;border-radius:100px;font:24px/1 system-ui,sans-serif;outline-offset:-8px}#search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{grid-area:search;overflow:visible;color:#1239ae;fill:none;stroke:currentColor}']});let Ie=v.m;const Ae=[{path:"viewBrief/:id",children:[{path:"",loadChildren:()=>l.e(166).then(l.bind(l,4166)).then(i=>i.ViewBriefModule)}]},{path:"edit",children:[{path:"",loadChildren:()=>Promise.all([l.e(125),l.e(592),l.e(83)]).then(l.bind(l,5083)).then(i=>i.EditModule)}]},{path:"tasks/:id",component:x},{path:"logs",component:q},{path:"influencerRating/:id",component:y},{path:"new",children:[{path:"",loadChildren:()=>l.e(125).then(l.bind(l,4125)).then(i=>i.CreateModule)}]},{path:"head",children:[{path:"",loadChildren:()=>Promise.all([l.e(592),l.e(315)]).then(l.bind(l,5315)).then(i=>i.HeadOfTalentModule)}]},{path:"",redirectTo:`${Ie.forms}`,pathMatch:"full"},{path:"**",redirectTo:"/site/notFound"}];class Z{}Z.\u0275fac=function(n){return new(n||Z)},Z.\u0275mod=t.oAB({type:Z}),Z.\u0275inj=t.cJS({imports:[d.Bz.forChild(Ae),d.Bz]});var ke=l(609),Ne=l(1474),qe=l(9089);class T{}T.\u0275fac=function(n){return new(n||T)},T.\u0275mod=t.oAB({type:T}),T.\u0275inj=t.cJS({imports:[u.ez,Z,ke.q,r.UX,r.u5,Ne.JF,qe.SharingModule,h.Is,M.To]})}}]);