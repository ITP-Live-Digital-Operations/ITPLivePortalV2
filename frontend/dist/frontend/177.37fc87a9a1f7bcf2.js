"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[177],{6177:(vn,K,s)=>{s.r(K),s.d(K,{TalentModule:()=>I});var p=s(6814),d=s(1896),T=s(1476),h=s(3566),c=s(5313),P=s(5753),e=s(5879),ne=s(9554),ie=s(1921),A=s(3934),w=s(617);function oe(i,n){1&i&&(e.TgZ(0,"th",18),e._uU(1,"Brief Name"),e.qZA())}function re(i,n){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",t.Brief.campaignName," ")}}function ae(i,n){1&i&&(e.TgZ(0,"th",18),e._uU(1,"Deadline"),e.qZA())}function le(i,n){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.deadline)," ")}}function se(i,n){1&i&&(e.TgZ(0,"th",18),e._uU(1,"Weight"),e.qZA())}function ce(i,n){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.weight)}}function me(i,n){1&i&&(e.TgZ(0,"th",18),e._uU(1,"Created On"),e.qZA())}function ue(i,n){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.createdAt)," ")}}function pe(i,n){1&i&&(e.TgZ(0,"th",18),e._uU(1,"Progress"),e.qZA())}function fe(i,n){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.progress)}}function ge(i,n){1&i&&(e.TgZ(0,"th",18),e._uU(1,"Viewed"),e.qZA())}function de(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1," Yes "),e.qZA())}function he(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1," No "),e.qZA())}function _e(i,n){if(1&i&&(e.TgZ(0,"td",19),e.YNc(1,de,2,0,"span",20),e.YNc(2,he,2,0,"span",20),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",t.ViewedByTalent>0),e.xp6(1),e.Q6J("ngIf",t.ViewedByTalent<1)}}function Ce(i,n){1&i&&(e.TgZ(0,"th",18),e._uU(1,"Priority"),e.qZA())}function xe(i,n){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.priority)}}function ve(i,n){1&i&&(e.TgZ(0,"th",18),e._uU(1,"Status"),e.qZA())}function Ze(i,n){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.Brief.Status)}}function Te(i,n){1&i&&(e.TgZ(0,"th",21),e._uU(1,"View"),e.qZA())}function be(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"td",19)(1,"button",22),e.NdJ("click",function(){const a=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.viewedTask(a.id))}),e.TgZ(2,"mat-icon"),e._uU(3,"remove_red_eye"),e.qZA()()()}}function Ie(i,n){1&i&&e._UZ(0,"tr",23)}function ye(i,n){1&i&&e._UZ(0,"tr",24)}const Pe=function(){return[3,5,10,25,100]};class k{constructor(n,t,o,r,a){this.salesService=n,this.route=t,this.taskService=o,this.userService=r,this.activatedRoute=a,this.path=P.m,this.displayedColumns=["briefName","deadline","progress","weight","createdAt","status","Action"],this.privilegeLevel=this.userService.getPrivilegeLevel()}ngOnInit(){this.privilegeLevel<7?(this.userID=this.userService.getID(),this.getMyTasks(this.userID)):this.activatedRoute.params.subscribe(n=>{this.id=n.id,this.taskService.getMyTasks(this.id).subscribe(t=>{this.dataSource=t.data?.assignedUsers,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})})}getMyTasks(n){this.taskService.getMyTasks(n).subscribe(t=>{this.briefDetails=t,this.dataSource=new c.by(this.briefDetails.data?.assignedUsers),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}viewedTask(n){this.privilegeLevel<7&&this.taskService.updateStatus({id:n}).subscribe(t=>{}),this.salesService.getSalesBriefIdbyTaskId(n).subscribe(t=>{this.route.navigate([`${this.path.viewBrief+t.data.brief_id}`])})}}k.\u0275fac=function(n){return new(n||k)(e.Y36(ne.M),e.Y36(d.F0),e.Y36(ie.M),e.Y36(A.K),e.Y36(d.gz))},k.\u0275cmp=e.Xpm({type:k,selectors:[["app-person-tasks"]],viewQuery:function(n,t){if(1&n&&(e.Gf(T.NW,5),e.Gf(h.YE,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.paginator=o.first),e.iGM(o=e.CRH())&&(t.sort=o.first)}},decls:33,vars:8,consts:[[2,"position","relative"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","briefName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","deadline"],["matColumnDef","weight"],["matColumnDef","createdAt"],["matColumnDef","progress"],["matColumnDef","ViewedByTalent"],["matColumnDef","priority"],["matColumnDef","status"],["matColumnDef","Action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf"],["mat-header-cell",""],[1,"icon-btn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e.ynx(3,3),e.YNc(4,oe,2,0,"th",4),e.YNc(5,re,2,1,"td",5),e.BQk(),e.ynx(6,6),e.YNc(7,ae,2,0,"th",4),e.YNc(8,le,3,3,"td",5),e.BQk(),e.ynx(9,7),e.YNc(10,se,2,0,"th",4),e.YNc(11,ce,2,1,"td",5),e.BQk(),e.ynx(12,8),e.YNc(13,me,2,0,"th",4),e.YNc(14,ue,3,3,"td",5),e.BQk(),e.ynx(15,9),e.YNc(16,pe,2,0,"th",4),e.YNc(17,fe,2,1,"td",5),e.BQk(),e.ynx(18,10),e.YNc(19,ge,2,0,"th",4),e.YNc(20,_e,3,2,"td",5),e.BQk(),e.ynx(21,11),e.YNc(22,Ce,2,0,"th",4),e.YNc(23,xe,2,1,"td",5),e.BQk(),e.ynx(24,12),e.YNc(25,ve,2,0,"th",4),e.YNc(26,Ze,2,1,"td",5),e.BQk(),e.ynx(27,13),e.YNc(28,Te,2,0,"th",14),e.YNc(29,be,4,0,"td",5),e.BQk(),e.YNc(30,Ie,1,0,"tr",15),e.YNc(31,ye,1,0,"tr",16),e.qZA(),e._UZ(32,"mat-paginator",17),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",100)("pageSize",10)("pageSizeOptions",e.DdM(7,Pe)))},dependencies:[p.O5,w.Hw,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,T.NW,h.YE,h.nU,p.uU],styles:[".warn[_ngcontent-%COMP%]{background-color:red;color:#fff}.table-container[_ngcontent-%COMP%]{padding-top:1%;overflow-y:scroll;max-height:auto}.search-container[_ngcontent-%COMP%]{padding-top:2%;padding-bottom:2%;padding-left:1%;position:absolute;top:5;left:0;right:0;z-index:1;background-color:#fff}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-top:1px solid black;cursor:pointer}"]});var l=s(6223),$=s(2425),Y=s(96),J=s(2032),_=s(4170),V=s(2296);const Ae=["star"];function we(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2,3),e.NdJ("click",function(){const a=e.CHM(t).$implicit,m=e.oxw();return e.KtG(!m.readonly&&m._onClick(a))})("mouseenter",function(){const a=e.CHM(t).$implicit,m=e.oxw();return e.KtG(!m.readonly&&m._onHover(a))})("mouseleave",function(){const a=e.CHM(t).$implicit,m=e.oxw();return e.KtG(!m.readonly&&m._onHoverOut(a))}),e.TgZ(3,"mat-icon"),e._uU(4,"star_rate"),e.qZA()(),e.BQk()}if(2&i){const t=n.$implicit,o=e.oxw();e.xp6(1),e.ekj("active",t<=o._rating)}}function ke(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r._clear())}),e._uU(1),e.qZA()}2&i&&(e.xp6(1),e.hij("","Clear","\n"))}const Ne=function(){return[1,2,3,4,5]};class N{constructor(){this.onClick=new e.vpe,this.onView=new e.vpe}_onClick(n){this._rating=n,this.onClick.emit(n)}_clear(){this._rating=0,this.onClick.emit()}_onHover(n){this.startItems.forEach((t,o)=>{o+1<=n&&(!this._rating||o+1>this._rating)&&t.nativeElement.classList.add("active")})}_onHoverOut(n){this.startItems.forEach((t,o)=>{o+1<=n&&(!this._rating||o+1>this._rating)&&t.nativeElement.classList.remove("active")})}}function Me(i,n){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Response Rate"),e.qZA())}function qe(i,n){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.responseRate)}}function Oe(i,n){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Content Quality"),e.qZA())}function Se(i,n){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.contentQuality)}}function Ue(i,n){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Creativity"),e.qZA())}function Fe(i,n){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.creativity)}}function Le(i,n){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Flexibility"),e.qZA())}function Re(i,n){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.flexibility)}}function Qe(i,n){1&i&&(e.TgZ(0,"th",24),e._uU(1," Campaign Performance "),e.qZA())}function Ye(i,n){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",t.campaignPerformance," ")}}function Je(i,n){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Notes"),e.qZA())}function De(i,n){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.notes)}}function Ee(i,n){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Reviewed By"),e.qZA())}function He(i,n){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.userID.name)}}function Ge(i,n){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Date"),e.qZA())}function Be(i,n){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.createdAt))}}function $e(i,n){1&i&&e._UZ(0,"tr",26)}function Ve(i,n){1&i&&e._UZ(0,"tr",27)}N.\u0275fac=function(n){return new(n||N)},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-star-rating"]],viewQuery:function(n,t){if(1&n&&e.Gf(Ae,5),2&n){let o;e.iGM(o=e.CRH())&&(t.startItems=o)}},hostAttrs:[1,"m-star-rating"],hostVars:2,hostBindings:function(n,t){2&n&&e.ekj("readonly",t.readonly)},inputs:{rating:"rating",readonly:"readonly"},outputs:{onClick:"onClick",onView:"onView"},decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],["class","m-star-rating-clear",3,"click",4,"ngIf"],[1,"m-star-rating-item",3,"click","mouseenter","mouseleave"],["star",""],[1,"m-star-rating-clear",3,"click"]],template:function(n,t){1&n&&(e.YNc(0,we,5,2,"ng-container",0),e.YNc(1,ke,2,1,"div",1)),2&n&&(e.Q6J("ngForOf",e.DdM(2,Ne)),e.xp6(1),e.Q6J("ngIf",!t.readonly&&t._rating))},dependencies:[p.sg,p.O5,w.Hw],styles:[".m-star-rating{display:flex;align-items:flex-end}.m-star-rating:not(.readonly) .m-star-rating-item{cursor:pointer;transition:all .15s ease-out}.m-star-rating:not(.readonly) .m-star-rating-item:hover{color:gold}.m-star-rating-clear{font-size:14px;font-weight:500;color:gray;cursor:pointer}.m-star-rating-clear:hover{color:#000}.m-star-rating-item{padding-right:5px;color:gray;display:flex}.m-star-rating-item.active{color:gold}\n"],encapsulation:2});const je=function(){return[3,5,10,25,100]};class M{constructor(n,t,o,r,a){this.formBuilder=n,this.route=t,this.userService=o,this.toastrService=r,this.influencerService=a,this.displayedColumns=["responseRate","contentQuality","creativity","flexibility","campaignPerformance","notes","name","createdAt"],this.influencerForm=this.formBuilder.group({responseRate:["",l.kI.required],contentQuality:["",l.kI.required],creativity:["",l.kI.required],flexibility:["",l.kI.required],campaignPerformance:["",l.kI.required],notes:["",l.kI.maxLength(500)]})}ngOnInit(){this.influencerID=this.route.snapshot.paramMap.get("id"),this.GetInfluencerRatings(this.influencerID)}GetInfluencerRatings(n){this.influencerService.getInfluencerRatings(n).subscribe(t=>{this.influenceRatings=t,this.dataSource=new c.by(this.influenceRatings.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}onRatingClicked(n,t){const o=parseInt(n.target.dataset.rating,10);this.influencerForm.controls[t].setValue(o)}onSubmit(){this.influencerService.createInfluencerRating({influencer_id:this.influencerID,createdBy_id:this.userService.getID(),...this.influencerForm.value}).subscribe(n=>{this.data=n,"success"==this.data.status&&this.toastrService.success("Rating Added Successfully!")})}handleClickResponseRate(n){this.influencerForm.controls.responseRate.setValue(n)}handleClickContentQuality(n){this.influencerForm.controls.contentQuality.setValue(n)}handleClickCreativity(n){this.influencerForm.controls.creativity.setValue(n)}handleClickFlexibility(n){this.influencerForm.controls.flexibility.setValue(n)}handleClickCampaignPerformance(n){this.influencerForm.controls.campaignPerformance.setValue(n)}}M.\u0275fac=function(n){return new(n||M)(e.Y36(l.qu),e.Y36(d.gz),e.Y36(A.K),e.Y36($._W),e.Y36(Y.N))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-influencer-rating"]],viewQuery:function(n,t){if(1&n&&(e.Gf(T.NW,5),e.Gf(h.YE,7),e.Gf(c.BZ,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.paginator=o.first),e.iGM(o=e.CRH())&&(t.sort=o.first),e.iGM(o=e.CRH())&&(t.table=o.first)}},decls:81,vars:11,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"table"],[1,"star-rating"],[3,"onClick"],["formControlName","notes","matInput","","placeholder","Notes"],["align","end"],["mat-raised-button","","type","submit",2,"margin-top","2%",3,"disabled"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["table",""],["matColumnDef","responseRate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","contentQuality"],["matColumnDef","creativity"],["matColumnDef","flexibility"],["matColumnDef","campaignPerformance"],["matColumnDef","notes"],["matColumnDef","name"],["matColumnDef","createdAt"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"h2"),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th"),e._uU(7,"Field"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Rating"),e.qZA()()(),e.TgZ(10,"tbody")(11,"tr")(12,"td"),e._uU(13,"Response Rate"),e.qZA(),e.TgZ(14,"td")(15,"span",3)(16,"app-star-rating",4),e.NdJ("onClick",function(r){return t.handleClickResponseRate(r)}),e.qZA()()()(),e.TgZ(17,"tr")(18,"td"),e._uU(19,"Content Quality"),e.qZA(),e.TgZ(20,"td")(21,"span",3)(22,"app-star-rating",4),e.NdJ("onClick",function(r){return t.handleClickContentQuality(r)}),e.qZA()()()(),e.TgZ(23,"tr")(24,"td"),e._uU(25,"Creativity"),e.qZA(),e.TgZ(26,"td")(27,"span",3)(28,"app-star-rating",4),e.NdJ("onClick",function(r){return t.handleClickCreativity(r)}),e.qZA()()()(),e.TgZ(29,"tr")(30,"td"),e._uU(31,"Flexibility"),e.qZA(),e.TgZ(32,"td")(33,"span",3)(34,"app-star-rating",4),e.NdJ("onClick",function(r){return t.handleClickFlexibility(r)}),e.qZA()()()(),e.TgZ(35,"tr")(36,"td"),e._uU(37,"Campaign Performance"),e.qZA(),e.TgZ(38,"td")(39,"span",3)(40,"app-star-rating",4),e.NdJ("onClick",function(r){return t.handleClickCampaignPerformance(r)}),e.qZA()()()(),e.TgZ(41,"tr")(42,"td"),e._uU(43,"Notes"),e.qZA(),e.TgZ(44,"td")(45,"mat-form-field"),e._UZ(46,"textarea",5),e.TgZ(47,"mat-hint",6),e._uU(48),e.qZA()()()(),e.TgZ(49,"button",7),e._uU(50," Submit "),e.qZA()()()()(),e.TgZ(51,"div",8)(52,"table",9,10),e.ynx(54,11),e.YNc(55,Me,2,0,"th",12),e.YNc(56,qe,2,1,"td",13),e.BQk(),e.ynx(57,14),e.YNc(58,Oe,2,0,"th",12),e.YNc(59,Se,2,1,"td",13),e.BQk(),e.ynx(60,15),e.YNc(61,Ue,2,0,"th",12),e.YNc(62,Fe,2,1,"td",13),e.BQk(),e.ynx(63,16),e.YNc(64,Le,2,0,"th",12),e.YNc(65,Re,2,1,"td",13),e.BQk(),e.ynx(66,17),e.YNc(67,Qe,2,0,"th",12),e.YNc(68,Ye,2,1,"td",13),e.BQk(),e.ynx(69,18),e.YNc(70,Je,2,0,"th",12),e.YNc(71,De,2,1,"td",13),e.BQk(),e.ynx(72,19),e.YNc(73,Ee,2,0,"th",12),e.YNc(74,He,2,1,"td",13),e.BQk(),e.ynx(75,20),e.YNc(76,Ge,2,0,"th",12),e.YNc(77,Be,3,3,"td",13),e.BQk(),e.YNc(78,$e,1,0,"tr",21),e.YNc(79,Ve,1,0,"tr",22),e.qZA(),e._UZ(80,"mat-paginator",23),e.qZA()),2&n){let o;e.xp6(2),e.Q6J("formGroup",t.influencerForm),e.xp6(46),e.hij("",(null==(o=t.influencerForm.get("notes"))||null==o.value?null:o.value.length)||0,"/500"),e.xp6(1),e.Q6J("disabled",t.influencerForm.invalid),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(26),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",100)("pageSize",5)("pageSizeOptions",e.DdM(10,je))}},dependencies:[J.Nt,_.KE,_.bx,V.lW,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,T.NW,h.YE,h.nU,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,N,p.uU]});var C=s(9347),D=s(8074);function ze(i,n){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Platform "),e.qZA())}function Ke(i,n){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.platform," ")}}function We(i,n){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Deliverable "),e.qZA())}function Xe(i,n){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.deliverable," ")}}function et(i,n){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1," Quantity "),e.qZA())}function tt(i,n){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t?null:t.quantity,"1.0-0")," ")}}function nt(i,n){1&i&&e._UZ(0,"mat-header-row")}function it(i,n){1&i&&e._UZ(0,"mat-row")}function ot(i,n){if(1&i&&(e.TgZ(0,"div")(1,"mat-table",2),e.ynx(2,3),e.YNc(3,ze,2,0,"mat-header-cell",4),e.YNc(4,Ke,2,1,"mat-cell",5),e.BQk(),e.ynx(5,6),e.YNc(6,We,2,0,"mat-header-cell",4),e.YNc(7,Xe,2,1,"mat-cell",5),e.BQk(),e.ynx(8,7),e.YNc(9,et,2,0,"mat-header-cell",4),e.YNc(10,tt,3,4,"mat-cell",5),e.BQk(),e.YNc(11,nt,1,0,"mat-header-row",8),e.YNc(12,it,1,0,"mat-row",9),e.qZA(),e._UZ(13,"hr"),e.TgZ(14,"h2"),e._uU(15),e.qZA(),e.TgZ(16,"h2",10),e._uU(17),e.qZA(),e.TgZ(18,"h2"),e._uU(19),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.log.packages),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumnsForPackages),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsForPackages),e.xp6(3),e.hij("Reply Time : ",t.log.time_to_reply,""),e.xp6(2),e.hij("Notes: ",t.log.notes,""),e.xp6(2),e.AsE("Rate: ",t.log.currency," ",t.log.rate,"")}}function rt(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",11)(2,"div",12)(3,"span",13),e._uU(4,"Platform:"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div",12)(8,"span",13),e._uU(9,"Deliverable:"),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"div",12)(13,"span",13),e._uU(14,"Quantity:"),e.qZA(),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"number"),e.qZA()(),e.TgZ(18,"div",12)(19,"span",13),e._uU(20,"Currency:"),e.qZA(),e.TgZ(21,"span"),e._uU(22),e.qZA()(),e.TgZ(23,"div",12)(24,"span",13),e._uU(25,"Rate:"),e.qZA(),e.TgZ(26,"span"),e._uU(27),e.ALo(28,"number"),e.qZA()(),e.TgZ(29,"h2"),e._uU(30),e.qZA(),e.TgZ(31,"h2",10),e._uU(32),e.qZA()()()),2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.log.logItems.platform),e.xp6(5),e.Oqu(t.log.logItems.deliverable),e.xp6(5),e.Oqu(e.xi3(17,7,t.log.logItems.quantity,"1.0-0")),e.xp6(6),e.Oqu(t.log.logItems.currency),e.xp6(5),e.Oqu(e.xi3(28,10,t.log.logItems.rate,"1.2-2")),e.xp6(3),e.hij("Reply Time: ",t.log.time_to_reply,""),e.xp6(2),e.hij("Notes: ",t.log.notes,"")}}class q{constructor(n,t){this.source=n,this.logService=t,this.id=this.source.id,this.type=this.source.type,this.package=!1,this.single=!1,this.displayedColumnsSingle=["platform","deliverable","quantity","currency","rate"],this.displayedColumnsForPackages=["platform","deliverable","quantity"]}ngAfterViewInit(){this.logService.getLogById(this.id).subscribe(n=>{this.log=n,console.log(this.log),"single"==this.type?this.single=!0:"package"==this.type&&(this.package=!0)})}}q.\u0275fac=function(n){return new(n||q)(e.Y36(C.WI),e.Y36(D.$))},q.\u0275cmp=e.Xpm({type:q,selectors:[["app-view-log"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","platform"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","deliverable"],["matColumnDef","quantity"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"notes-field"],[1,"log-details","mat-elevation-z8"],[1,"log-detail"],[1,"log-label"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,ot,20,7,"div",1),e.YNc(2,rt,33,13,"div",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.package),e.xp6(1),e.Q6J("ngIf",t.single))},dependencies:[p.O5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,p.JJ],styles:[".single[_ngcontent-%COMP%], .package[_ngcontent-%COMP%]{color:#fff;margin-top:2%}.row[_ngcontent-%COMP%]{margin-top:2%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%]{padding:4%}.log-details[_ngcontent-%COMP%]{color:#fff;padding:20px;border-radius:8px;background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 4px 6px #0000001a}.log-details[_ngcontent-%COMP%]   .log-detail[_ngcontent-%COMP%]{display:flex;margin-bottom:10px;align-items:center}.log-details[_ngcontent-%COMP%]   .log-detail[_ngcontent-%COMP%]   .log-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;color:#fffc}.log-details[_ngcontent-%COMP%]   .log-detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;min-height:22px;color:#ffffffe6}.log-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:20px;font-size:1.25rem;color:#ffffffe6}.notes-field[_ngcontent-%COMP%]{white-space:pre-wrap;overflow-y:auto}"]});var E=s(1218),j=s(8525),z=s(3680);function at(i,n){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function lt(i,n){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function st(i,n){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ct(i,n){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function mt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",2)(2,"mat-form-field")(3,"mat-label"),e._uU(4),e.qZA(),e.TgZ(5,"mat-select",13),e.NdJ("change",function(){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.onPlatformChange(a))}),e.YNc(6,lt,2,2,"mat-option",4),e.qZA()(),e.TgZ(7,"mat-form-field")(8,"mat-label"),e._uU(9,"Deliverable"),e.qZA(),e.TgZ(10,"mat-select",14),e.YNc(11,st,2,2,"mat-option",4),e.qZA()(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Quantity"),e.qZA(),e.TgZ(15,"input",15),e.NdJ("input",function(r){const m=e.CHM(t).index,u=e.oxw();return e.KtG(u.onFieldNumericInput(m,"Quantity",r.target.value))}),e.qZA()(),e.TgZ(16,"mat-form-field")(17,"mat-label"),e._uU(18,"Currency"),e.qZA(),e.TgZ(19,"mat-select",16),e.YNc(20,ct,2,2,"mat-option",4),e.qZA()(),e.TgZ(21,"mat-form-field")(22,"mat-label"),e._uU(23,"Rate"),e.qZA(),e.TgZ(24,"input",15),e.NdJ("input",function(r){const m=e.CHM(t).index,u=e.oxw();return e.KtG(u.onFieldNumericInput(m,"Rate",r.target.value))}),e.qZA()(),e.TgZ(25,"button",17),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.removeFields(a))}),e.TgZ(26,"mat-icon"),e._uU(27," delete "),e.qZA()()()()}if(2&i){const t=n.$implicit,o=n.index,r=e.oxw();let a,m;e.Q6J("formGroupName",o),e.xp6(4),e.hij("Platform ",o+1,""),e.xp6(2),e.Q6J("ngForOf",r.platforms),e.xp6(5),e.Q6J("ngForOf",r.getAvailableDeliverables(o)),e.xp6(4),e.Q6J("value",r.formatNumber(null==(a=t.get("Quantity"))?null:a.value)),e.xp6(5),e.Q6J("ngForOf",r.currencies),e.xp6(4),e.Q6J("value",r.formatNumber(null==(m=t.get("Rate"))?null:m.value))}}class O{constructor(n,t,o,r,a,m,u,f){this.formBuilder=n,this.router=t,this.influencerService=o,this.userService=r,this.logService=a,this.toastrService=m,this.dialog=u,this.source=f,this.currencies=E.QT,this.platforms=E.Zk,this.submitted=!1,this.path=P.m,this.userId=this.userService.getID(),this.id=this.source.id,this.logForm=this.formBuilder.group({Influencer:["",l.kI.required],Campaign:["",l.kI.required],Notes:[""],Time_to_reply:["",l.kI.required]}),this.form=this.formBuilder.group({fields:this.formBuilder.array([])})}ngOnInit(){this.getInfluencers(),this.addFields(),this.loadRateLog()}get fields(){return this.form.get("fields")}addFields(){const n=this.formBuilder.group({Platform:["",l.kI.required],Deliverable:["",l.kI.required],Quantity:["",l.kI.required],Currency:["",l.kI.required],Rate:["",l.kI.required]});this.fields.push(n)}removeFields(n){this.fields.removeAt(n)}getInfluencers(){this.influencerService.getInfluencerNames().subscribe(n=>{this.influencers=n})}loadRateLog(){this.logService.getLogById(this.id).subscribe(n=>{console.log("Log data:",n),this.log=n,console.log(this.log),this.logForm.patchValue({Influencer:this.log.influencerID,Campaign:this.log.campaign,Notes:this.log.notes,Time_to_reply:this.log.time_to_reply}),this.logItemId=this.log.logItems.id,console.log(this.logItemId),this.fields.controls.forEach((t,o)=>{t.patchValue({Platform:this.log.logItems.platform,Deliverable:this.log.logItems.deliverable,Quantity:this.log.logItems.quantity,Currency:this.log.logItems.currency,Rate:this.log.logItems.rate})})})}onSubmit(){if(!this.submitted){if(this.submitted=!0,this.form.valid){const n={UserID:this.userId,InfluencerID:this.logForm.value.Influencer,Campaign:this.logForm.value.Campaign,type:"single",Notes:this.logForm.value.Notes,Time_to_reply:this.logForm.value.Time_to_reply,Item:this.form.value.fields,packageItems:{},logItemId:this.logItemId};console.log(n),this.logService.updateSingleLog(this.id,n).subscribe(t=>{this.toastrService.success("Log updated successfully"),this.router.navigate([this.path.rateLogs])})}this.dialog.closeAll()}}getAvailableDeliverables(n){switch(this.fields.controls[n].get("Platform")?.value){case"Instagram":return["Static image posts","Carousel posts","Instagram Stories","Instagram Reels","IGTV","Influencer partnerships and collaborations"];case"Tiktok":return["Short-form video content","Hashtag challenges","Influencer partnerships and collaborations"];case"Snapchat":return["Snap stories","Geofilters and lenses","Influencer partnerships and collaborations"];case"Twitter":return["Tweets","Retweets","Twitter threads","Hashtags","Influencer partnerships and collaborations"];case"Facebook":return["Facebook posts","Facebook Stories","Live videos","Groups","Influencer partnerships and collaborations"];case"Youtube":return["Video content","Livestreams","Live videos","Collaborations with other YouTubers or brands","Product reviews or demonstrations","Influencer partnerships and collaborations"];default:return[]}}onPlatformChange(n){const t=this.fields.controls[n].get("Platform")?.value,o=this.fields.controls[n].get("Deliverable");o?.setValue(null),o?.enable(),t?o?.setValidators(l.kI.required):o?.clearValidators()}formatNumber(n){return null===n?"":new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}onFieldNumericInput(n,t,o){const r=this.parseFormattedNumber(o);this.form.get("fields").at(n).get(t)?.setValue(r,{emitEvent:!1})}parseFormattedNumber(n){return Number(n.replace(/,/g,""))}}function ut(i,n){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function pt(i,n){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ft(i,n){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function gt(i,n){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function dt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",2)(2,"mat-form-field")(3,"mat-label"),e._uU(4),e.qZA(),e.TgZ(5,"mat-select",15),e.NdJ("change",function(){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.onPlatformChange(a))}),e.YNc(6,ft,2,2,"mat-option",4),e.qZA()(),e.TgZ(7,"mat-form-field")(8,"mat-label"),e._uU(9,"Deliverable"),e.qZA(),e.TgZ(10,"mat-select",16),e.YNc(11,gt,2,2,"mat-option",4),e.qZA()(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Quantity"),e.qZA(),e._UZ(15,"input",17),e.qZA(),e.TgZ(16,"button",18),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.removeFields(a))}),e.TgZ(17,"mat-icon"),e._uU(18,"delete"),e.qZA()()()()}if(2&i){const t=n.index,o=e.oxw();e.Q6J("formGroupName",t),e.xp6(4),e.hij("Platform ",t+1,""),e.xp6(2),e.Q6J("ngForOf",o.platforms),e.xp6(5),e.Q6J("ngForOf",o.getAvailableDeliverables(t))}}O.\u0275fac=function(n){return new(n||O)(e.Y36(l.qu),e.Y36(d.F0),e.Y36(Y.N),e.Y36(A.K),e.Y36(D.$),e.Y36($._W),e.Y36(C.uw),e.Y36(C.WI))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-edit-item-log"]],decls:27,vars:5,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"row"],["formControlName","Influencer"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","Campaign","autocomplete","off","required",""],["matInput","","formControlName","Notes","rows","2","autocomplete","off"],["matInput","","type","text","formControlName","Time_to_reply","autocomplete","off","required",""],["formArrayName","fields"],[3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","type","submit",1,"btn-color",3,"disabled"],[3,"value"],[3,"formGroupName"],["formControlName","Platform",3,"change"],["formControlName","Deliverable"],["matInput","","type","text","autocomplete","off","required","",3,"value","input"],["formControlName","Currency","required",""],[1,"icon-btn",2,"max-width","5%",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(2,"div",2)(3,"mat-form-field")(4,"mat-label"),e._uU(5,"Influencer"),e.qZA(),e.TgZ(6,"mat-select",3),e.YNc(7,at,2,2,"mat-option",4),e.qZA()(),e.TgZ(8,"mat-form-field")(9,"mat-label"),e._uU(10," Campaign "),e.qZA(),e._UZ(11,"input",5),e.qZA()(),e.TgZ(12,"div",2)(13,"mat-form-field")(14,"mat-label"),e._uU(15,"Notes "),e.qZA(),e._UZ(16,"textarea",6),e.qZA(),e.TgZ(17,"mat-form-field")(18,"mat-label"),e._uU(19," Time to reply "),e.qZA(),e._UZ(20,"input",7),e.qZA()()(),e.TgZ(21,"form",1),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(22,"div",8),e.YNc(23,mt,28,7,"div",9),e.qZA(),e.TgZ(24,"div",2)(25,"button",10),e._uU(26," Edit "),e.qZA()()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",t.logForm),e.xp6(6),e.Q6J("ngForOf",t.influencers),e.xp6(14),e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngForOf",t.fields.controls),e.xp6(2),e.Q6J("disabled",!(t.logForm.valid&&t.form.valid)||0==t.fields.length))},dependencies:[p.sg,J.Nt,_.KE,_.hX,V.lW,w.Hw,j.gD,z.ey,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,l.x0,l.CE],styles:[".form-container[_ngcontent-%COMP%]{padding:2%}.btn-color[_ngcontent-%COMP%]{background-color:#4789a1}"]});class S{constructor(n,t,o,r,a,m,u,f){this.formBuilder=n,this.router=t,this.service=o,this.userService=r,this.logService=a,this.toastrService=m,this.dialog=u,this.source=f,this.currencies=E.QT,this.platforms=E.Zk,this.submitted=!1,this.path=P.m,this.userId=this.userService.getID(),this.id=this.source.id,this.packageIds=[],this.logForm=this.formBuilder.group({Influencer:["",l.kI.required],Campaign:["",l.kI.required],Currency:["",l.kI.required],Rate:["",l.kI.required],Notes:[""],Time_to_reply:["",l.kI.required]}),this.form=this.formBuilder.group({fields:this.formBuilder.array([])})}ngOnInit(){this.getInfluencers(),this.addFields(),this.loadRateLog()}get fields(){return this.form.get("fields")}addFields(){const n=this.formBuilder.group({Platform:["",l.kI.required],Deliverable:["",l.kI.required],Quantity:["",l.kI.required]});this.fields.push(n)}removeFields(n){this.fields.removeAt(n)}getInfluencers(){this.service.getInfluencerNames().subscribe(n=>{this.influencers=n})}loadRateLog(){this.logService.getLogById(this.id).subscribe(n=>{this.log=n,this.logForm.patchValue({Influencer:this.log.influencerID,Campaign:this.log.campaign,Notes:this.log.notes,Time_to_reply:this.log.time_to_reply,Currency:this.log.currency,Rate:this.log.rate});for(let t=0;t<this.log.packages.length;t++)null!=this.log.packages[t].id&&(this.addFields(),this.packageIds.push(this.log.packages[t].id)),this.removeFields(this.log.packages.length);this.fields.controls.forEach((t,o)=>{t.patchValue({Platform:this.log.packages[o].platform,Deliverable:this.log.packages[o].deliverable,Quantity:this.log.packages[o].quantity})})})}onSubmit(){if(!this.submitted){if(this.submitted=!0,this.form.valid){console.log(this.form.value.fields);const n={UserID:this.userId,InfluencerID:this.logForm.value.Influencer,Campaign:this.logForm.value.Campaign,type:"package",Time_to_reply:this.logForm.value.Time_to_reply,Notes:this.logForm.value.Notes,Currency:this.logForm.value.Currency,Rate:this.logForm.value.Rate,package:this.form.value.fields,rateLogItems:{},packageIds:this.packageIds};this.logService.updatePackageLog(this.id,n).subscribe(t=>{this.data=t,"success"===this.data.status?(this.toastrService.success("Log Added Successfully!"),sessionStorage.removeItem("influencerData"),this.router.navigate([this.path.influencerRating+this.logForm.value.Influencer])):this.toastrService.error("Error! Please Try Again!")})}setTimeout(()=>{this.dialog.closeAll()},1e3)}}getAvailableDeliverables(n){switch(this.fields.controls[n].get("Platform")?.value){case"Instagram":return["Static image posts","Carousel posts","Instagram Stories","Instagram Reels","IGTV","Influencer partnerships and collaborations"];case"Tiktok":return["Short-form video content","Hashtag challenges","Influencer partnerships and collaborations"];case"Snapchat":return["Snap stories","Geofilters and lenses","Influencer partnerships and collaborations"];case"Twitter":return["Tweets","Retweets","Twitter threads","Hashtags","Influencer partnerships and collaborations"];case"Facebook":return["Facebook posts","Facebook Stories","Live videos","Groups","Influencer partnerships and collaborations"];case"Youtube":return["Video content","Livestreams","Live videos","Collaborations with other YouTubers or brands","Product reviews or demonstrations","Influencer partnerships and collaborations"];default:return[]}}onPlatformChange(n){const t=this.fields.controls[n].get("Platform")?.value,o=this.fields.controls[n].get("Deliverable");o?.setValue(null),o?.enable(),t?o?.setValidators(l.kI.required):o?.clearValidators()}}S.\u0275fac=function(n){return new(n||S)(e.Y36(l.qu),e.Y36(d.F0),e.Y36(Y.N),e.Y36(A.K),e.Y36(D.$),e.Y36($._W),e.Y36(C.uw),e.Y36(C.WI))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-edit-package-log"]],decls:36,vars:6,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"row"],["formControlName","Influencer"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","Campaign","autocomplete","off","required",""],["formControlName","Currency","required",""],["matInput","","type","number","formControlName","Rate","autocomplete","off","required",""],["matInput","","formControlName","Notes","rows","2","autocomplete","off"],["matInput","","type","text","formControlName","Time_to_reply","autocomplete","off","required",""],["formArrayName","fields"],[3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"],[3,"formGroupName"],["formControlName","Platform",3,"change"],["formControlName","Deliverable"],["matInput","","type","number","formControlName","Quantity","autocomplete","off","required",""],["color","warn",1,"icon-btn",2,"max-width","5%",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(2,"div",2)(3,"mat-form-field")(4,"mat-label"),e._uU(5,"Influencer"),e.qZA(),e.TgZ(6,"mat-select",3),e.YNc(7,ut,2,2,"mat-option",4),e.qZA()(),e.TgZ(8,"mat-form-field")(9,"mat-label"),e._uU(10," Campaign "),e.qZA(),e._UZ(11,"input",5),e.qZA(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Currency"),e.qZA(),e.TgZ(15,"mat-select",6),e.YNc(16,pt,2,2,"mat-option",4),e.qZA()(),e.TgZ(17,"mat-form-field")(18,"mat-label"),e._uU(19," Rate"),e.qZA(),e._UZ(20,"input",7),e.qZA()(),e.TgZ(21,"div",2)(22,"mat-form-field")(23,"mat-label"),e._uU(24,"Notes "),e.qZA(),e._UZ(25,"textarea",8),e.qZA(),e.TgZ(26,"mat-form-field")(27,"mat-label"),e._uU(28," Time to reply "),e.qZA(),e._UZ(29,"input",9),e.qZA()()(),e.TgZ(30,"form",1),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(31,"div",10),e.YNc(32,dt,19,4,"div",11),e.qZA(),e.TgZ(33,"div",2)(34,"button",12),e._uU(35," Edit "),e.qZA()()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",t.logForm),e.xp6(6),e.Q6J("ngForOf",t.influencers),e.xp6(9),e.Q6J("ngForOf",t.currencies),e.xp6(14),e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngForOf",t.fields.controls),e.xp6(2),e.Q6J("disabled",!(t.logForm.valid&&t.form.valid)||0==t.fields.length))},dependencies:[p.sg,J.Nt,_.KE,_.hX,V.lW,w.Hw,j.gD,z.ey,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.sg,l.u,l.x0,l.CE],styles:[".form-container[_ngcontent-%COMP%]{padding:2%}"]});var H=s(3305);const ht=["influencerSelect"],_t=["campaignSelect"],Ct=["contactSelect"];function xt(i,n){if(1&i&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function vt(i,n){if(1&i&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Zt(i,n){if(1&i&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Tt(i,n){if(1&i&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function bt(i,n){1&i&&(e.TgZ(0,"th",39),e._uU(1,"Influencer"),e.qZA())}function It(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"td",40)(1,"button",41),e.NdJ("click",function(){const a=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.viewInfluencer(a.influencer.id))}),e._uU(2),e.qZA()()}if(2&i){const t=n.$implicit;e.xp6(2),e.hij(" ",t.influencer.Name," ")}}function yt(i,n){1&i&&(e.TgZ(0,"th",39),e._uU(1,"Campaign"),e.qZA())}function Pt(i,n){if(1&i&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.campaign)}}function At(i,n){1&i&&(e.TgZ(0,"th",39),e._uU(1,"Contact"),e.qZA())}function wt(i,n){if(1&i&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",t.user.name," ")}}function kt(i,n){1&i&&(e.TgZ(0,"th",39),e._uU(1,"Date"),e.qZA())}function Nt(i,n){if(1&i&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.createdAt))}}function Mt(i,n){1&i&&(e.TgZ(0,"th",42),e._uU(1,"Reply time"),e.qZA())}function qt(i,n){if(1&i&&(e.TgZ(0,"td",43),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",t.time_to_reply," ")}}function Ot(i,n){1&i&&(e.TgZ(0,"th",39),e._uU(1,"Type"),e.qZA())}function St(i,n){if(1&i&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"uppercase"),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.type))}}function Ut(i,n){1&i&&(e.TgZ(0,"th",39),e._uU(1,"View"),e.qZA())}function Ft(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw();return e.KtG(a.editInfluencerLog(r.id,r.type))}),e._uU(1," edit "),e.qZA()}}function Lt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"td",40)(1,"mat-icon",44),e.NdJ("click",function(){const a=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.viewInfluencerLog(a.id,a.type))}),e._uU(2," remove_red_eye "),e.qZA(),e.YNc(3,Ft,2,0,"mat-icon",45),e.qZA()}if(2&i){const t=n.$implicit,o=e.oxw();e.xp6(3),e.Q6J("ngIf",o.userId===t.userID)}}function Rt(i,n){1&i&&e._UZ(0,"tr",46)}function Qt(i,n){1&i&&e._UZ(0,"tr",47)}const Yt=function(){return[3,5,10,25,100]};class U{constructor(n,t,o,r,a){this.userService=n,this.logService=t,this.dialog=o,this.cdr=r,this.router=a,this.userRole=this.userService.getRole(),this.userId=this.userService.getID(),this.path=P.m,this.allInfluencers=[],this.allCampaigns=[],this.allContacts=[],this.influencers=[],this.campaigns=[],this.contacts=[],this.filterCriteria={search:"",campaigns:[],influencers:[],contacts:[],rateRange:{min:null,max:null},currency:""},this.displayedColumns=["Influencer","Campaign","Contact","Time_to_reply","Date","type","Action"],this.filterValues={influencerID:"",campaign:"",userID:""},this.single=!1,this.package=!1,this.logs=[],this.allCurrencies=[]}ngOnInit(){this.getAllLogs()}ngAfterViewInit(){this.extractColumnData()}extractColumnData(){const n=this.table._data;for(let t=0;t<n?.length;t++){const o=n[t];this.influencers.push(o.influencer??""),this.campaigns.push(o.campaign??""),this.contacts.push(o.contact??"")}}getAllLogs(){this.logService.getAllLogsUpdated().subscribe(n=>{console.log(n),this.logs=n,this.dataSource=new c.by(n),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.allCurrencies=[...new Set(n.flatMap(t=>"package"===t.type?[t.currency]:t.logItems instanceof Array?t.logItems.map(o=>o.currency):[t.logItems?.currency]))].filter(t=>!!t),this.dataSource.sortingDataAccessor=(t,o)=>{switch(o){case"Influencer":return t.influencer.Name;case"Campaign":return t.campaign;case"Contact":return t.user.name;case"Date":return new Date(t.createdAt);case"type":return t.type;default:return t[o]}},this.allInfluencers=[...new Set(n.map(t=>t.influencer.Name))],this.allCampaigns=[...new Set(n.map(t=>t.campaign))],this.allContacts=[...new Set(n.map(t=>t.user.name))],this.updateFilterOptions()})}extractUniqueAttributes(n,t){const o=new Set(n.map(r=>{const m=function a(u,f){return f.split(".").reduce((g,R)=>g&&g[R],u)}(r,t);return"string"==typeof m||"number"==typeof m?m.toString().trim():null}).filter(r=>null!==r&&""!==r));return Array.from(o).sort()}filterInfluencer(n){this.filterValues.influencerID=n,this.applyFilter(),this.updateFilterOptions()}filterCampaign(n){this.filterValues.campaign=n,this.applyFilter(),this.updateFilterOptions()}filterContact(n){this.filterValues.userID=n,this.applyFilter(),this.updateFilterOptions()}resetMatSelects(){this.influencerSelect&&(this.influencerSelect.value=[]),this.campaignSelect&&(this.campaignSelect.value=[]),this.contactSelect&&(this.contactSelect.value=[])}resetFilters(){this.filterCriteria={search:"",campaigns:[],influencers:[],contacts:[],rateRange:{min:null,max:null},currency:""},this.allCampaigns=this.extractUniqueAttributes(this.dataSource.data,"campaigns"),this.allContacts=this.extractUniqueAttributes(this.dataSource.data,"user.name"),this.allInfluencers=this.extractUniqueAttributes(this.dataSource.data,"influencers.Name"),this.resetMatSelects(),this.applyFilter()}applyFilter(){const n=this.filterCriteria.search?this.filterCriteria.search.toString().toLowerCase():"",t=this.filterCriteria.rateRange.min,o=this.filterCriteria.rateRange.max,r=this.filterCriteria.currency.toLowerCase();this.dataSource.filterPredicate=(a,m)=>{try{const u=JSON.parse(m),f=!n||a.influencer.Name.toLowerCase().includes(n)||a.campaign.toLowerCase().includes(n)||a.user.name.toLowerCase().includes(n),g=!u.influencers.length||u.influencers.includes(a.influencer?.Name.trim().toLowerCase()),R=!u.campaigns.length||u.campaigns.includes(a.campaign?.trim().toLowerCase()),v=!u.contacts.length||u.contacts.includes(a.user?.name.trim().toLowerCase()),Q="package"===a.type?a.rate??0:Array.isArray(a.logItems)?a.logItems.reduce((x,y)=>x+(y.rate??0),0):a.logItems?.rate??0,G="package"===a.type?a.currency??"":Array.isArray(a.logItems)?a.logItems[0]?.currency??"":a.logItems?.currency??"",B=!r||G.toLowerCase()===r;return f&&g&&R&&v&&((null===t||Q>=t)&&(null===o||Q<=o))&&B}catch(u){return console.error("Error parsing filter JSON:",u),!1}},this.dataSource.filter=JSON.stringify(this.filterCriteria),this.updateFilterOptions(),this.cdr.detectChanges()}applyFilterChange(n,t){switch(console.log(`Filter change - Type: ${n}, Value: ${t}`),n){case"influencers":this.filterCriteria.influencers=t.map(o=>"string"==typeof o?o.trim().toLowerCase():o);break;case"campaigns":this.filterCriteria.campaigns=t.map(o=>"string"==typeof o?o.trim().toLowerCase():o);break;case"contacts":this.filterCriteria.contacts=t.map(o=>"string"==typeof o?o.trim().toLowerCase():o);break;case"rateRange":this.filterCriteria.rateRange=t}Array.isArray(t)||(t=[t]),this.filterCriteria[n]=t.map(o=>"string"==typeof o?o.trim().toLowerCase():o),this.applyFilter(),this.updateFilterOptions()}updateFilterOptions(){let n=[...this.dataSource.data];this.allInfluencers=this.extractUniqueAttributes(n.filter(t=>(!this.filterCriteria.campaigns.length||this.filterCriteria.campaigns.includes(t.campaign?.trim().toLowerCase()))&&(!this.filterCriteria.contacts.length||this.filterCriteria.contacts.includes(t.user?.name?.trim().toLowerCase()))),"influencer.Name"),this.allCampaigns=this.extractUniqueAttributes(n.filter(t=>(!this.filterCriteria.influencers.length||this.filterCriteria.influencers.includes(t.influencer?.Name?.trim().toLowerCase()))&&(!this.filterCriteria.contacts.length||this.filterCriteria.contacts.includes(t.user?.name?.trim().toLowerCase()))&&"string"==typeof t.campaign),"campaign"),this.allContacts=this.extractUniqueAttributes(n.filter(t=>(!this.filterCriteria.influencers.length||this.filterCriteria.influencers.includes(t.influencer?.Name?.trim().toLowerCase()))&&(!this.filterCriteria.campaigns.length||this.filterCriteria.campaigns.includes(t.campaign?.trim().toLowerCase()))),"user.name")}editInfluencerLog(n,t){"single"==t?this.dialog?.open(O,{width:"70%",height:"60%",exitAnimationDuration:"1000ms",enterAnimationDuration:"1000ms",data:{id:n}}):this.dialog?.open(S,{width:"70%",height:"60%",exitAnimationDuration:"1000ms",enterAnimationDuration:"1000ms",data:{id:n}})}viewInfluencer(n){console.log(n),console.log(this.path.influencerProfile);const t=this.router.serializeUrl(this.router.createUrlTree([this.path.influencerProfile,n]));window.open(t,"_blank")}viewInfluencerLog(n,t){this.dialog?.open(q,{width:"70%",height:"fit-content",exitAnimationDuration:"1000ms",enterAnimationDuration:"1000ms",data:{id:n,type:t}})}}U.\u0275fac=function(n){return new(n||U)(e.Y36(A.K),e.Y36(D.$),e.Y36(C.uw),e.Y36(e.sBO),e.Y36(d.F0))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-influencer-logs"]],viewQuery:function(n,t){if(1&n&&(e.Gf(T.NW,5),e.Gf(h.YE,5),e.Gf(c.BZ,5),e.Gf(ht,5),e.Gf(_t,5),e.Gf(Ct,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.paginator=o.first),e.iGM(o=e.CRH())&&(t.sort=o.first),e.iGM(o=e.CRH())&&(t.table=o.first),e.iGM(o=e.CRH())&&(t.influencerSelect=o.first),e.iGM(o=e.CRH())&&(t.campaignSelect=o.first),e.iGM(o=e.CRH())&&(t.contactSelect=o.first)}},decls:74,vars:14,consts:[[2,"align-items","center","font-size","35px"],["id","search"],["viewBox","0 0 420 60"],[1,"bar"],["matInput","","placeholder","Search",3,"keyup"],["searchInput",""],["matPrefix","",2,"color","aliceblue"],[1,"search-container"],[1,"filter",2,"width","30%"],["multiple","","placeholder","Influencers Filter",3,"selectionChange"],["influencerSelect",""],[3,"value",4,"ngFor","ngForOf"],["multiple","","placeholder","Campaigns Filter",3,"selectionChange"],["campaignSelect",""],["multiple","","placeholder","Contacts Filter",3,"selectionChange"],["contactSelect",""],[1,"rate-filter"],[3,"ngModel","ngModelChange","selectionChange"],["matInput","","type","number","placeholder","Min Rate",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","Max Rate",3,"ngModel","ngModelChange"],[1,"logs-button"],["type","button",1,"glow-on-hover",2,"margin-left","2%",3,"click"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Influencer"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Campaign"],["matColumnDef","Contact"],["matColumnDef","Date"],["matColumnDef","Time_to_reply"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","truncate-text",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"icons-btn",3,"click"],["mat-header-cell",""],["mat-cell","",1,"truncate-text"],[3,"click"],[3,"click",4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(n,t){if(1&n){const o=e.EpF();e.TgZ(0,"h2",0),e._uU(1,"Logs"),e.qZA(),e.TgZ(2,"div",1),e.O4$(),e.TgZ(3,"svg",2),e._UZ(4,"rect",3),e.qZA(),e.kcU(),e.TgZ(5,"mat-form-field")(6,"input",4,5),e.NdJ("keyup",function(){e.CHM(o);const a=e.MAs(7);return e.KtG(t.applyFilterChange("search",a.value))}),e.qZA(),e.TgZ(8,"mat-icon",6),e._uU(9,"search"),e.qZA()()(),e.TgZ(10,"div")(11,"div",7)(12,"mat-expansion-panel")(13,"mat-expansion-panel-header")(14,"mat-panel-title")(15,"mat-icon"),e._uU(16,"filter_list"),e.qZA()()(),e.TgZ(17,"mat-form-field",8)(18,"mat-label"),e._uU(19,"Influencers Filter"),e.qZA(),e.TgZ(20,"mat-select",9,10),e.NdJ("selectionChange",function(a){return t.applyFilterChange("influencers",a.value)}),e.YNc(22,xt,2,2,"mat-option",11),e.qZA()(),e.TgZ(23,"mat-form-field",8)(24,"mat-label"),e._uU(25,"Campaigns Filter"),e.qZA(),e.TgZ(26,"mat-select",12,13),e.NdJ("selectionChange",function(a){return t.applyFilterChange("campaigns",a.value)}),e.YNc(28,vt,2,2,"mat-option",11),e.qZA()(),e.TgZ(29,"mat-form-field",8)(30,"mat-label"),e._uU(31,"Contacts Filter"),e.qZA(),e.TgZ(32,"mat-select",14,15),e.NdJ("selectionChange",function(a){return t.applyFilterChange("contacts",a.value)}),e.YNc(34,Zt,2,2,"mat-option",11),e.qZA()(),e.TgZ(35,"div",16)(36,"mat-form-field")(37,"mat-label"),e._uU(38,"Select Currency"),e.qZA(),e.TgZ(39,"mat-select",17),e.NdJ("ngModelChange",function(a){return t.filterCriteria.currency=a})("selectionChange",function(){return t.applyFilter()}),e.YNc(40,Tt,2,2,"mat-option",11),e.qZA()(),e.TgZ(41,"mat-form-field")(42,"input",18),e.NdJ("ngModelChange",function(a){return t.filterCriteria.rateRange.min=a})("ngModelChange",function(){return t.applyFilter()}),e.qZA()(),e.TgZ(43,"mat-form-field")(44,"input",19),e.NdJ("ngModelChange",function(a){return t.filterCriteria.rateRange.max=a})("ngModelChange",function(){return t.applyFilter()}),e.qZA()()(),e.TgZ(45,"div",20)(46,"button",21),e.NdJ("click",function(){return t.resetFilters()}),e._uU(47," Reset Filters "),e.qZA()()()()(),e.TgZ(48,"div",22)(49,"table",23),e.ynx(50,24),e.YNc(51,bt,2,0,"th",25),e.YNc(52,It,3,1,"td",26),e.BQk(),e.ynx(53,27),e.YNc(54,yt,2,0,"th",25),e.YNc(55,Pt,2,1,"td",26),e.BQk(),e.ynx(56,28),e.YNc(57,At,2,0,"th",25),e.YNc(58,wt,2,1,"td",26),e.BQk(),e.ynx(59,29),e.YNc(60,kt,2,0,"th",25),e.YNc(61,Nt,3,3,"td",26),e.BQk(),e.ynx(62,30),e.YNc(63,Mt,2,0,"th",31),e.YNc(64,qt,2,1,"td",32),e.BQk(),e.ynx(65,33),e.YNc(66,Ot,2,0,"th",25),e.YNc(67,St,3,3,"td",26),e.BQk(),e.ynx(68,34),e.YNc(69,Ut,2,0,"th",25),e.YNc(70,Lt,4,1,"td",26),e.BQk(),e.YNc(71,Rt,1,0,"tr",35),e.YNc(72,Qt,1,0,"tr",36),e.qZA(),e._UZ(73,"mat-paginator",37),e.qZA()}2&n&&(e.xp6(22),e.Q6J("ngForOf",t.allInfluencers),e.xp6(6),e.Q6J("ngForOf",t.allCampaigns),e.xp6(6),e.Q6J("ngForOf",t.allContacts),e.xp6(5),e.Q6J("ngModel",t.filterCriteria.currency),e.xp6(1),e.Q6J("ngForOf",t.allCurrencies),e.xp6(2),e.Q6J("ngModel",t.filterCriteria.rateRange.min),e.xp6(2),e.Q6J("ngModel",t.filterCriteria.rateRange.max),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",null==t.dataSource?null:t.dataSource.data.length)("pageSize",15)("pageSizeOptions",e.DdM(13,Yt)))},dependencies:[p.sg,p.O5,J.Nt,_.KE,_.hX,_.qo,w.Hw,j.gD,z.ey,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,T.NW,h.YE,h.nU,l.Fj,l.wV,l.JJ,l.On,H.ib,H.yz,H.yK,p.gd,p.uU],styles:['h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin:10px 0;text-align:center}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:8px}.table-container[_ngcontent-%COMP%]   .truncate-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.logs-button[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin-bottom:1%;width:100%}.logs-button[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{flex-grow:1;margin-right:20px;width:-moz-fit-content;width:fit-content}.logs-button[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]:last-child, .filter-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]:last-child{margin-right:0}mat-paginator[_ngcontent-%COMP%]{background-color:#f0f0f0}mat-paginator[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin:0 12px}.single[_ngcontent-%COMP%], .package[_ngcontent-%COMP%]{background-color:#fff;color:#333;padding:15px;border-radius:4px;margin-top:20px}.single[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%], .package[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}@media (max-width: 768px){.logs-button[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.logs-button[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%], .logs-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0;margin-bottom:10px}.row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#888;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#555}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.mat-expansion-panel[_ngcontent-%COMP%]{background:#1f3371!important;color:#000000de}.search-container[_ngcontent-%COMP%]{padding-bottom:5px}  .mat-mdc-select-panel{background:rgba(50,68,129,.9921568627)!important}  .mat-mdc-option .mdc-list-item__primary-text{color:#fff!important}  .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0;border-radius:5px;border-color:#fff}.mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.mat-input-element[_ngcontent-%COMP%]{font-size:16px;color:#333}  .mat-expansion-indicator.ng-tns-c2690051721-4{display:none}.mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:8px;overflow:hidden}.mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#1f3371}.mat-expansion-indicator[_ngcontent-%COMP%]{color:#333}.mat-option[_ngcontent-%COMP%]{font-size:14px}.mat-header-cell[_ngcontent-%COMP%]{font-weight:700}.mat-cell[_ngcontent-%COMP%]{font-size:16px;color:#333}.mat-paginator[_ngcontent-%COMP%]{margin-top:16px}.package[_ngcontent-%COMP%], .single[_ngcontent-%COMP%]{margin-top:16px;padding:16px;border:1px solid #3e0a76;border-radius:4px}.package[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .single[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .package[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .single[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px}.mat-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;margin-right:8px;color:#333;transition:color .3s ease-in-out}.mat-icon[_ngcontent-%COMP%]:hover{color:#ff4081}.mat-icon[_ngcontent-%COMP%]{color:#fff}#search[_ngcontent-%COMP%]{display:grid;grid-area:search;grid-template:"search" 60px/420px;justify-content:center;align-content:center;justify-items:stretch;align-items:stretch}#searchInput[_ngcontent-%COMP%]{display:block;grid-area:search;-webkit-appearance:none;appearance:none;width:100%;height:100%;background:none;padding:0 30px 0 60px;border:none;border-radius:100px;font:24px/1 system-ui,sans-serif;outline-offset:-8px}#search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{grid-area:search;overflow:visible;color:#1239ae;fill:none;stroke:currentColor}button[_ngcontent-%COMP%]{width:20vh;height:5vh}.icons-btn[_ngcontent-%COMP%]{background-color:transparent;border:0px;padding:4px 6px;color:#fff}.icons-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(300deg,rgb(45,47,149) 0%,rgba(43,45,124,.85) 77%,rgba(36,38,119,.85) 100%);border-radius:5px}']});var W=s(2096),Jt=s(6306),Dt=s(7921),Et=s(7398),Ht=s(4456),Gt=s.n(Ht),Bt=s(6129),X=s(9186);const $t=["profileContainer"];function Vt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"app-export-modash-profile",4),e.NdJ("profileEdited",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onProfileEdited(r))}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.AsE("Editing Profile ",t.currentProfileIndex+1," of ",t.profiles.length,""),e.xp6(1),e.Q6J("profile",t.currentProfile)}}function jt(i,n){if(1&i&&(e.TgZ(0,"div",8,9),e._UZ(2,"app-export-modash-profile",10),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("profile",t.currentProfile)("isFormSubmitted",t.isFormSubmitted)}}function zt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h3"),e._uU(2),e.qZA(),e.YNc(3,jt,3,2,"div",5),e.TgZ(4,"div",6)(5,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.editProfile())}),e._uU(6,"Edit"),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.approveProfile())}),e._uU(8,"Approve"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.AsE("Previewing Profile ",t.currentProfileIndex+1," of ",t.profiles.length,""),e.xp6(1),e.Q6J("ngIf",t.currentProfile&&t.isFormSubmitted)}}function Kt(i,n){if(1&i&&(e.TgZ(0,"div",2),e.YNc(1,Vt,4,3,"div",3),e.YNc(2,zt,9,3,"div",3),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.currentProfile&&!t.isFormSubmitted),e.xp6(1),e.Q6J("ngIf",t.isFormSubmitted&&t.currentProfile)}}function Wt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"h3"),e._uU(2,"All profiles approved!"),e.qZA(),e.TgZ(3,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.exportAllProfilesToPowerPoint())}),e._uU(4,"Export All to PowerPoint"),e.qZA()()}}class F{constructor(n){this.data=n,this.profiles=[],this.currentProfileIndex=0,this.isFormSubmitted=!1,this.isAllApproved=!1,this.approvedProfiles=[]}ngOnInit(){this.data&&this.data.profiles&&(this.profiles=this.data.profiles),this.profiles&&this.profiles.length>0&&(this.currentProfile=this.profiles[this.currentProfileIndex])}onProfileEdited(n){this.currentProfile=n,this.isFormSubmitted=!0}approveProfile(){this.approvedProfiles.push(this.currentProfile),this.currentProfileIndex<this.profiles.length-1?(this.currentProfileIndex++,this.currentProfile=this.profiles[this.currentProfileIndex],this.isFormSubmitted=!1):this.isAllApproved=!0}editProfile(){this.isFormSubmitted=!1}exportAllProfilesToPowerPoint(){const n=new Bt.Z;this.approvedProfiles.forEach((t,o)=>{const r=this.profileContainer.nativeElement,a=u=>{for(let f=0;f<u.childNodes.length;f++){const g=u.childNodes[f];8===g.nodeType?(u.removeChild(g),f--):1===g.nodeType&&a(g)}};a(r);Gt()(r,{useCORS:!0,allowTaint:!0,logging:!1,scale:1}).then(u=>{const f=u.toDataURL("image/png"),g=u.width,R=u.height,v=1/96,Q=g*v,G=R*v;n.defineLayout({name:"Custom",width:Q,height:G}),n.layout="Custom";const B=n.addSlide();B.addImage({data:f,x:0,y:0,w:Q,h:G}),r.querySelectorAll(".social-platform").forEach(x=>{const y=x.getBoundingClientRect(),te=r.getBoundingClientRect(),pn=y.left-te.left,fn=y.top-te.top,gn=y.width,dn=y.height,hn=pn*v,_n=fn*v,Cn=gn*v,xn=dn*v;let Z="";x.classList.contains("instagram")?Z=`https://www.instagram.com/${t.instagramProfile.username}`:x.classList.contains("tiktok")?Z=`https://www.tiktok.com/@${t.TiktokHandle}`:x.classList.contains("youtube")?Z=`https://www.youtube.com/${t.YoutubeHandle}`:x.classList.contains("twitter")?Z=`https://www.twitter.com/${t.TwitterHandle}`:x.classList.contains("snapchat")?Z=`https://www.snapchat.com/add/${t.SnapchatHandle}`:x.classList.contains("twitch")&&(Z=`https://www.twitch.tv/${t.TwitchHandle}`),Z&&B.addShape(n.ShapeType.rect,{x:hn,y:_n,w:Cn,h:xn,fill:{color:"FFFFFF",transparency:100},line:{color:"FFFFFF",transparency:100},hyperlink:{url:Z}})})}).catch(u=>{console.error("Error exporting profile to PowerPoint:",u)})}),n.writeFile({fileName:"Approved_Profiles.pptx"}).then(()=>{console.log("Presentation created successfully")}).catch(t=>{console.error("Error creating presentation:",t)})}}function Xt(i,n){if(1&i&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorMessage)}}function en(i,n){1&i&&(e.TgZ(0,"div",11),e._uU(1," Please search to view profiles "),e.qZA())}function tn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",13)(2,"div",14),e._UZ(3,"img",15),e.TgZ(4,"div",16),e._UZ(5,"img",17),e.qZA()()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"input",18),e.NdJ("change",function(){const a=e.CHM(t).$implicit,m=e.oxw(3);return e.KtG(m.toggleSelection(a))}),e.qZA()()()}if(2&i){const t=n.$implicit,o=e.oxw(3);e.xp6(3),e.Q6J("src",t.profilePicture,e.LSH)("alt",t.Name),e.xp6(2),e.Q6J("src",t.profilePicture,e.LSH)("alt",t.Name),e.xp6(2),e.Oqu(t.Name),e.xp6(2),e.Q6J("checked",o.isSelected(t))}}function nn(i,n){if(1&i&&(e.TgZ(0,"table"),e.YNc(1,tn,10,6,"tr",12),e.ALo(2,"slice"),e.ALo(3,"async"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,1,e.lcZ(3,5,t.filteredInfluencers),0,10))}}function on(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",14),e._UZ(2,"img",15),e.TgZ(3,"div",16),e._UZ(4,"img",17),e.qZA()(),e.TgZ(5,"span"),e._uU(6),e.qZA(),e.TgZ(7,"button",20),e.NdJ("click",function(){const a=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(m.removeInfluencer(a))}),e._uU(8,"Remove"),e.qZA()()}if(2&i){const t=n.$implicit;e.xp6(2),e.Q6J("src",t.profilePicture,e.LSH)("alt",t.Name),e.xp6(2),e.Q6J("src",t.profilePicture,e.LSH)("alt",t.Name),e.xp6(2),e.Oqu(t.Name)}}function rn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"h2"),e._uU(2,"Influencer Search"),e.qZA(),e._UZ(3,"input",3),e.YNc(4,Xt,2,1,"div",4),e.YNc(5,en,2,0,"div",5),e.ALo(6,"async"),e.YNc(7,nn,4,7,"table",6),e.ALo(8,"async"),e.TgZ(9,"div",7)(10,"h3"),e._uU(11,"Selected Influencers:"),e.qZA(),e.YNc(12,on,9,5,"div",8),e.qZA(),e.TgZ(13,"button",9),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onNext())}),e._uU(14,"Next"),e.qZA()()}if(2&i){const t=e.oxw();let o,r;e.xp6(3),e.Q6J("formControl",t.searchControl),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(1),e.Q6J("ngIf",!(""!==t.searchControl.value&&null!=t.searchControl.value||null!=(o=e.lcZ(6,6,t.filteredInfluencers))&&o.length)),e.xp6(2),e.Q6J("ngIf",null==(r=e.lcZ(8,8,t.filteredInfluencers))?null:r.length),e.xp6(5),e.Q6J("ngForOf",t.selectedInfluencers),e.xp6(1),e.Q6J("disabled",0===t.selectedInfluencers.length)}}function an(i,n){if(1&i&&e._UZ(0,"app-export-multiple-profiles",21),2&i){const t=e.oxw();e.Q6J("profiles",t.profiles)}}F.\u0275fac=function(n){return new(n||F)(e.Y36(C.WI,8))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-export-multiple-profiles"]],viewQuery:function(n,t){if(1&n&&(e.Gf($t,5),e.Gf(X.o,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.profileContainer=o.first),e.iGM(o=e.CRH())&&(t.profileComponents=o)}},inputs:{profiles:"profiles"},decls:2,vars:2,consts:[["class","profiles-container",4,"ngIf"],["class","export-section",4,"ngIf"],[1,"profiles-container"],[4,"ngIf"],[3,"profile","profileEdited"],["class","profile-container",4,"ngIf"],[1,"buttons"],["type","button",3,"click"],[1,"profile-container"],["profileContainer",""],[3,"profile","isFormSubmitted"],[1,"export-section"],[3,"click"]],template:function(n,t){1&n&&(e.YNc(0,Kt,3,2,"div",0),e.YNc(1,Wt,5,0,"div",1)),2&n&&(e.Q6J("ngIf",!t.isAllApproved&&t.profiles),e.xp6(1),e.Q6J("ngIf",t.isAllApproved))},dependencies:[p.O5,X.o]});class L{constructor(n,t,o){this.influencerService=n,this.router=t,this.dialog=o,this.allInfluencers=[],this.filteredInfluencers=(0,W.of)([]),this.selectedInfluencers=[],this.searchControl=new l.NI(""),this.errorMessage="",this.profiles=[],this.next=!1}ngOnInit(){this.influencerService.getInfluencersSearchProfiles().pipe((0,Jt.K)(n=>(console.error("Error fetching influencers:",n),this.errorMessage="Failed to load influencers. Please try again later.",(0,W.of)({influencers:[]})))).subscribe(n=>{n&&Array.isArray(n.influencers)?(this.allInfluencers=n.influencers,this.initializeSearch()):(console.error("Received invalid data:",n),this.errorMessage="Received invalid data from the server.",this.allInfluencers=[])})}initializeSearch(){this.filteredInfluencers=this.searchControl.valueChanges.pipe((0,Dt.O)(""),(0,Et.U)(n=>this._filter(n||"")))}_filter(n){const t=n.toLowerCase();return this.allInfluencers.filter(o=>o&&o.Name&&o.Name.toLowerCase().includes(t))}isSelected(n){return this.selectedInfluencers.some(t=>t.id===n.id)}toggleSelection(n){const t=this.selectedInfluencers.findIndex(o=>o.id===n.id);t>-1?this.selectedInfluencers.splice(t,1):this.selectedInfluencers.push(n)}removeInfluencer(n){const t=this.selectedInfluencers.findIndex(o=>o.id===n.id);t>-1&&this.selectedInfluencers.splice(t,1)}onNext(){if(this.selectedInfluencers.length>0){const n=this.selectedInfluencers.map(t=>t.id);this.influencerService.getModashProfiles(n).subscribe(t=>{t&&Array.isArray(t)?(this.profiles=t,this.next=!0):(console.error("Received invalid data:",t),this.errorMessage="Received invalid data from the server.")},t=>{console.error("Error fetching Modash profiles:",t),this.errorMessage="Failed to load Modash profiles. Please try again later."})}}}L.\u0275fac=function(n){return new(n||L)(e.Y36(Y.N),e.Y36(d.F0),e.Y36(C.uw))},L.\u0275cmp=e.Xpm({type:L,selectors:[["app-influencer-profiles"]],decls:2,vars:2,consts:[["class","container",4,"ngIf"],[3,"profiles",4,"ngIf"],[1,"container"],["placeholder","Search influencers...",1,"search-input",3,"formControl"],["class","error-message",4,"ngIf"],["class","prompt-message",4,"ngIf"],[4,"ngIf"],[1,"selected-influencers"],["class","selected-influencer",4,"ngFor","ngForOf"],[1,"next-btn",3,"disabled","click"],[1,"error-message"],[1,"prompt-message"],[4,"ngFor","ngForOf"],[1,"image-cell"],[1,"image-container"],[1,"profile-pic",3,"src","alt"],[1,"image-preview"],[1,"preview-pic",3,"src","alt"],["type","checkbox",3,"checked","change"],[1,"selected-influencer"],[1,"remove-btn",3,"click"],[3,"profiles"]],template:function(n,t){1&n&&(e.YNc(0,rn,15,10,"div",0),e.YNc(1,an,1,1,"app-export-multiple-profiles",1)),2&n&&(e.Q6J("ngIf",!t.next),e.xp6(1),e.Q6J("ngIf",t.next))},dependencies:[p.sg,p.O5,l.Fj,l.JJ,l.oH,F,p.Ov,p.OU],styles:[".container[_ngcontent-%COMP%]{background-color:#0a192f;color:#e6f1ff;padding:20px;border-radius:8px}.search-input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:20px;background-color:#112240;color:#e6f1ff;border:none;border-radius:4px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #112240}.profile-pic[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover}.image-preview[_ngcontent-%COMP%]{display:none;position:absolute;top:50%;left:20%;z-index:1;background-color:#112240;padding:5px;border-radius:4px;box-shadow:0 0 10px #00000080}.image-container[_ngcontent-%COMP%]:hover   .image-preview[_ngcontent-%COMP%]{display:block}.preview-pic[_ngcontent-%COMP%]{object-fit:cover;border-radius:4px}.selected-influencers[_ngcontent-%COMP%]{margin-bottom:20px}.selected-influencer[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.selected-influencer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px;margin-right:auto}.remove-btn[_ngcontent-%COMP%]{background-color:#ff9f1c;color:#0a192f;border:none;padding:5px 10px;border-radius:4px;cursor:pointer}.next-btn[_ngcontent-%COMP%]{background-color:#4a90e2;color:#e6f1ff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:16px}"]});let ln=P.m;const sn=[{path:"viewBrief/:id",children:[{path:"",loadChildren:()=>s.e(166).then(s.bind(s,4166)).then(i=>i.ViewBriefModule)}]},{path:"edit",children:[{path:"",loadChildren:()=>Promise.all([s.e(125),s.e(592),s.e(83)]).then(s.bind(s,5083)).then(i=>i.EditModule)}]},{path:"tasks/:id",component:k},{path:"logs",component:U},{path:"influencerRating/:id",component:M},{path:"influencerProfiles",component:L},{path:"new",children:[{path:"",loadChildren:()=>s.e(125).then(s.bind(s,4125)).then(i=>i.CreateModule)}]},{path:"head",children:[{path:"",loadChildren:()=>Promise.all([s.e(592),s.e(987)]).then(s.bind(s,3987)).then(i=>i.HeadOfTalentModule)}]},{path:"",redirectTo:`${ln.forms}`,pathMatch:"full"},{path:"**",redirectTo:"/site/notFound"}];class b{}b.\u0275fac=function(n){return new(n||b)},b.\u0275mod=e.oAB({type:b}),b.\u0275inj=e.cJS({imports:[d.Bz.forChild(sn),d.Bz]});var cn=s(6058),mn=s(9862),un=s(6865);class I{}I.\u0275fac=function(n){return new(n||I)},I.\u0275mod=e.oAB({type:I}),I.\u0275inj=e.cJS({imports:[p.ez,b,cn.q,l.UX,l.u5,mn.JF,un.SharingModule,C.Is,H.To]})}}]);