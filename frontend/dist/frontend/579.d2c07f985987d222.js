"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[579],{8579:(St,z,s)=>{s.r(z),s.d(z,{SalesModule:()=>k});var u=s(6814),h=s(1896),n=s(6223),_=s(5753),V=s(1213),e=s(5879),C=s(3934),Y=s(5869),Z=s(9554),R=s(9229),E=s(4960),f=s(4170),v=s(2296),j=s(2286),g=s(1218),W=s(9061),D=s(2032),A=s(8525),I=s(3680);function ee(o,i){if(1&o&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function te(o,i){if(1&o&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function ie(o,i){if(1&o&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function oe(o,i){if(1&o&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}class N{constructor(i,t){this.rootFormGroup=i,this.clientService=t,this.clientIndustries=g.r5,this.campaignobjectives=g.Tj,this.currencies=g.QT,this.selectedClient=null,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName),this.getClients(),this.setupFormChanges(),this.form.addControl("brandId",new n.NI({value:"",disabled:!0}))}getClients(){this.clientService.getClients().subscribe(i=>{console.log(i),this.clients=i,this.clients.sort((t,a)=>t.name.localeCompare(a.name))})}setupFormChanges(){this.form.get("clientId")?.valueChanges.subscribe(i=>{this.selectedClient=this.clients?.find(t=>t.id===i),this.brands=this.selectedClient?this.selectedClient.brands:[],this.selectedClient?this.form.get("brandId")?.enable():this.form.get("brandId")?.disable()})}}N.\u0275fac=function(i){return new(i||N)(e.Y36(n.sg),e.Y36(W.y))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-basic-information"]],inputs:{basicInfo:"basicInfo",formGroupName:"formGroupName"},decls:49,vars:5,consts:[[3,"formGroup"],[1,"row"],["matInput","","type","text","formControlName","Agency","autocomplete","off"],["formControlName","clientId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","brandId"],["matInput","","type","text","formControlName","CampaignName","autocomplete","off"],["matInput","","formControlName","CampaignOverview","rows","1","autocomplete","off"],["formControlName","CampaignObjective"],["matInput","","formControlName","CampaignObjectiveDetails","rows","1","autocomplete","off"],["matInput","","type","number","formControlName","NumberofRecommendations","autocomplete","off"],["formControlName","Currency"],["matInput","","type","number","formControlName","Budget","autocomplete","off"],[3,"value"]],template:function(i,t){1&i&&(e.ynx(0,0),e.TgZ(1,"div",1)(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Agency"),e.qZA(),e._UZ(5,"input",2),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Client"),e.qZA(),e.TgZ(9,"mat-select",3),e.YNc(10,ee,2,2,"mat-option",4),e.qZA()(),e.TgZ(11,"mat-form-field")(12,"mat-label"),e._uU(13,"Brand"),e.qZA(),e.TgZ(14,"mat-select",5),e.YNc(15,te,2,2,"mat-option",4),e.qZA()()(),e.TgZ(16,"div",1)(17,"mat-form-field")(18,"mat-label"),e._uU(19,"Campaign Name"),e.qZA(),e._UZ(20,"input",6),e.qZA(),e.TgZ(21,"mat-form-field")(22,"mat-label"),e._uU(23,"Campaign Overview"),e.qZA(),e._UZ(24,"textarea",7),e.qZA()(),e.TgZ(25,"div",1)(26,"mat-form-field")(27,"mat-label"),e._uU(28,"Campaign Objective"),e.qZA(),e.TgZ(29,"mat-select",8),e.YNc(30,ie,2,2,"mat-option",4),e.qZA()(),e.TgZ(31,"mat-form-field")(32,"mat-label"),e._uU(33,"Campaign Objective Details"),e.qZA(),e._UZ(34,"textarea",9),e.qZA()(),e.TgZ(35,"div",1)(36,"mat-form-field")(37,"mat-label"),e._uU(38,"Number of recommendations"),e.qZA(),e._UZ(39,"input",10),e.qZA(),e.TgZ(40,"mat-form-field")(41,"mat-label"),e._uU(42,"Currency"),e.qZA(),e.TgZ(43,"mat-select",11),e.YNc(44,oe,2,2,"mat-option",4),e.qZA()(),e.TgZ(45,"mat-form-field")(46,"mat-label"),e._uU(47,"Approximate Budget"),e.qZA(),e._UZ(48,"input",12),e.qZA()(),e.BQk()),2&i&&(e.Q6J("formGroup",t.form),e.xp6(10),e.Q6J("ngForOf",t.clients),e.xp6(5),e.Q6J("ngForOf",t.brands),e.xp6(15),e.Q6J("ngForOf",t.campaignobjectives.sort()),e.xp6(14),e.Q6J("ngForOf",t.currencies))},dependencies:[u.sg,D.Nt,f.KE,f.hX,A.gD,I.ey,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u],styles:[".mat-mdc-text-field-wrapper.mdc-text-field.mdc-text-field--filled.mdc-text-field--disabled{background-color:gray}"]});var J=s(5986),L=s(8034);function ne(o,i){if(1&o&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}class w{constructor(i){this.rootFormGroup=i,this.briefPlatforms=g.l$,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}function ae(o,i){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function re(o,i){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function se(o,i){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ce(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Less than 10,000 followers "),e.qZA())}function le(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Between 10,000 and 100,000 followers "),e.qZA())}function me(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Between 100,000 and 1,000,000 followers "),e.qZA())}function de(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," More than 1,000,000 followers "),e.qZA())}w.\u0275fac=function(i){return new(i||w)(e.Y36(n.sg))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-campaign-overview"]],inputs:{formGroupName:"formGroupName"},decls:49,vars:6,consts:[[3,"formGroup"],[1,"row"],["matInput","","formControlName","CampaignStartDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","CampaignEndDate",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","CampaignMessagePhaseOne","rows","1","autocomplete","off"],["matInput","","formControlName","CampaignMessagePhaseTwo","rows","1","autocomplete","off"],["matInput","","formControlName","CampaignMessagePhaseThree","rows","1","autocomplete","off"],["formControlName","ContentDeliverables","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","BrandExclusivityDurationinDays","autocomplete","off","min","0"],[1,"checkbox-container"],["color","primary","formControlName","VideoProduction"],["color","primary","formControlName","VideoEditing"],[3,"value"]],template:function(i,t){if(1&i&&(e.TgZ(0,"form",0)(1,"div",1)(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Campaign Launch Date"),e.qZA(),e._UZ(5,"input",2)(6,"mat-datepicker-toggle",3)(7,"mat-datepicker",null,4),e.qZA(),e.TgZ(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Campaign End Date"),e.qZA(),e._UZ(12,"input",5)(13,"mat-datepicker-toggle",3)(14,"mat-datepicker",null,6),e.qZA()(),e.TgZ(16,"div",1)(17,"mat-form-field")(18,"mat-label"),e._uU(19,"Campaign Message Phase 1"),e.qZA(),e._UZ(20,"textarea",7),e.qZA(),e.TgZ(21,"mat-form-field")(22,"mat-label"),e._uU(23,"Campaign Message Phase 2"),e.qZA(),e._UZ(24,"textarea",8),e.qZA(),e.TgZ(25,"mat-form-field")(26,"mat-label"),e._uU(27,"Campaign Message Phase 3"),e.qZA(),e._UZ(28,"textarea",9),e.qZA()(),e.TgZ(29,"div",1)(30,"h2"),e._uU(31,"Content Deliverables"),e.qZA(),e.TgZ(32,"mat-form-field")(33,"mat-label"),e._uU(34," Platforms "),e.qZA(),e.TgZ(35,"mat-select",10),e.YNc(36,ne,2,2,"mat-option",11),e.qZA()(),e.TgZ(37,"mat-form-field")(38,"mat-label"),e._uU(39,"Brand Exclusivity Duration in Days"),e.qZA(),e._UZ(40,"input",12),e.qZA()(),e.TgZ(41,"div")(42,"h2"),e._uU(43,"Video"),e.qZA(),e.TgZ(44,"div",13)(45,"mat-checkbox",14),e._uU(46,"Production"),e.qZA(),e.TgZ(47,"mat-checkbox",15),e._uU(48,"Editing"),e.qZA()()()()),2&i){const a=e.MAs(8),r=e.MAs(15);e.Q6J("formGroup",t.form),e.xp6(5),e.Q6J("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(23),e.Q6J("ngForOf",t.briefPlatforms.sort())}},dependencies:[u.sg,D.Nt,f.KE,f.hX,f.R9,A.gD,I.ey,J.oG,L.Mq,L.hl,L.nW,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.qQ,n.sg,n.u],styles:[".mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}mat-datepicker-toggle[_ngcontent-%COMP%]{color:#fff}"]});class T{constructor(i){this.rootFormGroup=i,this.clientIndustries=g.r5,this.countries=g.hW,this.showInfo1=!1,this.showInfo2=!1,this.showInfo3=!1,this.showInfo4=!1,this.showInfo5=!1,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}function fe(o,i){if(1&o&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ue(o,i){1&o&&(e.TgZ(0,"div",20),e._uU(1," Please select main market first. "),e.qZA())}function pe(o,i){if(1&o&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function he(o,i){if(1&o&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ge(o,i){if(1&o&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}T.\u0275fac=function(i){return new(i||T)(e.Y36(n.sg))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-influencer-details"]],inputs:{formGroupName:"formGroupName"},decls:85,vars:8,consts:[[3,"formGroup"],[1,"row"],["formGroupName","InfluencerAgeRange",1,"checkbox-container"],["color","primary","formControlName","AgeGroup1"],["color","primary","formControlName","AgeGroup2"],["color","primary","formControlName","AgeGroup3"],["color","primary","formControlName","AgeGroup4"],["color","primary","formControlName","AgeGroup5"],["formControlName","InfluencerLocation","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","InfluencerCity","autocomplete","off"],["formControlName","InfluencerNationality","multiple",""],["formControlName","InfluencerInterest","multiple",""],["formControlName","InfluencerGender"],["value","Male"],["value","Female"],["value","Both"],["matInput","","formControlName","InfluencerNotes","rows","1","autocomplete","off"],["matInput","","type","text","formControlName","SimilarProfileLink","autocomplete","off"],["formGroupName","InfluencerNumberOfFollowers",1,"checkbox-container",2,"flex","0.5"],[1,"hoverable-text",3,"mouseover","mouseout"],["color","primary","formControlName","Nano"],["class","info-box",4,"ngIf"],["color","primary","formControlName","Micro"],["color","primary","formControlName","Macro"],["color","primary","formControlName","Mega"],["color","primary","formControlName","Celebrity"],[2,"flex","1"],[2,"width","50rem"],["matInput","","type","text","formControlName","NoteForNumberOfFollowers","autocomplete","off"],[3,"value"],[1,"info-box"]],template:function(i,t){1&i&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2"),e._uU(3,"Influencer Age Range"),e.qZA(),e.TgZ(4,"div",2)(5,"mat-checkbox",3),e._uU(6," 12 - 17"),e.qZA(),e.TgZ(7,"mat-checkbox",4),e._uU(8," 18 - 24"),e.qZA(),e.TgZ(9,"mat-checkbox",5),e._uU(10," 25 - 34"),e.qZA(),e.TgZ(11,"mat-checkbox",6),e._uU(12," 35 - 49"),e.qZA(),e.TgZ(13,"mat-checkbox",7),e._uU(14," 50 + "),e.qZA()()(),e._UZ(15,"hr"),e.TgZ(16,"div",1)(17,"h2"),e._uU(18,"Influencer Location, Nationality, Gender, and Interests"),e.qZA(),e.TgZ(19,"mat-form-field")(20,"mat-label"),e._uU(21,"Influencer Location"),e.qZA(),e.TgZ(22,"mat-select",8),e.YNc(23,ae,2,2,"mat-option",9),e.qZA()(),e.TgZ(24,"mat-form-field")(25,"mat-label"),e._uU(26,"Influencer City"),e.qZA(),e._UZ(27,"input",10),e.qZA(),e.TgZ(28,"mat-form-field")(29,"mat-label"),e._uU(30,"Influencer Nationality"),e.qZA(),e.TgZ(31,"mat-select",11),e.YNc(32,re,2,2,"mat-option",9),e.qZA()(),e.TgZ(33,"mat-form-field")(34,"mat-label"),e._uU(35,"Influencer Interests"),e.qZA(),e.TgZ(36,"mat-select",12),e.YNc(37,se,2,2,"mat-option",9),e.qZA()()(),e.TgZ(38,"div",1)(39,"mat-form-field")(40,"mat-label"),e._uU(41,"Influencer Gender"),e.qZA(),e.TgZ(42,"mat-select",13)(43,"mat-option",14),e._uU(44," Male"),e.qZA(),e.TgZ(45,"mat-option",15),e._uU(46," Female"),e.qZA(),e.TgZ(47,"mat-option",16),e._uU(48," Both"),e.qZA()()(),e.TgZ(49,"mat-form-field")(50,"mat-label"),e._uU(51,"Influencer Notes"),e.qZA(),e._UZ(52,"textarea",17),e.qZA(),e.TgZ(53,"mat-form-field")(54,"mat-label"),e._uU(55,"Similar Profile Handle (Link) "),e.qZA(),e._UZ(56,"input",18),e.qZA()(),e._UZ(57,"hr"),e.TgZ(58,"div",1)(59,"h2"),e._uU(60,"Number of Followers"),e.qZA(),e.TgZ(61,"div",19)(62,"div",20),e.NdJ("mouseover",function(){return t.showInfo1=!0})("mouseout",function(){return t.showInfo1=!1}),e.TgZ(63,"mat-checkbox",21),e._uU(64," Nano"),e.qZA(),e.YNc(65,ce,2,0,"div",22),e.qZA(),e.TgZ(66,"div",20),e.NdJ("mouseover",function(){return t.showInfo2=!0})("mouseout",function(){return t.showInfo2=!1}),e.TgZ(67,"mat-checkbox",23),e._uU(68," Micro"),e.qZA(),e.YNc(69,le,2,0,"div",22),e.qZA(),e.TgZ(70,"div",20),e.NdJ("mouseover",function(){return t.showInfo3=!0})("mouseout",function(){return t.showInfo3=!1}),e.TgZ(71,"mat-checkbox",24),e._uU(72," Macro "),e.qZA(),e.YNc(73,me,2,0,"div",22),e.qZA(),e.TgZ(74,"div",20),e.NdJ("mouseover",function(){return t.showInfo4=!0})("mouseout",function(){return t.showInfo4=!1}),e.TgZ(75,"mat-checkbox",25),e._uU(76," Mega "),e.qZA(),e.YNc(77,de,2,0,"div",22),e.qZA(),e.TgZ(78,"mat-checkbox",26),e._uU(79," Celebrity"),e.qZA()(),e.TgZ(80,"div",27)(81,"mat-form-field",28)(82,"mat-label"),e._uU(83,"Note for number of followers "),e.qZA(),e._UZ(84,"input",29),e.qZA()()()()),2&i&&(e.Q6J("formGroup",t.form),e.xp6(23),e.Q6J("ngForOf",t.countries),e.xp6(9),e.Q6J("ngForOf",t.countries),e.xp6(5),e.Q6J("ngForOf",t.clientIndustries),e.xp6(28),e.Q6J("ngIf",t.showInfo1),e.xp6(4),e.Q6J("ngIf",t.showInfo2),e.xp6(4),e.Q6J("ngIf",t.showInfo3),e.xp6(4),e.Q6J("ngIf",t.showInfo4))},dependencies:[u.sg,u.O5,D.Nt,f.KE,f.hX,A.gD,I.ey,J.oG,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,n.x0],styles:[".row[_ngcontent-%COMP%]{color:#fff!important}.checkbox-container[_ngcontent-%COMP%]{color:#fff}  .mat-mdc-checkbox label{color:#fff!important;cursor:pointer}.mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}"]});class y{constructor(i){this.rootFormGroup=i,this.countries=g.hW,this.clientIndustries=g.r5,this.formGroupName="",this.showInfo1=!1}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}y.\u0275fac=function(i){return new(i||y)(e.Y36(n.sg))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-audience-details"]],inputs:{formGroupName:"formGroupName"},decls:55,vars:6,consts:[[3,"formGroup"],[1,"row"],["formGroupName","AudienceAgeRange",1,"checkbox-container"],["color","primary","formControlName","AgeGroup1"],["color","primary","formControlName","AgeGroup2"],["color","primary","formControlName","AgeGroup3"],["color","primary","formControlName","AgeGroup4"],["color","primary","formControlName","AgeGroup5"],[1,"hoverable-text",3,"mouseover","mouseout"],["formControlName","AudienceLocation","multiple",""],[3,"value",4,"ngFor","ngForOf"],["class","info-box",4,"ngIf"],["formControlName","AudienceNationality","multiple",""],["formControlName","AudienceGender"],["value","Male"],["value","Female"],["value","Both"],["formControlName","PrimaryAudienceInterest","multiple",""],["formControlName","SecondaryAudienceInterest","multiple",""],[3,"value"],[1,"info-box"]],template:function(i,t){1&i&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2"),e._uU(3,"Audience Age Range"),e.qZA(),e.TgZ(4,"div",2)(5,"mat-checkbox",3),e._uU(6," 12 - 17"),e.qZA(),e.TgZ(7,"mat-checkbox",4),e._uU(8," 18 - 24"),e.qZA(),e.TgZ(9,"mat-checkbox",5),e._uU(10," 25 - 34"),e.qZA(),e.TgZ(11,"mat-checkbox",6),e._uU(12," 35 - 49"),e.qZA(),e.TgZ(13,"mat-checkbox",7),e._uU(14," 50 + "),e.qZA()()(),e._UZ(15,"hr"),e.TgZ(16,"div",1)(17,"h2"),e._uU(18,"Audience Location, Nationality and Gender"),e.qZA(),e.TgZ(19,"div",8),e.NdJ("mouseover",function(){return t.showInfo1=!0})("mouseout",function(){return t.showInfo1=!1}),e.TgZ(20,"mat-form-field")(21,"mat-label"),e._uU(22,"Audience Location"),e.qZA(),e.TgZ(23,"mat-select",9),e.YNc(24,fe,2,2,"mat-option",10),e.qZA()(),e.YNc(25,ue,2,0,"div",11),e.qZA(),e.TgZ(26,"mat-form-field")(27,"mat-label"),e._uU(28,"Audience Nationality"),e.qZA(),e.TgZ(29,"mat-select",12),e.YNc(30,pe,2,2,"mat-option",10),e.qZA()(),e.TgZ(31,"mat-form-field")(32,"mat-label"),e._uU(33," Audience Gender"),e.qZA(),e.TgZ(34,"mat-select",13)(35,"mat-option",14),e._uU(36," Male"),e.qZA(),e.TgZ(37,"mat-option",15),e._uU(38," Female"),e.qZA(),e.TgZ(39,"mat-option",16),e._uU(40," Both"),e.qZA()()()(),e._UZ(41,"hr"),e.TgZ(42,"div",1)(43,"h2"),e._uU(44,"Audience Primary and Seconadry Interest"),e.qZA(),e.TgZ(45,"mat-form-field")(46,"mat-label"),e._uU(47,"Primary Audience Interest"),e.qZA(),e.TgZ(48,"mat-select",17),e.YNc(49,he,2,2,"mat-option",10),e.qZA()(),e.TgZ(50,"mat-form-field")(51,"mat-label"),e._uU(52,"Secondary Audience Interest"),e.qZA(),e.TgZ(53,"mat-select",18),e.YNc(54,ge,2,2,"mat-option",10),e.qZA()()()()),2&i&&(e.Q6J("formGroup",t.form),e.xp6(24),e.Q6J("ngForOf",t.countries),e.xp6(1),e.Q6J("ngIf",t.showInfo1),e.xp6(5),e.Q6J("ngForOf",t.countries),e.xp6(19),e.Q6J("ngForOf",t.clientIndustries),e.xp6(5),e.Q6J("ngForOf",t.clientIndustries))},dependencies:[u.sg,u.O5,f.KE,f.hX,A.gD,I.ey,J.oG,n._Y,n.JJ,n.JL,n.sg,n.u,n.x0],styles:[".mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}.info-box[_ngcontent-%COMP%]{color:#ff0;font-size:larger;margin-bottom:2%}"]});class x{constructor(i){this.rootFormGroup=i,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}x.\u0275fac=function(i){return new(i||x)(e.Y36(n.sg))},x.\u0275cmp=e.Xpm({type:x,selectors:[["app-department-details"]],inputs:{formGroupName:"formGroupName"},decls:41,vars:1,consts:[[3,"formGroup"],[1,"row"],[2,"width","50rem"],["matInput","","type","text","formControlName","ConfirmedInfluencerHandles","autocomplete","off"],["matInput","","type","text","formControlName","PreviousBrandAmbassadorsName","autocomplete","off"],["formControlName","ItpDepartment"],["value","UAE"],["value","KSA"],["value","Originals"],["value","Gaming"],["matInput","","type","text","formControlName","KPIs","autocomplete","off"],[1,"checkbox-container"],["color","primary","formControlName","Strategy"],["color","primary","formControlName","Concept"],["color","primary","formControlName","Event"],["color","primary","formControlName","Performance"]],template:function(i,t){1&i&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2"),e._uU(3,"Confirmed and Previous Influencers"),e.qZA(),e.TgZ(4,"mat-form-field",2)(5,"mat-label"),e._uU(6,"Confirmed Influencers Handles "),e.qZA(),e._UZ(7,"input",3),e.qZA(),e.TgZ(8,"mat-form-field",2)(9,"mat-label"),e._uU(10,"Previous Influncer Partners "),e.qZA(),e._UZ(11,"input",4),e.qZA()(),e._UZ(12,"hr"),e.TgZ(13,"div",1)(14,"mat-form-field",2)(15,"mat-label"),e._uU(16,"ITP Department"),e.qZA(),e.TgZ(17,"mat-select",5)(18,"mat-option",6),e._uU(19," UAE "),e.qZA(),e.TgZ(20,"mat-option",7),e._uU(21," KSA "),e.qZA(),e.TgZ(22,"mat-option",8),e._uU(23," Originals"),e.qZA(),e.TgZ(24,"mat-option",9),e._uU(25," Gaming "),e.qZA()()(),e.TgZ(26,"mat-form-field",2)(27,"mat-label"),e._uU(28,"KPIs"),e.qZA(),e._UZ(29,"input",10),e.qZA()(),e.TgZ(30,"div",1)(31,"div",11)(32,"div",11)(33,"mat-checkbox",12),e._uU(34,"Strategy required"),e.qZA(),e.TgZ(35,"mat-checkbox",13),e._uU(36,"Concept required"),e.qZA(),e.TgZ(37,"mat-checkbox",14),e._uU(38,"Event required"),e.qZA(),e.TgZ(39,"mat-checkbox",15),e._uU(40,"Performance Marketing required"),e.qZA()()()()()),2&i&&e.Q6J("formGroup",t.form)},dependencies:[D.Nt,f.KE,f.hX,A.gD,I.ey,J.oG,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}"]});class B{constructor(i,t,a,r,c,d,b){this.formBuilder=i,this.userService=t,this.notificationService=a,this.salesService=r,this.router=c,this.toastrService=d,this.fileService=b,this.userId=this.userService.getID(),this.path=_.m,this.headsOfKSA=[],this.headsofUAE=[23],this.clients=[],this.progress=0,this.message="",this.filesToUpload=[],this.fileName="Select File",this.userService.getUserNameById(this.userId).subscribe(l=>{this.userName=l}),this.initializeElements()}initializeElements(){this.newForm=this.formBuilder.group({basicInfo:this.formBuilder.group({Agency:["",[n.kI.required]],clientId:["",[n.kI.required]],brandId:[""],CampaignName:["",[n.kI.required]],CampaignOverview:[""],CampaignObjective:[""],CampaignObjectiveDetails:[""],NumberofRecommendations:["",[n.kI.required]],Currency:[""],Budget:["",[n.kI.required]]}),campaignOverview:this.formBuilder.group({CampaignStartDate:["",[n.kI.required]],CampaignEndDate:["",[n.kI.required]],CampaignMessagePhaseOne:[""],CampaignMessagePhaseTwo:[""],CampaignMessagePhaseThree:[""],ContentDeliverables:[""],BrandExclusivityDurationinDays:["",[n.kI.required]],VideoProduction:new n.NI(!1),VideoEditing:new n.NI(!1)}),influencerDetails:this.formBuilder.group({InfluencerAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),InfluencerLocation:[""],InfluencerCity:[""],InfluencerNationality:[""],InfluencerGender:[""],InfluencerNotes:[""],SimilarProfileLink:[""],InfluencerInterest:[""],InfluencerNumberOfFollowers:new n.cw({Nano:new n.NI(!1),Micro:new n.NI(!1),Macro:new n.NI(!1),Mega:new n.NI(!1),Celebrity:new n.NI(!1)}),NoteForNumberOfFollowers:[""]}),audienceDetails:this.formBuilder.group({AudienceAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),AudienceLocation:["",[n.kI.required]],AudienceNationality:[""],AudienceGender:[""],PrimaryAudienceInterest:[""],SecondaryAudienceInterest:[""]}),departmentDetails:this.formBuilder.group({ConfirmedInfluencerHandles:[""],PreviousBrandAmbassadorsName:[""],Performance:new n.NI(!1),Event:new n.NI(!1),Concept:new n.NI(!1),Strategy:new n.NI(!1),ItpDepartment:["",[n.kI.required]],KPIs:[""]})})}ngOnInit(){this.getHeads()}getHeads(){this.userService.getKSAHeads().subscribe(i=>{this.headsOfKSA=i}),this.userService.getUAEHead().subscribe(i=>{i.onLeave&&this.headsofUAE.push(15)})}submitForm(){const i=this.newForm.value.departmentDetails.ItpDepartment,t=this.processFormGroups(this.newForm);t.CreatedbyID=this.userService.getID(),t.Ready=!1,t.ResultsViewed=!1,""===t.brandId&&(t.brandId=null),console.log({...t}),this.salesService.createBrief({...t}).subscribe(a=>{if(this.newBrief=a,this.uploadFiles(this.newBrief.id),"Originals"==i||"UAE"==i)for(let r=0;r<this.headsofUAE.length;r++){let c=this.headsofUAE[r],d={message:"New Sales Brief has been created by "+this.userName.name,link:`${this.path.viewBrief+this.newBrief.id}`};this.notificationService.createNotification(c,d).subscribe(b=>{})}else if("KSA"==i||"Gaming"==i)for(let r=0;r<this.headsOfKSA.length;r++){let c=this.headsOfKSA[r],d={message:"New Sales Brief has been created by "+this.userName.name,link:`${this.path.viewBrief+this.newBrief.id}`};this.notificationService.createNotification(c,d).subscribe(()=>{})}}),this.toastrService.success("Brief submitted successfully!"),this.router.navigate([this.path.forms])}processFormGroups(i){let t={};return i instanceof n.cw&&Object.keys(i.controls)?.forEach(a=>{const r=i.get(a);if("InfluencerAgeRange"===a||"AudienceAgeRange"===a||"InfluencerNumberOfFollowers"===a)t[a]=this.processAgeRangeGroup(r);else if(r instanceof n.cw)t={...t,...this.processFormGroups(r)};else if(r instanceof n.NI)if(Array.isArray(r?.value)){const c=(r?.value).map(d=>d.toString()).join(", ");t[a]=c}else t[a]=r?.value}),t}processAgeRangeGroup(i){return Object.keys(i.controls).filter(a=>!0===i.get(a)?.value).join(", ")}transferedFiles(i){this.filesToUpload=i}uploadFiles(i){for(let t=0;t<this.filesToUpload.length;t++)this.fileService.uploadFile(this.filesToUpload[t],i,this.userId,V.yE.SALES).subscribe(a=>{this.toastrService.success(this.filesToUpload[t].name+" uploaded successfully!")},a=>{this.progress=0,this.toastrService.error("Could not upload the file:"+this.filesToUpload[t].name)})}}B.\u0275fac=function(i){return new(i||B)(e.Y36(n.qu),e.Y36(C.K),e.Y36(Y.g),e.Y36(Z.M),e.Y36(h.F0),e.Y36(R._W),e.Y36(E.I))},B.\u0275cmp=e.Xpm({type:B,selectors:[["app-new-sales-brief"]],decls:20,vars:2,consts:[[1,"form-container"],[2,"align-content","center","text-align","center","font-size","300%","margin-top","2%","margin-bottom","3%"],["autocomplete","off",3,"formGroup","ngSubmit"],["formGroupName","basicInfo",3,"clients"],["formGroupName","campaignOverview"],["formGroupName","influencerDetails"],["formGroupName","audienceDetails"],["formGroupName","departmentDetails"],[3,"filesUploaded"],["mat-raised-button","","color","primary","type","submit",2,"margin-bottom","2%","margin-top","2%","color","white",3,"disabled"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"New Sales Brief"),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return t.submitForm()}),e.TgZ(4,"app-basic-information",3),e.NdJ("clients",function(){return t.clients}),e.qZA(),e._UZ(5,"app-campaign-overview",4)(6,"hr")(7,"app-influencer-details",5)(8,"hr")(9,"app-audience-details",6)(10,"hr")(11,"app-department-details",7)(12,"hr"),e.TgZ(13,"mat-label")(14,"h2"),e._uU(15," Upload Files "),e.qZA()(),e.TgZ(16,"app-upload-files",8),e.NdJ("filesUploaded",function(r){return t.transferedFiles(r)}),e.qZA(),e._UZ(17,"hr"),e.TgZ(18,"button",9),e._uU(19,"Submit Brief Form"),e.qZA()()()),2&i&&(e.xp6(3),e.Q6J("formGroup",t.newForm),e.xp6(15),e.Q6J("disabled",!t.newForm.valid))},dependencies:[f.hX,v.lW,n._Y,n.JL,n.sg,n.x0,j.V,N,w,T,y,x],styles:["ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{color:#fff}mat-label[_ngcontent-%COMP%]{color:#fff;margin-right:2%}.progress-bar[_ngcontent-%COMP%]{padding:0}.progress[_ngcontent-%COMP%]{width:50px}#fileInput[_ngcontent-%COMP%]{position:absolute;cursor:pointer;z-index:10;opacity:0;height:100%;left:0;top:0}.mat-toolbar-single-row[_ngcontent-%COMP%]{height:auto!important;background:transparent;padding:0}.mat-toolbar-single-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.message[_ngcontent-%COMP%]{background-color:#ddd;padding:15px;color:#333;border:#aaa solid 1px;border-radius:4px;margin-bottom:10px}.container[_ngcontent-%COMP%]{width:100vw;margin:20px auto}"]});var Q=s(9347),X=s(6291);class q{constructor(i,t,a,r){this.campaignService=i,this.userService=t,this.source=a,this.dialog=r,this.brief=this.source.brief}ngOnInit(){}transferedFile(i){this.fileToUpload=i}transferedFiles(i){this.filesUploaded=i}initiateCampaign(){console.log(this.filesUploaded);const t=this.brief.AudienceLocation.split(",")[0],a={campaignName:this.brief.CampaignName,market:t,clientId:this.brief.client.id,brandId:this.brief.brand?.id||null,createdBy:this.userService.getID(),briefId:this.brief.id};this.campaignService.addCampaign(a).subscribe(r=>{for(let c=0;c<this.filesUploaded.length;c++)this.campaignService.uploadCampaignFile(this.filesUploaded[c],r.campaign.id,this.userService.getID()).subscribe(d=>{console.log(d)});this.dialog.closeAll()})}}q.\u0275fac=function(i){return new(i||q)(e.Y36(X.U),e.Y36(C.K),e.Y36(Q.WI),e.Y36(Q.uw))},q.\u0275cmp=e.Xpm({type:q,selectors:[["app-initiate-campaign"]],inputs:{brief:"brief"},decls:10,vars:1,consts:[[1,"upload"],[3,"fileUploaded","filesUploaded"],[1,"button-container"],["mat-raised-button","",1,"btn",3,"disabled","click"],[1,"btn-hover"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2," Please Attach the B.O to start the campaign process (you can upload multiple files if needed). "),e.qZA(),e.TgZ(3,"app-upload-files",1),e.NdJ("fileUploaded",function(r){return t.transferedFile(r)})("filesUploaded",function(r){return t.transferedFiles(r)}),e.qZA(),e.TgZ(4,"div",2)(5,"button",3),e.NdJ("click",function(){return t.initiateCampaign()}),e._uU(6," Upload BO and Initiate Campaign "),e.qZA(),e.TgZ(7,"div",4)(8,"p"),e._uU(9,"Please upload BO to enable button"),e.qZA()()()()),2&i&&(e.xp6(5),e.Q6J("disabled",!t.fileToUpload))},dependencies:[v.lW,j.V],styles:[".upload[_ngcontent-%COMP%]{margin-top:3%}.upload[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-left:2%}.upload[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:2%;background-color:#403d58;color:#fff}.upload[_ngcontent-%COMP%]   .btn-hover[_ngcontent-%COMP%]{display:none;margin-left:2%;margin-top:2%}.upload[_ngcontent-%COMP%]   .btn-hover[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ff0}.upload[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]:disabled + .btn-hover[_ngcontent-%COMP%]{display:block}.upload[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled + .btn-hover[_ngcontent-%COMP%]{display:none}"]});var H=s(1921),$=s(617),be=s(7630),_e=s(7257),Ce=s(6526);function Ze(o,i){if(1&o&&(e.TgZ(0,"h1"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" Round Number : ",t.task.History[t.task.History.length-1].round," ")}}function ve(o,i){if(1&o&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}class O{constructor(i,t,a,r,c){this.fb=i,this.taskService=t,this.toastrService=a,this.notificationService=r,this.salesService=c,this.path=_.m,this.feedbackOptions=["Accept","Request Changes"],this.feedbackForm=this.fb.group({feedback:["",n.kI.required],notes:["",n.kI.required]})}onSubmit(){if(this.feedbackForm.valid){let i=this.task.assignedUsers.map(t=>t.id);if(this.taskService.roundFeedback(this.task.id,{feedback:this.feedbackForm.value.feedback,notes:this.feedbackForm.value.notes}).subscribe(t=>{this.toastrService.success("Feedback submitted successfully")}),"Accept"===this.feedbackForm.value.feedback){let t={message:`Brief ${this.brief.data.CampaignName} has been approved`,link:`${this.path.viewBrief}${this.brief.data.id}`};this.taskService.updateProgress(this.task.id,{progress:"Submitted and Approved"}).subscribe(a=>{for(let r=0;r<i.length;r++)this.notificationService.createNotification(i[r],t).subscribe(c=>{});window.location.reload()})}else if("Request Changes"===this.feedbackForm.value.feedback){this.activateBrief();let t={message:`Brief ${this.brief.data.CampaignName} needs some changes`,link:`${this.path.viewBrief}${this.brief.data.id}`};this.taskService.updateProgress(this.task.id,{progress:"Submitted and Rejected"}).subscribe(a=>{for(let r=0;r<i.length;r++)this.notificationService.createNotification(i[r],t).subscribe(c=>{});window.location.reload()})}}}deactivateBrief(){this.salesService.changeStatus(this.brief.data.id,{status:"InActive"}).subscribe(i=>{this.taskService.deactivateTask(this.brief.data.id).subscribe(t=>{})})}activateBrief(){this.salesService.changeStatus(this.brief.data.id,{status:"Active"}).subscribe(i=>{this.toastrService.success("Brief Activated"),this.taskService.activateTask(this.brief.data.id).subscribe(t=>{this.toastrService.success("Task Activated"),window.location.reload()})})}}function Ae(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"mat-icon",10),e._uU(2,"feedback"),e.qZA(),e.TgZ(3,"h2"),e._uU(4," Press this button when the client signs the B.O to initiate the campaign process. B.O should be uploaded here. "),e.qZA(),e.TgZ(5,"button",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.initiateCampaign())}),e._uU(6," Initiate Campaign "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("disabled",t.brief.signedOffByClient)}}function Ie(o,i){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.budgetSheet.originalname)}}function Ne(o,i){1&o&&e._UZ(0,"td")}function we(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadFilexlsx(r.budgetSheet.id,r.budgetSheet.originalname))}),e._uU(2," Download "),e.qZA()()}}function Te(o,i){1&o&&e._UZ(0,"td")}function ye(o,i){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.presentation.originalname)}}function xe(o,i){1&o&&e._UZ(0,"td")}function Ue(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadFilePPTX(r.presentation.id,r.presentation.originalname))}),e._uU(2," Download "),e.qZA()()}}function Se(o,i){1&o&&e._UZ(0,"td")}function ke(o,i){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.pdf.originalname)}}function De(o,i){1&o&&e._UZ(0,"td")}function Be(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadFilePDF(r.pdf.id,r.pdf.originalname))}),e._uU(2," Download "),e.qZA()()}}function qe(o,i){1&o&&e._UZ(0,"td")}O.\u0275fac=function(i){return new(i||O)(e.Y36(n.qu),e.Y36(H.M),e.Y36(R._W),e.Y36(Y.g),e.Y36(Z.M))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-task-rounds"]],inputs:{task:"task",brief:"brief"},decls:17,vars:5,consts:[[1,"round-container"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","fill"],["formControlName","feedback"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",1,"full-width"],["matInput","","formControlName","notes","rows","4"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[2,"margin-top","2%"],[3,"task"],[3,"value"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.YNc(1,Ze,2,1,"h1",1),e.TgZ(2,"form",2),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Feedback Type"),e.qZA(),e.TgZ(6,"mat-select",4),e.YNc(7,ve,2,2,"mat-option",5),e.qZA()(),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Comments"),e.qZA(),e._UZ(11,"textarea",7),e.qZA(),e.TgZ(12,"button",8),e._uU(13," Submit Feedback "),e.qZA()(),e.TgZ(14,"h1",9),e._uU(15,"Round History"),e.qZA(),e._UZ(16,"app-round-history",10),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",t.task),e.xp6(1),e.Q6J("formGroup",t.feedbackForm),e.xp6(5),e.Q6J("ngForOf",t.feedbackOptions),e.xp6(5),e.Q6J("disabled",!t.feedbackForm.valid),e.xp6(4),e.Q6J("task",t.task))},dependencies:[u.sg,u.O5,D.Nt,f.KE,f.hX,v.lW,A.gD,I.ey,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,Ce.F],styles:[".round-container[_ngcontent-%COMP%]{margin-left:1%;color:#fff}.full-width[_ngcontent-%COMP%]{width:100%}"]});class F{constructor(i,t,a,r,c,d,b,l,K){this.activatedRoute=i,this.fileService=t,this.salesService=a,this.userService=r,this.taskService=c,this.toastr=d,this.notificationService=b,this.campaignService=l,this.dialog=K,this.acceptedBrief=!1,this.assignedUser=[]}ngOnInit(){this.loadFiles()}loadFiles(){this.activatedRoute.params.subscribe(i=>{this.brief_id=i.id,this.salesService.getSalesBrief(this.brief_id).subscribe(t=>{this.brief=t.data,console.log(this.brief),this.budgetSheetId=this.brief.BudgetSheetId,this.getBudgetSheet(this.budgetSheetId),this.presentationId=this.brief.PresentationId,this.getPresentation(this.presentationId),this.pdfId=this.brief.PdfId,this.getPDF(this.pdfId)}),this.salesService.getSalesBriefWithFiles(this.brief_id).subscribe(t=>{this.getSalesPerson(t.data.CreatedbyID),this.getAssignedUser(t.data.id)})})}initiateCampaign(){this.dialog.open(q,{width:"80%",height:"70%",exitAnimationDuration:"1000ms",enterAnimationDuration:"1000ms",data:{brief:this.brief}})}signedOffByClient(){this.salesService.signedOffByClient(this.brief_id).subscribe(i=>{this.loadFiles(),this.toastr.success(i.message,"Success")})}getSalesPerson(i){this.userService.getUserNameById(i).subscribe(t=>{this.salesperson=t.name})}getAssignedUser(i){this.taskService.getTaskByBriefId(i).subscribe(t=>{"Accept"===t.data.History[t.data.History.length-1].feedback&&(this.acceptedBrief=!0),this.task=t.data;for(let a=0;a<this.task?.assignedUsers?.length;a++){let r=this.task.assignedUsers[a].name;this.assignedUser.includes(r)||this.assignedUser.push(r)}})}getBudgetSheet(i){this.fileService.getFile(i).subscribe(t=>{this.budgetSheet=t.data})}getPresentation(i){this.fileService.getFile(i).subscribe(t=>{this.presentation=t.data})}getPDF(i){this.fileService.getFile(i).subscribe(t=>{this.pdf=t.data})}downloadFilePPTX(i,t){this.fileService.downloadFile(i,t).subscribe(a=>{const r=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}),c=window.URL.createObjectURL(r);window.open(c)})}downloadFilexlsx(i,t){this.fileService.downloadFile(i,t).subscribe(a=>{const r=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=window.URL.createObjectURL(r);window.open(c)})}downloadFilePDF(i,t){this.fileService.downloadFile(i,t).subscribe(a=>{const r=new Blob([a],{type:"application/pdf"}),c=window.URL.createObjectURL(r);window.open(c)})}}F.\u0275fac=function(i){return new(i||F)(e.Y36(h.gz),e.Y36(E.I),e.Y36(Z.M),e.Y36(C.K),e.Y36(H.M),e.Y36(R._W),e.Y36(Y.g),e.Y36(X.U),e.Y36(Q.uw))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-ready-briefs-id"]],decls:37,vars:18,consts:[[1,"top-row"],[1,"status",3,"assignedUser","salesperson"],["class","card",4,"ngIf"],[1,"row"],[1,"my-table"],[1,"centered"],[4,"ngIf"],[3,"task","brief"],[3,"brief"],[1,"card"],[2,"color","#FFF"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div")(1,"div",0),e._UZ(2,"app-person-info",1),e.YNc(3,Ae,7,1,"div",2),e.qZA(),e.TgZ(4,"div",3)(5,"table",4)(6,"tr")(7,"th",5),e._uU(8,"File Type"),e.qZA(),e.TgZ(9,"th",5),e._uU(10,"File Name"),e.qZA(),e.TgZ(11,"th",5),e._uU(12,"Download"),e.qZA()(),e.TgZ(13,"tr")(14,"td"),e._uU(15,"Excel Sheet"),e.qZA(),e.YNc(16,Ie,2,1,"td",6),e.YNc(17,Ne,1,0,"td",6),e.YNc(18,we,3,0,"td",6),e.YNc(19,Te,1,0,"td",6),e.qZA(),e.TgZ(20,"tr")(21,"td"),e._uU(22,"Presentation"),e.qZA(),e.YNc(23,ye,2,1,"td",6),e.YNc(24,xe,1,0,"td",6),e.YNc(25,Ue,3,0,"td",6),e.YNc(26,Se,1,0,"td",6),e.qZA(),e.TgZ(27,"tr")(28,"td"),e._uU(29,"PDF File"),e.qZA(),e.YNc(30,ke,2,1,"td",6),e.YNc(31,De,1,0,"td",6),e.YNc(32,Be,3,0,"td",6),e.YNc(33,qe,1,0,"td",6),e.qZA()()(),e._UZ(34,"hr")(35,"app-task-rounds",7)(36,"app-all-info",8),e.qZA()),2&i&&(e.xp6(2),e.Q6J("assignedUser",t.assignedUser)("salesperson",t.salesperson),e.xp6(1),e.Q6J("ngIf",t.acceptedBrief&&t.brief),e.xp6(13),e.Q6J("ngIf",t.budgetSheet),e.xp6(1),e.Q6J("ngIf",!t.budgetSheet),e.xp6(1),e.Q6J("ngIf",t.budgetSheet),e.xp6(1),e.Q6J("ngIf",!t.budgetSheet),e.xp6(4),e.Q6J("ngIf",t.presentation),e.xp6(1),e.Q6J("ngIf",!t.presentation),e.xp6(1),e.Q6J("ngIf",t.presentation),e.xp6(1),e.Q6J("ngIf",!t.presentation),e.xp6(4),e.Q6J("ngIf",t.pdf),e.xp6(1),e.Q6J("ngIf",!t.pdf),e.xp6(1),e.Q6J("ngIf",t.pdf),e.xp6(1),e.Q6J("ngIf",!t.pdf),e.xp6(2),e.Q6J("task",t.task)("brief",t.brief),e.xp6(1),e.Q6J("brief",t.brief))},dependencies:[u.O5,v.lW,$.Hw,be.L,_e.A,O],styles:[".my-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px;overflow:hidden;max-width:100%}.my-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;max-width:100%;text-align:center;color:#fff}.my-table[_ngcontent-%COMP%]   th.centered[_ngcontent-%COMP%]{background-color:#1f3371;max-width:100%;color:#fff;font-weight:700;padding:10px;text-align:left;border:1px solid #ddd;text-align:center}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:1%;padding-left:1%;overflow-x:hidden;max-width:100%}.top-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:stretch;padding:1%;max-width:100%}.top-row[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%], .top-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:space-between;padding:10px;background-color:transparent;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin:0 1%}.top-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{flex:1}.top-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:17em;background-color:#403d58;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.top-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#3f3d58}"]});var U=s(1476),p=s(3566),m=s(5313);function Oe(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Campaign Name"),e.qZA())}function Fe(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Oqu(t.CampaignName)}}function Pe(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Agency"),e.qZA())}function Ge(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Oqu(t.Agency)}}function Me(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Client"),e.qZA())}function Ye(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Oqu(t.Client)}}function Re(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Created At"),e.qZA())}function Je(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.createdAt)," ")}}function Qe(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1,"Updated At"),e.qZA())}function Ee(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.updatedAt)," ")}}function je(o,i){1&o&&(e.TgZ(0,"th",17),e._uU(1,"Action"),e.qZA())}function Le(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",16)(1,"button",18),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.viewFiles(c.id))}),e._uU(2," View "),e.qZA()()}}function He(o,i){1&o&&e._UZ(0,"tr",19)}function $e(o,i){1&o&&e._UZ(0,"tr",20)}const Ke=function(){return[3,5,10,25,100]};class P{constructor(i,t,a){this.salesService=i,this.router=t,this.userService=a,this.path=_.m,this.user_id=this.userService.getID(),this.displayedColumns=["CampaignName","Agency","Client","CreatedAt","UpdatedAt","Action"]}ngOnInit(){this.getReadyBriefs()}getReadyBriefs(){this.salesService.getBriefByCreatedbyId(this.user_id).subscribe(i=>{this.briefs=i,this.dataSource=new m.by(this.briefs.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}viewFiles(i){this.salesService.viewBriefBySales(i).subscribe(t=>{}),this.router.navigate([`${this.path.readyBriefs+i}`])}}function ze(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1," Campaign Name "),e.qZA())}function Ve(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.CampaignName," ")}}function Xe(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1," Agency "),e.qZA())}function We(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.Agency," ")}}function et(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1," Client "),e.qZA())}function tt(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.Client," ")}}function it(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1," Created At "),e.qZA())}function ot(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.createdAt)," ")}}function nt(o,i){1&o&&(e.TgZ(0,"th",15),e._uU(1," Last Edited "),e.qZA())}function at(o,i){if(1&o&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.updatedAt)," ")}}function rt(o,i){1&o&&(e.TgZ(0,"th",17),e._uU(1," Action "),e.qZA())}function st(o,i){if(1&o&&(e.TgZ(0,"td",16)(1,"button",18)(2,"mat-icon"),e._uU(3,"remove_red_eye"),e.qZA()()()),2&o){const t=i.$implicit,a=e.oxw();e.xp6(1),e.s9C("routerLink",a.path.sentBriefs+t.id)}}function ct(o,i){1&o&&e._UZ(0,"tr",19)}function lt(o,i){1&o&&e._UZ(0,"tr",20)}P.\u0275fac=function(i){return new(i||P)(e.Y36(Z.M),e.Y36(h.F0),e.Y36(C.K))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-ready-briefs"]],viewQuery:function(i,t){if(1&i&&(e.Gf(U.NW,5),e.Gf(p.YE,5)),2&i){let a;e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first)}},decls:24,vars:8,consts:[[2,"position","relative"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","CampaignName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Agency"],["matColumnDef","Client"],["matColumnDef","CreatedAt"],["matColumnDef","UpdatedAt"],["matColumnDef","Action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-raised-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e.ynx(3,3),e.YNc(4,Oe,2,0,"th",4),e.YNc(5,Fe,2,1,"td",5),e.BQk(),e.ynx(6,6),e.YNc(7,Pe,2,0,"th",4),e.YNc(8,Ge,2,1,"td",5),e.BQk(),e.ynx(9,7),e.YNc(10,Me,2,0,"th",4),e.YNc(11,Ye,2,1,"td",5),e.BQk(),e.ynx(12,8),e.YNc(13,Re,2,0,"th",4),e.YNc(14,Je,3,3,"td",5),e.BQk(),e.ynx(15,9),e.YNc(16,Qe,2,0,"th",4),e.YNc(17,Ee,3,3,"td",5),e.BQk(),e.ynx(18,10),e.YNc(19,je,2,0,"th",11),e.YNc(20,Le,3,0,"td",5),e.BQk(),e.YNc(21,He,1,0,"tr",12),e.YNc(22,$e,1,0,"tr",13),e.qZA(),e._UZ(23,"mat-paginator",14),e.qZA()()),2&i&&(e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",100)("pageSize",5)("pageSizeOptions",e.DdM(7,Ke)))},dependencies:[v.lW,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,U.NW,p.YE,p.nU,u.uU],styles:[".search-container[_ngcontent-%COMP%]{padding-top:2%;padding-bottom:2%;padding-left:1%;position:absolute;top:5;left:0;right:0;z-index:1}.table-container[_ngcontent-%COMP%]{padding-top:1%;overflow-y:scroll;max-height:auto;padding-left:2%}table[_ngcontent-%COMP%]{width:100%}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#888;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#555}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}"]});const mt=function(){return[3,5,10,25,100]};class G{constructor(i,t){this.userService=i,this.salesService=t,this.path=_.m,this.user_id=this.userService.getID(),this.displayedColumns=["CampaignName","Agency","Client","CreatedAt","UpdatedAt","Action"]}ngOnInit(){this.getSentBriefs()}getSentBriefs(){this.salesService.viewMyBriefs(this.user_id).subscribe(i=>{this.dataSource=new m.by(i.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}}G.\u0275fac=function(i){return new(i||G)(e.Y36(C.K),e.Y36(Z.M))},G.\u0275cmp=e.Xpm({type:G,selectors:[["app-sent-briefs"]],viewQuery:function(i,t){if(1&i&&(e.Gf(U.NW,5),e.Gf(p.YE,5)),2&i){let a;e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first)}},decls:24,vars:8,consts:[[2,"position","relative"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","CampaignName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Agency"],["matColumnDef","Client"],["matColumnDef","CreatedAt"],["matColumnDef","UpdatedAt"],["matColumnDef","Action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"icon-btn",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e.ynx(3,3),e.YNc(4,ze,2,0,"th",4),e.YNc(5,Ve,2,1,"td",5),e.BQk(),e.ynx(6,6),e.YNc(7,Xe,2,0,"th",4),e.YNc(8,We,2,1,"td",5),e.BQk(),e.ynx(9,7),e.YNc(10,et,2,0,"th",4),e.YNc(11,tt,2,1,"td",5),e.BQk(),e.ynx(12,8),e.YNc(13,it,2,0,"th",4),e.YNc(14,ot,3,3,"td",5),e.BQk(),e.ynx(15,9),e.YNc(16,nt,2,0,"th",4),e.YNc(17,at,3,3,"td",5),e.BQk(),e.ynx(18,10),e.YNc(19,rt,2,0,"th",11),e.YNc(20,st,4,1,"td",5),e.BQk(),e.YNc(21,ct,1,0,"tr",12),e.YNc(22,lt,1,0,"tr",13),e.qZA(),e._UZ(23,"mat-paginator",14),e.qZA()()),2&i&&(e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",100)("pageSize",10)("pageSizeOptions",e.DdM(7,mt)))},dependencies:[h.rH,$.Hw,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,U.NW,p.YE,p.nU,u.uU],styles:[".table-container[_ngcontent-%COMP%]{padding-top:1%;overflow-y:scroll;max-height:auto;padding-left:2%}"]});var dt=s(3762);function ft(o,i){1&o&&(e.TgZ(0,"th",21),e._uU(1,"ID"),e.qZA())}function ut(o,i){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Oqu(t.id)}}function pt(o,i){1&o&&(e.TgZ(0,"th",21),e._uU(1,"File Name"),e.qZA())}function ht(o,i){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Oqu(t.originalname)}}function gt(o,i){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Type "),e.qZA())}function bt(o,i){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Oqu(t.fileType)}}function _t(o,i){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Download"),e.qZA())}function Ct(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",22)(1,"mat-icon",23),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.deleteFile(c.id))}),e._uU(2," delete "),e.qZA()()}}function Zt(o,i){1&o&&e._UZ(0,"tr",24)}function vt(o,i){1&o&&e._UZ(0,"tr",25)}const At=function(){return[3,5,10,25,100]};class M{constructor(i,t,a,r,c,d,b,l,K,xt){this.formBuilder=i,this.userService=t,this.notificationService=a,this.salesService=r,this.activatedRoute=c,this.taskService=d,this.router=b,this.toastrService=l,this.fileService=K,this.dialogService=xt,this.path=_.m,this.userId=this.userService.getID(),this.filesToUpload=[],this.displayedColumns=["id","originalname","fileType","action"],this.userService.getUserNameById(this.userId).subscribe(Ut=>{this.userName=Ut}),this.loadSalesBriefData(),this.initializeElements(),this.getSalesFiles()}initializeElements(){this.editForm=this.formBuilder.group({basicInfo:this.formBuilder.group({Agency:["",[n.kI.required]],clientId:["",[n.kI.required]],brandId:[""],CampaignName:["",[n.kI.required]],CampaignOverview:[""],CampaignObjective:[""],CampaignObjectiveDetails:[""],NumberofRecommendations:["",[n.kI.required]],Currency:[""],Budget:["",[n.kI.required]]}),campaignOverview:this.formBuilder.group({CampaignStartDate:["",[n.kI.required]],CampaignEndDate:["",[n.kI.required]],CampaignMessagePhaseOne:[""],CampaignMessagePhaseTwo:[""],CampaignMessagePhaseThree:[""],ContentDeliverables:[""],BrandExclusivityDurationinDays:["",[n.kI.required]],VideoProduction:new n.NI(!1),VideoEditing:new n.NI(!1)}),influencerDetails:this.formBuilder.group({InfluencerAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),InfluencerLocation:[""],InfluencerCity:[""],InfluencerNationality:[""],InfluencerGender:[""],InfluencerNotes:[""],SimilarProfileLink:[""],InfluencerInterest:[""],InfluencerNumberOfFollowers:new n.cw({Nano:new n.NI(!1),Micro:new n.NI(!1),Macro:new n.NI(!1),Mega:new n.NI(!1),Celebrity:new n.NI(!1)}),NoteForNumberOfFollowers:[""]}),audienceDetails:this.formBuilder.group({AudienceAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),AudienceLocation:[""],AudienceNationality:[""],AudienceGender:[""],PrimaryAudienceInterest:[""],SecondaryAudienceInterest:[""]}),departmentDetails:this.formBuilder.group({ConfirmedInfluencerHandles:[""],PreviousBrandAmbassadorsName:[""],Performance:new n.NI(!1),Event:new n.NI(!1),Concept:new n.NI(!1),Strategy:new n.NI(!1),ItpDepartment:["",[n.kI.required]],KPIs:[""]})})}loadSalesBriefData(){this.activatedRoute.params.subscribe(i=>{this.briefId=i.id}),this.salesService.getSalesBrief(this.briefId).subscribe(i=>{this.briefData=i,this.briefData.data.assigned&&this.taskService.getTaskByBriefId(this.briefId).subscribe(l=>{this.taskData=l});const t=this.briefData.data.InfluencerAgeRange?.split(",").map(l=>l.trim()),a=this.editForm.get("influencerDetails.InfluencerAgeRange");t?.forEach(l=>{a.get(l)?.setValue(!0)});const r=this.briefData.data.AudienceAgeRange?.split(",").map(l=>l.trim()),c=this.editForm.get("audienceDetails.AudienceAgeRange");r?.forEach(l=>{c.get(l)?.setValue(!0)});const d=this.briefData.data.InfluencerNumberOfFollowers?.split(",").map(l=>l.trim()),b=this.editForm.get("influencerDetails.InfluencerNumberOfFollowers");d?.forEach(l=>{b.get(l)?.setValue(!0)}),null!=this.briefData.data&&(this.brand=this.briefData.data.brand,this.editForm.patchValue({basicInfo:{Agency:this.briefData.data.Agency,clientId:this.briefData.data.clientId,brandId:this.briefData.data.brandId,CampaignName:this.briefData.data.CampaignName,CampaignOverview:this.briefData.data.CampaignOverview,CampaignObjective:this.briefData.data.CampaignObjective,CampaignObjectiveDetails:this.briefData.data.CampaignObjectiveDetails,NumberofRecommendations:this.briefData.data.NumberofRecommendations,Currency:this.briefData.data.Currency,Budget:this.briefData.data.Budget},campaignOverview:{CampaignStartDate:this.briefData.data.CampaignStartDate,CampaignEndDate:this.briefData.data.CampaignEndDate,CampaignMessagePhaseOne:this.briefData.data.CampaignMessagePhaseOne,CampaignMessagePhaseTwo:this.briefData.data.CampaignMessagePhaseTwo,CampaignMessagePhaseThree:this.briefData.data.CampaignMessagePhaseThree,ContentDeliverables:this.briefData.data.ContentDeliverables?.split(",").map(l=>l.trim()),BrandExclusivityDurationinDays:this.briefData.data.BrandExclusivityDurationinDays,VideoProduction:this.briefData.data.VideoProduction,VideoEditing:this.briefData.data.VideoEditing},influencerDetails:{InfluencerAgeRange:this.briefData.data.InfluencerAgeRange,InfluencerLocation:this.briefData.data.InfluencerLocation?.split(",").map(l=>l.trim()),InfluencerCity:this.briefData.data.InfluencerCity,InfluencerNationality:this.briefData.data.InfluencerNationality?.split(",").map(l=>l.trim()),InfluencerGender:this.briefData.data.InfluencerGender,InfluencerNotes:this.briefData.data.InfluencerNotes,SimilarProfileLink:this.briefData.data.SimilarProfileLink,InfluencerInterest:this.briefData.data.InfluencerInterest?.split(",").map(l=>l.trim()),InfluencerNumberOfFollowers:this.briefData.data.InfluencerNumberOfFollowers,NoteForNumberOfFollowers:this.briefData.data.NoteForNumberOfFollowers},audienceDetails:{AudienceAgeRange:this.briefData.data.AudienceAgeRange,AudienceLocation:this.briefData.data.AudienceLocation?.split(",").map(l=>l.trim()),AudienceNationality:this.briefData.data.AudienceNationality?.split(",").map(l=>l.trim()),AudienceGender:this.briefData.data.AudienceGender,PrimaryAudienceInterest:this.briefData.data.PrimaryAudienceInterest?.split(",").map(l=>l.trim()),SecondaryAudienceInterest:this.briefData.data.SecondaryAudienceInterest?.split(",").map(l=>l.trim())},departmentDetails:{ConfirmedInfluencerHandles:this.briefData.data.ConfirmedInfluencerHandles,PreviousBrandAmbassadorsName:this.briefData.data.PreviousBrandAmbassadorsName,Performance:this.briefData.data.Performance,Event:this.briefData.data.Event,Concept:this.briefData.data.Concept,Strategy:this.briefData.data.Strategy,ItpDepartment:this.briefData.data.ItpDepartment,KPIs:this.briefData.data.KPIs}}))})}submitForm(){const i=this.editForm.value.departmentDetails.ItpDepartment,t=this.processFormGroups(this.editForm);t.CreatedbyID=this.userService.getID(),t.Ready=!1,t.ResultsViewed=!1,this.salesService.updateBrief(this.briefId,t).subscribe(a=>{if(this.uploadFiles(this.briefId),"Originals"==i||"UAE"==i){let r=23,c={message:"Sales Brief "+t.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};if(this.notificationService.createNotification(r,c).subscribe(()=>{}),null!=this.assignedUser){let d={message:"Sales Brief "+t.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};this.notificationService.createNotification(this.assignedUser.id,d).subscribe(()=>{})}}else if("KSA"==i||"Gaming"==i){let r=15,c={message:"Sales Brief "+t.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};if(this.notificationService.createNotification(r,c).subscribe(()=>{}),null!=this.assignedUser){let d={message:"Sales Brief "+t.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};this.notificationService.createNotification(this.assignedUser.id,d).subscribe(()=>{})}}this.toastrService.success("Sales brief edited successfully"),this.router.navigate([this.path.forms])},a=>{this.toastrService.error("An error occurred while creating the sales brief")})}processFormGroups(i){let t={};return i instanceof n.cw&&Object.keys(i.controls)?.forEach(a=>{const r=i.get(a);if("InfluencerAgeRange"===a||"AudienceAgeRange"===a||"InfluencerNumberOfFollowers"===a)t[a]=this.processAgeRangeGroup(r);else if(r instanceof n.cw)t={...t,...this.processFormGroups(r)};else if(r instanceof n.NI)if(Array.isArray(r?.value)){const c=(r?.value).map(d=>d.toString()).join(", ");t[a]=c}else t[a]=r?.value}),t}processAgeRangeGroup(i){return Object.keys(i.controls).filter(a=>!0===i.get(a)?.value).join(", ")}getSalesFiles(){this.fileService.getSalesBriefFiles(this.briefId).subscribe(i=>{this.dataSource=new m.by(i.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}deleteFile(i){this.dialogService.openConfirmationDialog("Confirm!","Are you sure you want to delete?").subscribe(t=>{!0===t&&this.fileService.deleteFile(i).subscribe(()=>{this.toastrService.success("File deleted successfully!"),this.getSalesFiles()})})}transferedFiles(i){this.filesToUpload=i}uploadFiles(i){for(let t=0;t<this.filesToUpload.length;t++)this.fileService.uploadFile(this.filesToUpload[t],i,this.userId,V.yE.SALES).subscribe(a=>{console.log(a),this.toastrService.success(this.filesToUpload[t].name+" uploaded successfully!")},a=>{console.log(a),this.toastrService.error("Could not upload the file:"+this.filesToUpload[t].name)})}}M.\u0275fac=function(i){return new(i||M)(e.Y36(n.qu),e.Y36(C.K),e.Y36(Y.g),e.Y36(Z.M),e.Y36(h.gz),e.Y36(H.M),e.Y36(h.F0),e.Y36(R._W),e.Y36(E.I),e.Y36(dt.O))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-sent-briefs-id"]],viewQuery:function(i,t){if(1&i&&(e.Gf(U.NW,5),e.Gf(p.YE,5)),2&i){let a;e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first)}},decls:40,vars:9,consts:[[1,"form-container"],["autocomplete","off",3,"formGroup","ngSubmit"],["formGroupName","basicInfo"],["formGroupName","campaignOverview"],["formGroupName","influencerDetails"],["formGroupName","audienceDetails"],["formGroupName","departmentDetails"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","originalname"],["matColumnDef","fileType"],["matColumnDef","action"],["mat-header-row","","sticky","",4,"matHeaderRowDef"],["mat-row","","sticky","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],[3,"filesUploaded"],["mat-raised-button","","type","submit",2,"margin-bottom","2%","margin-top","2%",3,"disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["color","warn",3,"click"],["mat-header-row","","sticky",""],["mat-row","","sticky",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Edit Sales Brief"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return t.submitForm()}),e._UZ(4,"app-basic-information",2)(5,"app-campaign-overview",3)(6,"hr")(7,"app-influencer-details",4)(8,"hr")(9,"app-audience-details",5)(10,"hr")(11,"app-department-details",6)(12,"hr"),e.TgZ(13,"h2"),e._uU(14," Uploaded Files "),e.qZA(),e.TgZ(15,"div",7)(16,"table",8,9),e.ynx(18,10),e.YNc(19,ft,2,0,"th",11),e.YNc(20,ut,2,1,"td",12),e.BQk(),e.ynx(21,13),e.YNc(22,pt,2,0,"th",11),e.YNc(23,ht,2,1,"td",12),e.BQk(),e.ynx(24,14),e.YNc(25,gt,2,0,"th",11),e.YNc(26,bt,2,1,"td",12),e.BQk(),e.ynx(27,15),e.YNc(28,_t,2,0,"th",11),e.YNc(29,Ct,3,0,"td",12),e.BQk(),e.YNc(30,Zt,1,0,"tr",16),e.YNc(31,vt,1,0,"tr",17),e.qZA(),e._UZ(32,"mat-paginator",18),e.qZA(),e._UZ(33,"hr"),e.TgZ(34,"h2"),e._uU(35," Upload Files "),e.qZA(),e.TgZ(36,"app-upload-files",19),e.NdJ("filesUploaded",function(r){return t.transferedFiles(r)}),e.qZA(),e._UZ(37,"hr"),e.TgZ(38,"button",20),e._uU(39,"Edit Brief Form"),e.qZA()()()),2&i&&(e.xp6(3),e.Q6J("formGroup",t.editForm),e.xp6(13),e.Q6J("dataSource",t.dataSource),e.xp6(14),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",null==t.dataSource?null:t.dataSource.data.length)("pageSize",15)("pageSizeOptions",e.DdM(8,At)),e.xp6(6),e.Q6J("disabled",!t.editForm.valid))},dependencies:[v.lW,$.Hw,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,U.NW,p.YE,p.nU,n._Y,n.JL,n.sg,n.x0,j.V,N,w,T,y,x],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-size:300%;margin-top:2%;margin-bottom:3%;color:#fff}.warn[_ngcontent-%COMP%]{background-color:red;color:#fff}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}"]});let It=_.m;const Nt=[{path:"newBrief",component:B},{path:"readyBriefs",component:P},{path:"readyBriefs/:id",component:F},{path:"sentBriefs",component:G},{path:"sentBriefs/:id",component:M},{path:"",redirectTo:`${It.forms}`,pathMatch:"full"},{path:"**",redirectTo:"/site/notFound"}];class S{}S.\u0275fac=function(i){return new(i||S)},S.\u0275mod=e.oAB({type:S}),S.\u0275inj=e.cJS({imports:[h.Bz.forChild(Nt),h.Bz]});var wt=s(609),Tt=s(3435),yt=s(4062);class k{}k.\u0275fac=function(i){return new(i||k)},k.\u0275mod=e.oAB({type:k}),k.\u0275inj=e.cJS({imports:[u.ez,S,wt.q,n.UX,n.u5,Q.Is,Tt.ViewBriefModule,yt.SharingModule]})}}]);