"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[127],{6127:(yt,L,s)=>{s.r(L),s.d(L,{SalesModule:()=>S});var u=s(6814),g=s(1896),n=s(6223),_=s(5753),H=s(1213),e=s(5879),U=s(3934),Y=s(5869),Z=s(9554),M=s(9229),J=s(4960),z=s(6291),f=s(4170),k=s(2296),$=s(2286),b=s(1218),V=s(9061),D=s(2032),A=s(8525),C=s(3680);function X(i,o){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function W(i,o){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ee(i,o){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}class v{constructor(o,t){this.rootFormGroup=o,this.clientService=t,this.clientIndustries=b.r5,this.campaignobjectives=b.Tj,this.currencies=b.QT,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName),this.getClients()}getClients(){this.clientService.getClients().subscribe(o=>{this.clients=o,this.clients.sort((t,a)=>t.name.localeCompare(a.name))})}}v.\u0275fac=function(o){return new(o||v)(e.Y36(n.sg),e.Y36(V.y))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-basic-information"]],inputs:{formGroupName:"formGroupName"},decls:44,vars:4,consts:[[3,"formGroup"],[1,"row"],["matInput","","type","text","formControlName","Agency","autocomplete","off"],["formControlName","clientId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","CampaignName","autocomplete","off"],["matInput","","formControlName","CampaignOverview","rows","1","autocomplete","off"],["formControlName","CampaignObjective"],["matInput","","formControlName","CampaignObjectiveDetails","rows","1","autocomplete","off"],["matInput","","type","number","formControlName","NumberofRecommendations","autocomplete","off"],["formControlName","Currency"],["matInput","","type","number","formControlName","Budget","autocomplete","off"],[3,"value"]],template:function(o,t){1&o&&(e.ynx(0,0),e.TgZ(1,"div",1)(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Agency"),e.qZA(),e._UZ(5,"input",2),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Client"),e.qZA(),e.TgZ(9,"mat-select",3),e.YNc(10,X,2,2,"mat-option",4),e.qZA()()(),e.TgZ(11,"div",1)(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Campaign Name"),e.qZA(),e._UZ(15,"input",5),e.qZA(),e.TgZ(16,"mat-form-field")(17,"mat-label"),e._uU(18,"Campaign Overview"),e.qZA(),e._UZ(19,"textarea",6),e.qZA()(),e.TgZ(20,"div",1)(21,"mat-form-field")(22,"mat-label"),e._uU(23,"Campaign Objective"),e.qZA(),e.TgZ(24,"mat-select",7),e.YNc(25,W,2,2,"mat-option",4),e.qZA()(),e.TgZ(26,"mat-form-field")(27,"mat-label"),e._uU(28,"Campaign Objective Details"),e.qZA(),e._UZ(29,"textarea",8),e.qZA()(),e.TgZ(30,"div",1)(31,"mat-form-field")(32,"mat-label"),e._uU(33,"Number of recommendations"),e.qZA(),e._UZ(34,"input",9),e.qZA(),e.TgZ(35,"mat-form-field")(36,"mat-label"),e._uU(37,"Currency"),e.qZA(),e.TgZ(38,"mat-select",10),e.YNc(39,ee,2,2,"mat-option",4),e.qZA()(),e.TgZ(40,"mat-form-field")(41,"mat-label"),e._uU(42,"Approximate Budget"),e.qZA(),e._UZ(43,"input",11),e.qZA()(),e.BQk()),2&o&&(e.Q6J("formGroup",t.form),e.xp6(10),e.Q6J("ngForOf",t.clients),e.xp6(15),e.Q6J("ngForOf",t.campaignobjectives.sort()),e.xp6(14),e.Q6J("ngForOf",t.currencies))},dependencies:[u.sg,D.Nt,f.KE,f.hX,A.gD,C.ey,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u]});var R=s(5986),Q=s(8034);function te(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}class I{constructor(o){this.rootFormGroup=o,this.briefPlatforms=b.l$,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}function oe(i,o){if(1&i&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ie(i,o){if(1&i&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ne(i,o){if(1&i&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ae(i,o){1&i&&(e.TgZ(0,"div",31),e._uU(1," Less than 10,000 followers "),e.qZA())}function re(i,o){1&i&&(e.TgZ(0,"div",31),e._uU(1," Between 10,000 and 100,000 followers "),e.qZA())}function se(i,o){1&i&&(e.TgZ(0,"div",31),e._uU(1," Between 100,000 and 1,000,000 followers "),e.qZA())}function ce(i,o){1&i&&(e.TgZ(0,"div",31),e._uU(1," More than 1,000,000 followers "),e.qZA())}I.\u0275fac=function(o){return new(o||I)(e.Y36(n.sg))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-campaign-overview"]],inputs:{formGroupName:"formGroupName"},decls:49,vars:6,consts:[[3,"formGroup"],[1,"row"],["matInput","","formControlName","CampaignStartDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","CampaignEndDate",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","CampaignMessagePhaseOne","rows","1","autocomplete","off"],["matInput","","formControlName","CampaignMessagePhaseTwo","rows","1","autocomplete","off"],["matInput","","formControlName","CampaignMessagePhaseThree","rows","1","autocomplete","off"],["formControlName","ContentDeliverables","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","BrandExclusivityDurationinDays","autocomplete","off","min","0"],[1,"checkbox-container"],["color","primary","formControlName","VideoProduction"],["color","primary","formControlName","VideoEditing"],[3,"value"]],template:function(o,t){if(1&o&&(e.TgZ(0,"form",0)(1,"div",1)(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Campaign Launch Date"),e.qZA(),e._UZ(5,"input",2)(6,"mat-datepicker-toggle",3)(7,"mat-datepicker",null,4),e.qZA(),e.TgZ(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Campaign End Date"),e.qZA(),e._UZ(12,"input",5)(13,"mat-datepicker-toggle",3)(14,"mat-datepicker",null,6),e.qZA()(),e.TgZ(16,"div",1)(17,"mat-form-field")(18,"mat-label"),e._uU(19,"Campaign Message Phase 1"),e.qZA(),e._UZ(20,"textarea",7),e.qZA(),e.TgZ(21,"mat-form-field")(22,"mat-label"),e._uU(23,"Campaign Message Phase 2"),e.qZA(),e._UZ(24,"textarea",8),e.qZA(),e.TgZ(25,"mat-form-field")(26,"mat-label"),e._uU(27,"Campaign Message Phase 3"),e.qZA(),e._UZ(28,"textarea",9),e.qZA()(),e.TgZ(29,"div",1)(30,"h2"),e._uU(31,"Content Deliverables"),e.qZA(),e.TgZ(32,"mat-form-field")(33,"mat-label"),e._uU(34," Platforms "),e.qZA(),e.TgZ(35,"mat-select",10),e.YNc(36,te,2,2,"mat-option",11),e.qZA()(),e.TgZ(37,"mat-form-field")(38,"mat-label"),e._uU(39,"Brand Exclusivity Duration in Days"),e.qZA(),e._UZ(40,"input",12),e.qZA()(),e.TgZ(41,"div")(42,"h2"),e._uU(43,"Video"),e.qZA(),e.TgZ(44,"div",13)(45,"mat-checkbox",14),e._uU(46,"Production"),e.qZA(),e.TgZ(47,"mat-checkbox",15),e._uU(48,"Editing"),e.qZA()()()()),2&o){const a=e.MAs(8),r=e.MAs(15);e.Q6J("formGroup",t.form),e.xp6(5),e.Q6J("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(23),e.Q6J("ngForOf",t.briefPlatforms.sort())}},dependencies:[u.sg,D.Nt,f.KE,f.hX,f.R9,A.gD,C.ey,R.oG,Q.Mq,Q.hl,Q.nW,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.qQ,n.sg,n.u],styles:[".mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}mat-datepicker-toggle[_ngcontent-%COMP%]{color:#fff}"]});class N{constructor(o){this.rootFormGroup=o,this.clientIndustries=b.r5,this.countries=b.hW,this.showInfo1=!1,this.showInfo2=!1,this.showInfo3=!1,this.showInfo4=!1,this.showInfo5=!1,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}function le(i,o){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function me(i,o){1&i&&(e.TgZ(0,"div",20),e._uU(1," Please select main market first. "),e.qZA())}function de(i,o){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function fe(i,o){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ue(i,o){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}N.\u0275fac=function(o){return new(o||N)(e.Y36(n.sg))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-influencer-details"]],inputs:{formGroupName:"formGroupName"},decls:85,vars:8,consts:[[3,"formGroup"],[1,"row"],["formGroupName","InfluencerAgeRange",1,"checkbox-container"],["color","primary","formControlName","AgeGroup1"],["color","primary","formControlName","AgeGroup2"],["color","primary","formControlName","AgeGroup3"],["color","primary","formControlName","AgeGroup4"],["color","primary","formControlName","AgeGroup5"],["formControlName","InfluencerLocation","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","InfluencerCity","autocomplete","off"],["formControlName","InfluencerNationality","multiple",""],["formControlName","InfluencerInterest","multiple",""],["formControlName","InfluencerGender"],["value","Male"],["value","Female"],["value","Both"],["matInput","","formControlName","InfluencerNotes","rows","1","autocomplete","off"],["matInput","","type","text","formControlName","SimilarProfileLink","autocomplete","off"],["formGroupName","InfluencerNumberOfFollowers",1,"checkbox-container",2,"flex","0.5"],[1,"hoverable-text",3,"mouseover","mouseout"],["color","primary","formControlName","Nano"],["class","info-box",4,"ngIf"],["color","primary","formControlName","Micro"],["color","primary","formControlName","Macro"],["color","primary","formControlName","Mega"],["color","primary","formControlName","Celebrity"],[2,"flex","1"],[2,"width","50rem"],["matInput","","type","text","formControlName","NoteForNumberOfFollowers","autocomplete","off"],[3,"value"],[1,"info-box"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2"),e._uU(3,"Influencer Age Range"),e.qZA(),e.TgZ(4,"div",2)(5,"mat-checkbox",3),e._uU(6," 12 - 17"),e.qZA(),e.TgZ(7,"mat-checkbox",4),e._uU(8," 18 - 24"),e.qZA(),e.TgZ(9,"mat-checkbox",5),e._uU(10," 25 - 34"),e.qZA(),e.TgZ(11,"mat-checkbox",6),e._uU(12," 35 - 49"),e.qZA(),e.TgZ(13,"mat-checkbox",7),e._uU(14," 50 + "),e.qZA()()(),e._UZ(15,"hr"),e.TgZ(16,"div",1)(17,"h2"),e._uU(18,"Influencer Location, Nationality, Gender, and Interests"),e.qZA(),e.TgZ(19,"mat-form-field")(20,"mat-label"),e._uU(21,"Influencer Location"),e.qZA(),e.TgZ(22,"mat-select",8),e.YNc(23,oe,2,2,"mat-option",9),e.qZA()(),e.TgZ(24,"mat-form-field")(25,"mat-label"),e._uU(26,"Influencer City"),e.qZA(),e._UZ(27,"input",10),e.qZA(),e.TgZ(28,"mat-form-field")(29,"mat-label"),e._uU(30,"Influencer Nationality"),e.qZA(),e.TgZ(31,"mat-select",11),e.YNc(32,ie,2,2,"mat-option",9),e.qZA()(),e.TgZ(33,"mat-form-field")(34,"mat-label"),e._uU(35,"Influencer Interests"),e.qZA(),e.TgZ(36,"mat-select",12),e.YNc(37,ne,2,2,"mat-option",9),e.qZA()()(),e.TgZ(38,"div",1)(39,"mat-form-field")(40,"mat-label"),e._uU(41,"Influencer Gender"),e.qZA(),e.TgZ(42,"mat-select",13)(43,"mat-option",14),e._uU(44," Male"),e.qZA(),e.TgZ(45,"mat-option",15),e._uU(46," Female"),e.qZA(),e.TgZ(47,"mat-option",16),e._uU(48," Both"),e.qZA()()(),e.TgZ(49,"mat-form-field")(50,"mat-label"),e._uU(51,"Influencer Notes"),e.qZA(),e._UZ(52,"textarea",17),e.qZA(),e.TgZ(53,"mat-form-field")(54,"mat-label"),e._uU(55,"Similar Profile Handle (Link) "),e.qZA(),e._UZ(56,"input",18),e.qZA()(),e._UZ(57,"hr"),e.TgZ(58,"div",1)(59,"h2"),e._uU(60,"Number of Followers"),e.qZA(),e.TgZ(61,"div",19)(62,"div",20),e.NdJ("mouseover",function(){return t.showInfo1=!0})("mouseout",function(){return t.showInfo1=!1}),e.TgZ(63,"mat-checkbox",21),e._uU(64," Nano"),e.qZA(),e.YNc(65,ae,2,0,"div",22),e.qZA(),e.TgZ(66,"div",20),e.NdJ("mouseover",function(){return t.showInfo2=!0})("mouseout",function(){return t.showInfo2=!1}),e.TgZ(67,"mat-checkbox",23),e._uU(68," Micro"),e.qZA(),e.YNc(69,re,2,0,"div",22),e.qZA(),e.TgZ(70,"div",20),e.NdJ("mouseover",function(){return t.showInfo3=!0})("mouseout",function(){return t.showInfo3=!1}),e.TgZ(71,"mat-checkbox",24),e._uU(72," Macro "),e.qZA(),e.YNc(73,se,2,0,"div",22),e.qZA(),e.TgZ(74,"div",20),e.NdJ("mouseover",function(){return t.showInfo4=!0})("mouseout",function(){return t.showInfo4=!1}),e.TgZ(75,"mat-checkbox",25),e._uU(76," Mega "),e.qZA(),e.YNc(77,ce,2,0,"div",22),e.qZA(),e.TgZ(78,"mat-checkbox",26),e._uU(79," Celebrity"),e.qZA()(),e.TgZ(80,"div",27)(81,"mat-form-field",28)(82,"mat-label"),e._uU(83,"Note for number of followers "),e.qZA(),e._UZ(84,"input",29),e.qZA()()()()),2&o&&(e.Q6J("formGroup",t.form),e.xp6(23),e.Q6J("ngForOf",t.countries),e.xp6(9),e.Q6J("ngForOf",t.countries),e.xp6(5),e.Q6J("ngForOf",t.clientIndustries),e.xp6(28),e.Q6J("ngIf",t.showInfo1),e.xp6(4),e.Q6J("ngIf",t.showInfo2),e.xp6(4),e.Q6J("ngIf",t.showInfo3),e.xp6(4),e.Q6J("ngIf",t.showInfo4))},dependencies:[u.sg,u.O5,D.Nt,f.KE,f.hX,A.gD,C.ey,R.oG,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,n.x0],styles:[".row[_ngcontent-%COMP%]{color:#fff!important}.checkbox-container[_ngcontent-%COMP%]{color:#fff}  .mat-mdc-checkbox label{color:#fff!important;cursor:pointer}.mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}"]});class T{constructor(o){this.rootFormGroup=o,this.countries=b.hW,this.clientIndustries=b.r5,this.formGroupName="",this.showInfo1=!1}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}T.\u0275fac=function(o){return new(o||T)(e.Y36(n.sg))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-audience-details"]],inputs:{formGroupName:"formGroupName"},decls:55,vars:6,consts:[[3,"formGroup"],[1,"row"],["formGroupName","AudienceAgeRange",1,"checkbox-container"],["color","primary","formControlName","AgeGroup1"],["color","primary","formControlName","AgeGroup2"],["color","primary","formControlName","AgeGroup3"],["color","primary","formControlName","AgeGroup4"],["color","primary","formControlName","AgeGroup5"],[1,"hoverable-text",3,"mouseover","mouseout"],["formControlName","AudienceLocation","multiple",""],[3,"value",4,"ngFor","ngForOf"],["class","info-box",4,"ngIf"],["formControlName","AudienceNationality","multiple",""],["formControlName","AudienceGender"],["value","Male"],["value","Female"],["value","Both"],["formControlName","PrimaryAudienceInterest","multiple",""],["formControlName","SecondaryAudienceInterest","multiple",""],[3,"value"],[1,"info-box"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2"),e._uU(3,"Audience Age Range"),e.qZA(),e.TgZ(4,"div",2)(5,"mat-checkbox",3),e._uU(6," 12 - 17"),e.qZA(),e.TgZ(7,"mat-checkbox",4),e._uU(8," 18 - 24"),e.qZA(),e.TgZ(9,"mat-checkbox",5),e._uU(10," 25 - 34"),e.qZA(),e.TgZ(11,"mat-checkbox",6),e._uU(12," 35 - 49"),e.qZA(),e.TgZ(13,"mat-checkbox",7),e._uU(14," 50 + "),e.qZA()()(),e._UZ(15,"hr"),e.TgZ(16,"div",1)(17,"h2"),e._uU(18,"Audience Location, Nationality and Gender"),e.qZA(),e.TgZ(19,"div",8),e.NdJ("mouseover",function(){return t.showInfo1=!0})("mouseout",function(){return t.showInfo1=!1}),e.TgZ(20,"mat-form-field")(21,"mat-label"),e._uU(22,"Audience Location"),e.qZA(),e.TgZ(23,"mat-select",9),e.YNc(24,le,2,2,"mat-option",10),e.qZA()(),e.YNc(25,me,2,0,"div",11),e.qZA(),e.TgZ(26,"mat-form-field")(27,"mat-label"),e._uU(28,"Audience Nationality"),e.qZA(),e.TgZ(29,"mat-select",12),e.YNc(30,de,2,2,"mat-option",10),e.qZA()(),e.TgZ(31,"mat-form-field")(32,"mat-label"),e._uU(33," Audience Gender"),e.qZA(),e.TgZ(34,"mat-select",13)(35,"mat-option",14),e._uU(36," Male"),e.qZA(),e.TgZ(37,"mat-option",15),e._uU(38," Female"),e.qZA(),e.TgZ(39,"mat-option",16),e._uU(40," Both"),e.qZA()()()(),e._UZ(41,"hr"),e.TgZ(42,"div",1)(43,"h2"),e._uU(44,"Audience Primary and Seconadry Interest"),e.qZA(),e.TgZ(45,"mat-form-field")(46,"mat-label"),e._uU(47,"Primary Audience Interest"),e.qZA(),e.TgZ(48,"mat-select",17),e.YNc(49,fe,2,2,"mat-option",10),e.qZA()(),e.TgZ(50,"mat-form-field")(51,"mat-label"),e._uU(52,"Secondary Audience Interest"),e.qZA(),e.TgZ(53,"mat-select",18),e.YNc(54,ue,2,2,"mat-option",10),e.qZA()()()()),2&o&&(e.Q6J("formGroup",t.form),e.xp6(24),e.Q6J("ngForOf",t.countries),e.xp6(1),e.Q6J("ngIf",t.showInfo1),e.xp6(5),e.Q6J("ngForOf",t.countries),e.xp6(19),e.Q6J("ngForOf",t.clientIndustries),e.xp6(5),e.Q6J("ngForOf",t.clientIndustries))},dependencies:[u.sg,u.O5,f.KE,f.hX,A.gD,C.ey,R.oG,n._Y,n.JJ,n.JL,n.sg,n.u,n.x0],styles:[".mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}.info-box[_ngcontent-%COMP%]{color:#ff0;font-size:larger;margin-bottom:2%}"]});class w{constructor(o){this.rootFormGroup=o,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}w.\u0275fac=function(o){return new(o||w)(e.Y36(n.sg))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-department-details"]],inputs:{formGroupName:"formGroupName"},decls:41,vars:1,consts:[[3,"formGroup"],[1,"row"],[2,"width","50rem"],["matInput","","type","text","formControlName","ConfirmedInfluencerHandles","autocomplete","off"],["matInput","","type","text","formControlName","PreviousBrandAmbassadorsName","autocomplete","off"],["formControlName","ItpDepartment"],["value","UAE"],["value","KSA"],["value","Originals"],["value","Gaming"],["matInput","","type","text","formControlName","KPIs","autocomplete","off"],[1,"checkbox-container"],["color","primary","formControlName","Strategy"],["color","primary","formControlName","Concept"],["color","primary","formControlName","Event"],["color","primary","formControlName","Performance"]],template:function(o,t){1&o&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2"),e._uU(3,"Confirmed and Previous Influencers"),e.qZA(),e.TgZ(4,"mat-form-field",2)(5,"mat-label"),e._uU(6,"Confirmed Influencers Handles "),e.qZA(),e._UZ(7,"input",3),e.qZA(),e.TgZ(8,"mat-form-field",2)(9,"mat-label"),e._uU(10,"Previous Influncer Partners "),e.qZA(),e._UZ(11,"input",4),e.qZA()(),e._UZ(12,"hr"),e.TgZ(13,"div",1)(14,"mat-form-field",2)(15,"mat-label"),e._uU(16,"ITP Department"),e.qZA(),e.TgZ(17,"mat-select",5)(18,"mat-option",6),e._uU(19," UAE "),e.qZA(),e.TgZ(20,"mat-option",7),e._uU(21," KSA "),e.qZA(),e.TgZ(22,"mat-option",8),e._uU(23," Originals"),e.qZA(),e.TgZ(24,"mat-option",9),e._uU(25," Gaming "),e.qZA()()(),e.TgZ(26,"mat-form-field",2)(27,"mat-label"),e._uU(28,"KPIs"),e.qZA(),e._UZ(29,"input",10),e.qZA()(),e.TgZ(30,"div",1)(31,"div",11)(32,"div",11)(33,"mat-checkbox",12),e._uU(34,"Strategy required"),e.qZA(),e.TgZ(35,"mat-checkbox",13),e._uU(36,"Concept required"),e.qZA(),e.TgZ(37,"mat-checkbox",14),e._uU(38,"Event required"),e.qZA(),e.TgZ(39,"mat-checkbox",15),e._uU(40,"Performance Marketing required"),e.qZA()()()()()),2&o&&e.Q6J("formGroup",t.form)},dependencies:[D.Nt,f.KE,f.hX,A.gD,C.ey,R.oG,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}"]});class B{constructor(o,t,a,r,c,d,h,l){this.formBuilder=o,this.userService=t,this.notificationService=a,this.salesService=r,this.router=c,this.toastrService=d,this.fileService=h,this.campaignService=l,this.userId=this.userService.getID(),this.path=_.m,this.market="",this.headsOfKSA=[],this.headsofUAE=[23],this.clients=[],this.progress=0,this.message="",this.filesToUpload=[],this.fileName="Select File",this.userService.getUserNameById(this.userId).subscribe(j=>{this.userName=j}),this.initializeElements()}initializeElements(){this.newForm=this.formBuilder.group({basicInfo:this.formBuilder.group({Agency:["",[n.kI.required]],clientId:["",[n.kI.required]],CampaignName:["",[n.kI.required]],CampaignOverview:[""],CampaignObjective:[""],CampaignObjectiveDetails:[""],NumberofRecommendations:["",[n.kI.required]],Currency:[""],Budget:["",[n.kI.required]]}),campaignOverview:this.formBuilder.group({CampaignStartDate:["",[n.kI.required]],CampaignEndDate:["",[n.kI.required]],CampaignMessagePhaseOne:[""],CampaignMessagePhaseTwo:[""],CampaignMessagePhaseThree:[""],ContentDeliverables:[""],BrandExclusivityDurationinDays:["",[n.kI.required]],VideoProduction:new n.NI(!1),VideoEditing:new n.NI(!1)}),influencerDetails:this.formBuilder.group({InfluencerAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),InfluencerLocation:[""],InfluencerCity:[""],InfluencerNationality:[""],InfluencerGender:[""],InfluencerNotes:[""],SimilarProfileLink:[""],InfluencerInterest:[""],InfluencerNumberOfFollowers:new n.cw({Nano:new n.NI(!1),Micro:new n.NI(!1),Macro:new n.NI(!1),Mega:new n.NI(!1),Celebrity:new n.NI(!1)}),NoteForNumberOfFollowers:[""]}),audienceDetails:this.formBuilder.group({AudienceAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),AudienceLocation:[""],AudienceNationality:[""],AudienceGender:[""],PrimaryAudienceInterest:[""],SecondaryAudienceInterest:[""]}),departmentDetails:this.formBuilder.group({ConfirmedInfluencerHandles:[""],PreviousBrandAmbassadorsName:[""],Performance:new n.NI(!1),Event:new n.NI(!1),Concept:new n.NI(!1),Strategy:new n.NI(!1),ItpDepartment:["",[n.kI.required]],KPIs:[""]})})}ngOnInit(){this.getHeads()}getHeads(){this.userService.getKSAHeads().subscribe(o=>{this.headsOfKSA=o}),this.userService.getUAEHead().subscribe(o=>{o.onLeave&&this.headsofUAE.push(15)})}submitForm(){const o=this.newForm.value.departmentDetails.ItpDepartment,t=this.processFormGroups(this.newForm);t.CreatedbyID=this.userService.getID(),t.Ready=!1,t.ResultsViewed=!1,console.log(t.CampaignName),this.market=t.AudienceLocation.split(",")[0].trim(),console.log(this.market),this.campaignService.addCampaign({campaignName:t.CampaignName,market:this.market,clientId:t.clientId,createdBy:this.userService.getID()}).subscribe(a=>{this.salesService.createBrief({...t,campaignId:a.campaign.id}).subscribe(r=>{if(this.newBrief=r,this.uploadFiles(this.newBrief.id),"Originals"==o||"UAE"==o)for(let c=0;c<this.headsofUAE.length;c++){let d=this.headsofUAE[c],h={message:"New Sales Brief has been created by "+this.userName.name,link:`${this.path.viewBrief+this.newBrief.id}`};this.notificationService.createNotification(d,h).subscribe(l=>{})}else if("KSA"==o||"Gaming"==o)for(let c=0;c<this.headsOfKSA.length;c++){let d=this.headsOfKSA[c],h={message:"New Sales Brief has been created by "+this.userName.name,link:`${this.path.viewBrief+this.newBrief.id}`};this.notificationService.createNotification(d,h).subscribe(()=>{})}})}),this.toastrService.success("Brief submitted successfully!"),this.router.navigate([this.path.forms])}processFormGroups(o){let t={};return o instanceof n.cw&&Object.keys(o.controls)?.forEach(a=>{const r=o.get(a);if("InfluencerAgeRange"===a||"AudienceAgeRange"===a||"InfluencerNumberOfFollowers"===a)t[a]=this.processAgeRangeGroup(r);else if(r instanceof n.cw)t={...t,...this.processFormGroups(r)};else if(r instanceof n.NI)if(Array.isArray(r?.value)){const c=(r?.value).map(d=>d.toString()).join(", ");t[a]=c}else t[a]=r?.value}),t}processAgeRangeGroup(o){return Object.keys(o.controls).filter(a=>!0===o.get(a)?.value).join(", ")}transferedFiles(o){this.filesToUpload=o}uploadFiles(o){for(let t=0;t<this.filesToUpload.length;t++)this.fileService.uploadFile(this.filesToUpload[t],o,this.userId,H.yE.SALES).subscribe(a=>{this.toastrService.success(this.filesToUpload[t].name+" uploaded successfully!")},a=>{this.progress=0,this.toastrService.error("Could not upload the file:"+this.filesToUpload[t].name)})}}B.\u0275fac=function(o){return new(o||B)(e.Y36(n.qu),e.Y36(U.K),e.Y36(Y.g),e.Y36(Z.M),e.Y36(g.F0),e.Y36(M._W),e.Y36(J.I),e.Y36(z.U))},B.\u0275cmp=e.Xpm({type:B,selectors:[["app-new-sales-brief"]],decls:20,vars:2,consts:[[1,"form-container"],[2,"align-content","center","text-align","center","font-size","300%","margin-top","2%","margin-bottom","3%"],["autocomplete","off",3,"formGroup","ngSubmit"],["formGroupName","basicInfo",3,"clients"],["formGroupName","campaignOverview"],["formGroupName","influencerDetails"],["formGroupName","audienceDetails"],["formGroupName","departmentDetails"],[3,"filesUploaded"],["mat-raised-button","","color","primary","type","submit",2,"margin-bottom","2%","margin-top","2%","color","white",3,"disabled"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"New Sales Brief"),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return t.submitForm()}),e.TgZ(4,"app-basic-information",3),e.NdJ("clients",function(){return t.clients}),e.qZA(),e._UZ(5,"app-campaign-overview",4)(6,"hr")(7,"app-influencer-details",5)(8,"hr")(9,"app-audience-details",6)(10,"hr")(11,"app-department-details",7)(12,"hr"),e.TgZ(13,"mat-label")(14,"h2"),e._uU(15," Upload Files "),e.qZA()(),e.TgZ(16,"app-upload-files",8),e.NdJ("filesUploaded",function(r){return t.transferedFiles(r)}),e.qZA(),e._UZ(17,"hr"),e.TgZ(18,"button",9),e._uU(19,"Submit Brief Form"),e.qZA()()()),2&o&&(e.xp6(3),e.Q6J("formGroup",t.newForm),e.xp6(15),e.Q6J("disabled",!t.newForm.valid))},dependencies:[f.hX,k.lW,n._Y,n.JL,n.sg,n.x0,$.V,v,I,N,T,w],styles:["ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{color:#fff}mat-label[_ngcontent-%COMP%]{color:#fff;margin-right:2%}.progress-bar[_ngcontent-%COMP%]{padding:0}.progress[_ngcontent-%COMP%]{width:50px}#fileInput[_ngcontent-%COMP%]{position:absolute;cursor:pointer;z-index:10;opacity:0;height:100%;left:0;top:0}.mat-toolbar-single-row[_ngcontent-%COMP%]{height:auto!important;background:transparent;padding:0}.mat-toolbar-single-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.message[_ngcontent-%COMP%]{background-color:#ddd;padding:15px;color:#333;border:#aaa solid 1px;border-radius:4px;margin-bottom:10px}.container[_ngcontent-%COMP%]{width:100vw;margin:20px auto}"]});var E=s(1921),pe=s(7630),he=s(3523),ge=s(6526);function be(i,o){if(1&i&&(e.TgZ(0,"h1"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" Round Number : ",t.task.History[t.task.History.length-1].round," ")}}function _e(i,o){if(1&i&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}class q{constructor(o,t,a,r,c){this.fb=o,this.taskService=t,this.toastrService=a,this.notificationService=r,this.salesService=c,this.path=_.m,this.feedbackOptions=["Accept","Request Changes"],this.feedbackForm=this.fb.group({feedback:["",n.kI.required],notes:["",n.kI.required]})}onSubmit(){if(this.feedbackForm.valid){let o=this.task.assignedUsers.map(t=>t.id);if(this.taskService.roundFeedback(this.task.id,{feedback:this.feedbackForm.value.feedback,notes:this.feedbackForm.value.notes}).subscribe(t=>{this.toastrService.success("Feedback submitted successfully")}),"Accept"===this.feedbackForm.value.feedback){let t={message:`Brief ${this.brief.data.CampaignName} has been approved`,link:`${this.path.viewBrief}${this.brief.data.id}`};this.taskService.updateProgress(this.task.id,{progress:"Submitted and Approved"}).subscribe(a=>{});for(let a=0;a<o.length;a++)this.notificationService.createNotification(o[a],t).subscribe(r=>{});window.location.reload()}else if("Request Changes"===this.feedbackForm.value.feedback){this.activateBrief();let t={message:`Brief ${this.brief.data.CampaignName} needs some changes`,link:`${this.path.viewBrief}${this.brief.data.id}`};this.taskService.updateProgress(this.task.id,{progress:"Submitted and Rejected"}).subscribe(a=>{});for(let a=0;a<o.length;a++)this.notificationService.createNotification(o[a],t).subscribe(r=>{});window.location.reload()}}}deactivateBrief(){this.salesService.changeStatus(this.brief.data.id,{status:"InActive"}).subscribe(o=>{this.taskService.deactivateTask(this.brief.data.id).subscribe(t=>{})})}activateBrief(){this.salesService.changeStatus(this.brief.data.id,{status:"Active"}).subscribe(o=>{this.toastrService.success("Brief Activated"),this.taskService.activateTask(this.brief.data.id).subscribe(t=>{this.toastrService.success("Task Activated"),window.location.reload()})})}}function Ze(i,o){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.budgetSheet.originalname)}}function Ae(i,o){1&i&&e._UZ(0,"td")}function Ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadFilexlsx(r.budgetSheet.id,r.budgetSheet.originalname))}),e._uU(2," Download "),e.qZA()()}}function ve(i,o){1&i&&e._UZ(0,"td")}function Ie(i,o){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.presentation.originalname)}}function Ne(i,o){1&i&&e._UZ(0,"td")}function Te(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadFilePPTX(r.presentation.id,r.presentation.originalname))}),e._uU(2," Download "),e.qZA()()}}function we(i,o){1&i&&e._UZ(0,"td")}function ye(i,o){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.pdf.originalname)}}function xe(i,o){1&i&&e._UZ(0,"td")}function Se(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadFilePDF(r.pdf.id,r.pdf.originalname))}),e._uU(2," Download "),e.qZA()()}}function Ue(i,o){1&i&&e._UZ(0,"td")}q.\u0275fac=function(o){return new(o||q)(e.Y36(n.qu),e.Y36(E.M),e.Y36(M._W),e.Y36(Y.g),e.Y36(Z.M))},q.\u0275cmp=e.Xpm({type:q,selectors:[["app-task-rounds"]],inputs:{task:"task",brief:"brief"},decls:17,vars:5,consts:[[1,"round-container"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","fill"],["formControlName","feedback"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",1,"full-width"],["matInput","","formControlName","notes","rows","4"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[2,"margin-top","2%"],[3,"task"],[3,"value"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,be,2,1,"h1",1),e.TgZ(2,"form",2),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Feedback Type"),e.qZA(),e.TgZ(6,"mat-select",4),e.YNc(7,_e,2,2,"mat-option",5),e.qZA()(),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Comments"),e.qZA(),e._UZ(11,"textarea",7),e.qZA(),e.TgZ(12,"button",8),e._uU(13," Submit Feedback "),e.qZA()(),e.TgZ(14,"h1",9),e._uU(15,"Round History"),e.qZA(),e._UZ(16,"app-round-history",10),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.task),e.xp6(1),e.Q6J("formGroup",t.feedbackForm),e.xp6(5),e.Q6J("ngForOf",t.feedbackOptions),e.xp6(5),e.Q6J("disabled",!t.feedbackForm.valid),e.xp6(4),e.Q6J("task",t.task))},dependencies:[u.sg,u.O5,D.Nt,f.KE,f.hX,k.lW,A.gD,C.ey,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,ge.F],styles:[".round-container[_ngcontent-%COMP%]{margin-left:1%;color:#fff}.full-width[_ngcontent-%COMP%]{width:100%}"]});class F{constructor(o,t,a,r,c){this.activatedRoute=o,this.fileService=t,this.salesService=a,this.userService=r,this.taskService=c,this.assignedUser=[]}ngOnInit(){this.loadFiles()}loadFiles(){this.activatedRoute.params.subscribe(o=>{this.brief_id=o.id,this.salesService.getSalesBrief(this.brief_id).subscribe(t=>{this.brief=t.data,this.budgetSheetId=this.brief.BudgetSheetId,this.getBudgetSheet(this.budgetSheetId),this.presentationId=this.brief.PresentationId,this.getPresentation(this.presentationId),this.pdfId=this.brief.PdfId,this.getPDF(this.pdfId)}),this.salesService.getSalesBriefWithFiles(this.brief_id).subscribe(t=>{this.brief=t,this.getSalesPerson(this.brief.data.CreatedbyID),this.getAssignedUser(this.brief.data.id)})})}getSalesPerson(o){this.userService.getUserNameById(o).subscribe(t=>{this.salesperson=t.name})}getAssignedUser(o){this.taskService.getTaskByBriefId(o).subscribe(t=>{console.log(t.data),this.task=t.data;for(let a=0;a<this.task?.assignedUsers?.length;a++)this.assignedUser.push(this.task.assignedUsers[a].name)})}getBudgetSheet(o){this.fileService.getFile(o).subscribe(t=>{this.budgetSheet=t.data})}getPresentation(o){this.fileService.getFile(o).subscribe(t=>{this.presentation=t.data})}getPDF(o){this.fileService.getFile(o).subscribe(t=>{this.pdf=t.data})}downloadFilePPTX(o,t){this.fileService.downloadFile(o,t).subscribe(a=>{const r=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}),c=window.URL.createObjectURL(r);window.open(c)})}downloadFilexlsx(o,t){this.fileService.downloadFile(o,t).subscribe(a=>{const r=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=window.URL.createObjectURL(r);window.open(c)})}downloadFilePDF(o,t){this.fileService.downloadFile(o,t).subscribe(a=>{const r=new Blob([a],{type:"application/pdf"}),c=window.URL.createObjectURL(r);window.open(c)})}}F.\u0275fac=function(o){return new(o||F)(e.Y36(g.gz),e.Y36(J.I),e.Y36(Z.M),e.Y36(U.K),e.Y36(E.M))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-ready-briefs-id"]],decls:35,vars:17,consts:[[3,"assignedUser","salesperson"],[1,"row"],[1,"my-table"],[1,"centered"],[4,"ngIf"],[3,"task","brief"],[3,"brief"],["mat-raised-button","",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-person-info",0),e.TgZ(2,"div",1)(3,"table",2)(4,"tr")(5,"th",3),e._uU(6,"File Type"),e.qZA(),e.TgZ(7,"th",3),e._uU(8,"File Name"),e.qZA(),e.TgZ(9,"th",3),e._uU(10,"Download"),e.qZA()(),e.TgZ(11,"tr")(12,"td"),e._uU(13,"Excel Sheet"),e.qZA(),e.YNc(14,Ze,2,1,"td",4),e.YNc(15,Ae,1,0,"td",4),e.YNc(16,Ce,3,0,"td",4),e.YNc(17,ve,1,0,"td",4),e.qZA(),e.TgZ(18,"tr")(19,"td"),e._uU(20,"Presentation"),e.qZA(),e.YNc(21,Ie,2,1,"td",4),e.YNc(22,Ne,1,0,"td",4),e.YNc(23,Te,3,0,"td",4),e.YNc(24,we,1,0,"td",4),e.qZA(),e.TgZ(25,"tr")(26,"td"),e._uU(27,"PDF File"),e.qZA(),e.YNc(28,ye,2,1,"td",4),e.YNc(29,xe,1,0,"td",4),e.YNc(30,Se,3,0,"td",4),e.YNc(31,Ue,1,0,"td",4),e.qZA()()(),e._UZ(32,"hr")(33,"app-task-rounds",5)(34,"app-all-info",6),e.qZA()),2&o&&(e.xp6(1),e.Q6J("assignedUser",t.assignedUser)("salesperson",t.salesperson),e.xp6(13),e.Q6J("ngIf",t.budgetSheet),e.xp6(1),e.Q6J("ngIf",!t.budgetSheet),e.xp6(1),e.Q6J("ngIf",t.budgetSheet),e.xp6(1),e.Q6J("ngIf",!t.budgetSheet),e.xp6(4),e.Q6J("ngIf",t.presentation),e.xp6(1),e.Q6J("ngIf",!t.presentation),e.xp6(1),e.Q6J("ngIf",t.presentation),e.xp6(1),e.Q6J("ngIf",!t.presentation),e.xp6(4),e.Q6J("ngIf",t.pdf),e.xp6(1),e.Q6J("ngIf",!t.pdf),e.xp6(1),e.Q6J("ngIf",t.pdf),e.xp6(1),e.Q6J("ngIf",!t.pdf),e.xp6(2),e.Q6J("task",t.task)("brief",t.brief),e.xp6(1),e.Q6J("brief",t.brief))},dependencies:[u.O5,k.lW,pe.L,he.A,q],styles:[".my-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px;overflow:hidden;max-width:100%}.my-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;max-width:100%;text-align:center;color:#fff}.my-table[_ngcontent-%COMP%]   th.centered[_ngcontent-%COMP%]{background-color:#4789a1;max-width:100%;color:#fff;font-weight:700;padding:10px;text-align:left;border:1px solid #ddd;text-align:center}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:1%;padding-left:1%;overflow-x:hidden;max-width:100%}"]});var y=s(3365),p=s(3566),m=s(5313);function ke(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Campaign Name"),e.qZA())}function De(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.CampaignName)}}function Be(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Agency"),e.qZA())}function qe(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.Agency)}}function Fe(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Client"),e.qZA())}function Oe(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.Client)}}function Ge(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Created At"),e.qZA())}function Pe(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.createdAt)," ")}}function Re(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Updated At"),e.qZA())}function Ye(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.updatedAt)," ")}}function Me(i,o){1&i&&(e.TgZ(0,"th",17),e._uU(1,"Action"),e.qZA())}function Je(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",16)(1,"button",18),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.viewFiles(c.id))}),e._uU(2," View "),e.qZA()()}}function Qe(i,o){1&i&&e._UZ(0,"tr",19)}function Ee(i,o){1&i&&e._UZ(0,"tr",20)}const je=function(){return[3,5,10,25,100]};class O{constructor(o,t,a){this.salesService=o,this.router=t,this.userService=a,this.path=_.m,this.user_id=this.userService.getID(),this.displayedColumns=["CampaignName","Agency","Client","CreatedAt","UpdatedAt","Action"]}ngOnInit(){this.getReadyBriefs()}getReadyBriefs(){this.salesService.getBriefByCreatedbyId(this.user_id).subscribe(o=>{this.briefs=o,this.dataSource=new m.by(this.briefs.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}viewFiles(o){this.salesService.viewBriefBySales(o).subscribe(t=>{}),this.router.navigate([`${this.path.readyBriefs+o}`])}}O.\u0275fac=function(o){return new(o||O)(e.Y36(Z.M),e.Y36(g.F0),e.Y36(U.K))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-ready-briefs"]],viewQuery:function(o,t){if(1&o&&(e.Gf(y.NW,5),e.Gf(p.YE,5)),2&o){let a;e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first)}},decls:24,vars:8,consts:[[2,"position","relative"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","CampaignName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Agency"],["matColumnDef","Client"],["matColumnDef","CreatedAt"],["matColumnDef","UpdatedAt"],["matColumnDef","Action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-raised-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e.ynx(3,3),e.YNc(4,ke,2,0,"th",4),e.YNc(5,De,2,1,"td",5),e.BQk(),e.ynx(6,6),e.YNc(7,Be,2,0,"th",4),e.YNc(8,qe,2,1,"td",5),e.BQk(),e.ynx(9,7),e.YNc(10,Fe,2,0,"th",4),e.YNc(11,Oe,2,1,"td",5),e.BQk(),e.ynx(12,8),e.YNc(13,Ge,2,0,"th",4),e.YNc(14,Pe,3,3,"td",5),e.BQk(),e.ynx(15,9),e.YNc(16,Re,2,0,"th",4),e.YNc(17,Ye,3,3,"td",5),e.BQk(),e.ynx(18,10),e.YNc(19,Me,2,0,"th",11),e.YNc(20,Je,3,0,"td",5),e.BQk(),e.YNc(21,Qe,1,0,"tr",12),e.YNc(22,Ee,1,0,"tr",13),e.qZA(),e._UZ(23,"mat-paginator",14),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",100)("pageSize",5)("pageSizeOptions",e.DdM(7,je)))},dependencies:[k.lW,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,y.NW,p.YE,p.nU,u.uU],styles:[".search-container[_ngcontent-%COMP%]{padding-top:2%;padding-bottom:2%;padding-left:1%;position:absolute;top:5;left:0;right:0;z-index:1}.table-container[_ngcontent-%COMP%]{padding-top:1%;overflow-y:scroll;max-height:auto;padding-left:2%}table[_ngcontent-%COMP%]{width:100%}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#888;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#555}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}"]});var K=s(617);function Le(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1," Campaign Name "),e.qZA())}function He(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.CampaignName," ")}}function $e(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1," Agency "),e.qZA())}function Ke(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.Agency," ")}}function ze(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1," Client "),e.qZA())}function Ve(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.Client," ")}}function Xe(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1," Created At "),e.qZA())}function We(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.createdAt)," ")}}function et(i,o){1&i&&(e.TgZ(0,"th",15),e._uU(1," Last Edited "),e.qZA())}function tt(i,o){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.updatedAt)," ")}}function ot(i,o){1&i&&(e.TgZ(0,"th",17),e._uU(1," Action "),e.qZA())}function it(i,o){if(1&i&&(e.TgZ(0,"td",16)(1,"button",18)(2,"mat-icon"),e._uU(3,"remove_red_eye"),e.qZA()()()),2&i){const t=o.$implicit,a=e.oxw();e.xp6(1),e.s9C("routerLink",a.path.sentBriefs+t.id)}}function nt(i,o){1&i&&e._UZ(0,"tr",19)}function at(i,o){1&i&&e._UZ(0,"tr",20)}const rt=function(){return[3,5,10,25,100]};class G{constructor(o,t){this.userService=o,this.salesService=t,this.path=_.m,this.user_id=this.userService.getID(),this.displayedColumns=["CampaignName","Agency","Client","CreatedAt","UpdatedAt","Action"]}ngOnInit(){this.getSentBriefs()}getSentBriefs(){this.salesService.viewMyBriefs(this.user_id).subscribe(o=>{this.dataSource=new m.by(o.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}}G.\u0275fac=function(o){return new(o||G)(e.Y36(U.K),e.Y36(Z.M))},G.\u0275cmp=e.Xpm({type:G,selectors:[["app-sent-briefs"]],viewQuery:function(o,t){if(1&o&&(e.Gf(y.NW,5),e.Gf(p.YE,5)),2&o){let a;e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first)}},decls:24,vars:8,consts:[[2,"position","relative"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","CampaignName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Agency"],["matColumnDef","Client"],["matColumnDef","CreatedAt"],["matColumnDef","UpdatedAt"],["matColumnDef","Action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"icon-btn",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e.ynx(3,3),e.YNc(4,Le,2,0,"th",4),e.YNc(5,He,2,1,"td",5),e.BQk(),e.ynx(6,6),e.YNc(7,$e,2,0,"th",4),e.YNc(8,Ke,2,1,"td",5),e.BQk(),e.ynx(9,7),e.YNc(10,ze,2,0,"th",4),e.YNc(11,Ve,2,1,"td",5),e.BQk(),e.ynx(12,8),e.YNc(13,Xe,2,0,"th",4),e.YNc(14,We,3,3,"td",5),e.BQk(),e.ynx(15,9),e.YNc(16,et,2,0,"th",4),e.YNc(17,tt,3,3,"td",5),e.BQk(),e.ynx(18,10),e.YNc(19,ot,2,0,"th",11),e.YNc(20,it,4,1,"td",5),e.BQk(),e.YNc(21,nt,1,0,"tr",12),e.YNc(22,at,1,0,"tr",13),e.qZA(),e._UZ(23,"mat-paginator",14),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",100)("pageSize",10)("pageSizeOptions",e.DdM(7,rt)))},dependencies:[g.rH,K.Hw,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,y.NW,p.YE,p.nU,u.uU],styles:[".table-container[_ngcontent-%COMP%]{padding-top:1%;overflow-y:scroll;max-height:auto;padding-left:2%}"]});var st=s(3762);function ct(i,o){1&i&&(e.TgZ(0,"th",21),e._uU(1,"ID"),e.qZA())}function lt(i,o){if(1&i&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.id)}}function mt(i,o){1&i&&(e.TgZ(0,"th",21),e._uU(1,"File Name"),e.qZA())}function dt(i,o){if(1&i&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.originalname)}}function ft(i,o){1&i&&(e.TgZ(0,"th",21),e._uU(1,"Type "),e.qZA())}function ut(i,o){if(1&i&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.fileType)}}function pt(i,o){1&i&&(e.TgZ(0,"th",21),e._uU(1,"Download"),e.qZA())}function ht(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",22)(1,"mat-icon",23),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.deleteFile(c.id))}),e._uU(2," delete "),e.qZA()()}}function gt(i,o){1&i&&e._UZ(0,"tr",24)}function bt(i,o){1&i&&e._UZ(0,"tr",25)}const _t=function(){return[3,5,10,25,100]};class P{constructor(o,t,a,r,c,d,h,l,j,Tt){this.formBuilder=o,this.userService=t,this.notificationService=a,this.salesService=r,this.activatedRoute=c,this.taskService=d,this.router=h,this.toastrService=l,this.fileService=j,this.dialogService=Tt,this.path=_.m,this.userId=this.userService.getID(),this.filesToUpload=[],this.displayedColumns=["id","originalname","fileType","action"],this.userService.getUserNameById(this.userId).subscribe(wt=>{this.userName=wt}),this.loadSalesBriefData(),this.initializeElements(),this.getSalesFiles()}initializeElements(){this.editForm=this.formBuilder.group({basicInfo:this.formBuilder.group({Agency:["",[n.kI.required]],clientId:["",[n.kI.required]],CampaignName:["",[n.kI.required]],CampaignOverview:[""],CampaignObjective:[""],CampaignObjectiveDetails:[""],NumberofRecommendations:["",[n.kI.required]],Currency:[""],Budget:["",[n.kI.required]]}),campaignOverview:this.formBuilder.group({CampaignStartDate:["",[n.kI.required]],CampaignEndDate:["",[n.kI.required]],CampaignMessagePhaseOne:[""],CampaignMessagePhaseTwo:[""],CampaignMessagePhaseThree:[""],ContentDeliverables:[""],BrandExclusivityDurationinDays:["",[n.kI.required]],VideoProduction:new n.NI(!1),VideoEditing:new n.NI(!1)}),influencerDetails:this.formBuilder.group({InfluencerAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),InfluencerLocation:[""],InfluencerCity:[""],InfluencerNationality:[""],InfluencerGender:[""],InfluencerNotes:[""],SimilarProfileLink:[""],InfluencerInterest:[""],InfluencerNumberOfFollowers:new n.cw({Nano:new n.NI(!1),Micro:new n.NI(!1),Macro:new n.NI(!1),Mega:new n.NI(!1),Celebrity:new n.NI(!1)}),NoteForNumberOfFollowers:[""]}),audienceDetails:this.formBuilder.group({AudienceAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),AudienceLocation:[""],AudienceNationality:[""],AudienceGender:[""],PrimaryAudienceInterest:[""],SecondaryAudienceInterest:[""]}),departmentDetails:this.formBuilder.group({ConfirmedInfluencerHandles:[""],PreviousBrandAmbassadorsName:[""],Performance:new n.NI(!1),Event:new n.NI(!1),Concept:new n.NI(!1),Strategy:new n.NI(!1),ItpDepartment:["",[n.kI.required]],KPIs:[""]})})}loadSalesBriefData(){this.activatedRoute.params.subscribe(o=>{this.briefId=o.id}),this.salesService.getSalesBrief(this.briefId).subscribe(o=>{this.briefData=o,console.log(this.briefData.data),this.briefData.data.assigned&&this.taskService.getTaskByBriefId(this.briefId).subscribe(l=>{this.taskData=l});const t=this.briefData.data.InfluencerAgeRange?.split(",").map(l=>l.trim()),a=this.editForm.get("influencerDetails.InfluencerAgeRange");t?.forEach(l=>{a.get(l)?.setValue(!0)});const r=this.briefData.data.AudienceAgeRange?.split(",").map(l=>l.trim()),c=this.editForm.get("audienceDetails.AudienceAgeRange");r?.forEach(l=>{c.get(l)?.setValue(!0)});const d=this.briefData.data.InfluencerNumberOfFollowers?.split(",").map(l=>l.trim()),h=this.editForm.get("influencerDetails.InfluencerNumberOfFollowers");d?.forEach(l=>{h.get(l)?.setValue(!0)}),null!=this.briefData.data&&this.editForm.patchValue({basicInfo:{Agency:this.briefData.data.Agency,clientId:this.briefData.data.client.id,CampaignName:this.briefData.data.CampaignName,CampaignOverview:this.briefData.data.CampaignOverview,CampaignObjective:this.briefData.data.CampaignObjective,CampaignObjectiveDetails:this.briefData.data.CampaignObjectiveDetails,NumberofRecommendations:this.briefData.data.NumberofRecommendations,Currency:this.briefData.data.Currency,Budget:this.briefData.data.Budget},campaignOverview:{CampaignStartDate:this.briefData.data.CampaignStartDate,CampaignEndDate:this.briefData.data.CampaignEndDate,CampaignMessagePhaseOne:this.briefData.data.CampaignMessagePhaseOne,CampaignMessagePhaseTwo:this.briefData.data.CampaignMessagePhaseTwo,CampaignMessagePhaseThree:this.briefData.data.CampaignMessagePhaseThree,ContentDeliverables:this.briefData.data.ContentDeliverables?.split(",").map(l=>l.trim()),BrandExclusivityDurationinDays:this.briefData.data.BrandExclusivityDurationinDays,VideoProduction:this.briefData.data.VideoProduction,VideoEditing:this.briefData.data.VideoEditing},influencerDetails:{InfluencerAgeRange:this.briefData.data.InfluencerAgeRange,InfluencerLocation:this.briefData.data.InfluencerLocation?.split(",").map(l=>l.trim()),InfluencerCity:this.briefData.data.InfluencerCity,InfluencerNationality:this.briefData.data.InfluencerNationality?.split(",").map(l=>l.trim()),InfluencerGender:this.briefData.data.InfluencerGender,InfluencerNotes:this.briefData.data.InfluencerNotes,SimilarProfileLink:this.briefData.data.SimilarProfileLink,InfluencerInterest:this.briefData.data.InfluencerInterest?.split(",").map(l=>l.trim()),InfluencerNumberOfFollowers:this.briefData.data.InfluencerNumberOfFollowers,NoteForNumberOfFollowers:this.briefData.data.NoteForNumberOfFollowers},audienceDetails:{AudienceAgeRange:this.briefData.data.AudienceAgeRange,AudienceLocation:this.briefData.data.AudienceLocation?.split(",").map(l=>l.trim()),AudienceNationality:this.briefData.data.AudienceNationality?.split(",").map(l=>l.trim()),AudienceGender:this.briefData.data.AudienceGender,PrimaryAudienceInterest:this.briefData.data.PrimaryAudienceInterest?.split(",").map(l=>l.trim()),SecondaryAudienceInterest:this.briefData.data.SecondaryAudienceInterest?.split(",").map(l=>l.trim())},departmentDetails:{ConfirmedInfluencerHandles:this.briefData.data.ConfirmedInfluencerHandles,PreviousBrandAmbassadorsName:this.briefData.data.PreviousBrandAmbassadorsName,Performance:this.briefData.data.Performance,Event:this.briefData.data.Event,Concept:this.briefData.data.Concept,Strategy:this.briefData.data.Strategy,ItpDepartment:this.briefData.data.ItpDepartment,KPIs:this.briefData.data.KPIs}})})}submitForm(){const o=this.editForm.value.departmentDetails.ItpDepartment,t=this.processFormGroups(this.editForm);t.CreatedbyID=this.userService.getID(),t.Ready=!1,t.ResultsViewed=!1,this.salesService.updateBrief(this.briefId,t).subscribe(a=>{if(this.uploadFiles(this.briefId),"Originals"==o||"UAE"==o){let r=23,c={message:"Sales Brief "+t.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};if(this.notificationService.createNotification(r,c).subscribe(()=>{}),null!=this.assignedUser){let d={message:"Sales Brief "+t.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};this.notificationService.createNotification(this.assignedUser.id,d).subscribe(()=>{})}}else if("KSA"==o||"Gaming"==o){let r=15,c={message:"Sales Brief "+t.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};if(this.notificationService.createNotification(r,c).subscribe(()=>{}),null!=this.assignedUser){let d={message:"Sales Brief "+t.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};this.notificationService.createNotification(this.assignedUser.id,d).subscribe(()=>{})}}this.toastrService.success("Sales brief edited successfully"),this.router.navigate([this.path.forms])},a=>{this.toastrService.error("An error occurred while creating the sales brief")})}processFormGroups(o){let t={};return o instanceof n.cw&&Object.keys(o.controls)?.forEach(a=>{const r=o.get(a);if(console.log(r?.value),"InfluencerAgeRange"===a||"AudienceAgeRange"===a||"InfluencerNumberOfFollowers"===a)t[a]=this.processAgeRangeGroup(r);else if(r instanceof n.cw)t={...t,...this.processFormGroups(r)};else if(r instanceof n.NI)if(Array.isArray(r?.value)){const c=(r?.value).map(d=>d.toString()).join(", ");t[a]=c}else t[a]=r?.value}),t}processAgeRangeGroup(o){return Object.keys(o.controls).filter(a=>!0===o.get(a)?.value).join(", ")}getSalesFiles(){this.fileService.getSalesBriefFiles(this.briefId).subscribe(o=>{console.log(o),this.dataSource=new m.by(o.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}deleteFile(o){this.dialogService.openConfirmationDialog("Confirm!","Are you sure you want to delete?").subscribe(t=>{!0===t&&this.fileService.deleteFile(o).subscribe(()=>{this.toastrService.success("File deleted successfully!"),this.getSalesFiles()})})}transferedFiles(o){this.filesToUpload=o}uploadFiles(o){for(let t=0;t<this.filesToUpload.length;t++)this.fileService.uploadFile(this.filesToUpload[t],o,this.userId,H.yE.SALES).subscribe(a=>{console.log(a),this.toastrService.success(this.filesToUpload[t].name+" uploaded successfully!")},a=>{console.log(a),this.toastrService.error("Could not upload the file:"+this.filesToUpload[t].name)})}}P.\u0275fac=function(o){return new(o||P)(e.Y36(n.qu),e.Y36(U.K),e.Y36(Y.g),e.Y36(Z.M),e.Y36(g.gz),e.Y36(E.M),e.Y36(g.F0),e.Y36(M._W),e.Y36(J.I),e.Y36(st.O))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-sent-briefs-id"]],viewQuery:function(o,t){if(1&o&&(e.Gf(y.NW,5),e.Gf(p.YE,5)),2&o){let a;e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first)}},decls:40,vars:9,consts:[[1,"form-container"],["autocomplete","off",3,"formGroup","ngSubmit"],["formGroupName","basicInfo"],["formGroupName","campaignOverview"],["formGroupName","influencerDetails"],["formGroupName","audienceDetails"],["formGroupName","departmentDetails"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","originalname"],["matColumnDef","fileType"],["matColumnDef","action"],["mat-header-row","","sticky","",4,"matHeaderRowDef"],["mat-row","","sticky","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],[3,"filesUploaded"],["mat-raised-button","","type","submit",2,"margin-bottom","2%","margin-top","2%",3,"disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["color","warn",3,"click"],["mat-header-row","","sticky",""],["mat-row","","sticky",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Edit Sales Brief"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return t.submitForm()}),e._UZ(4,"app-basic-information",2)(5,"app-campaign-overview",3)(6,"hr")(7,"app-influencer-details",4)(8,"hr")(9,"app-audience-details",5)(10,"hr")(11,"app-department-details",6)(12,"hr"),e.TgZ(13,"h2"),e._uU(14," Uploaded Files "),e.qZA(),e.TgZ(15,"div",7)(16,"table",8,9),e.ynx(18,10),e.YNc(19,ct,2,0,"th",11),e.YNc(20,lt,2,1,"td",12),e.BQk(),e.ynx(21,13),e.YNc(22,mt,2,0,"th",11),e.YNc(23,dt,2,1,"td",12),e.BQk(),e.ynx(24,14),e.YNc(25,ft,2,0,"th",11),e.YNc(26,ut,2,1,"td",12),e.BQk(),e.ynx(27,15),e.YNc(28,pt,2,0,"th",11),e.YNc(29,ht,3,0,"td",12),e.BQk(),e.YNc(30,gt,1,0,"tr",16),e.YNc(31,bt,1,0,"tr",17),e.qZA(),e._UZ(32,"mat-paginator",18),e.qZA(),e._UZ(33,"hr"),e.TgZ(34,"h2"),e._uU(35," Upload Files "),e.qZA(),e.TgZ(36,"app-upload-files",19),e.NdJ("filesUploaded",function(r){return t.transferedFiles(r)}),e.qZA(),e._UZ(37,"hr"),e.TgZ(38,"button",20),e._uU(39,"Edit Brief Form"),e.qZA()()()),2&o&&(e.xp6(3),e.Q6J("formGroup",t.editForm),e.xp6(13),e.Q6J("dataSource",t.dataSource),e.xp6(14),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("length",null==t.dataSource?null:t.dataSource.data.length)("pageSize",15)("pageSizeOptions",e.DdM(8,_t)),e.xp6(6),e.Q6J("disabled",!t.editForm.valid))},dependencies:[k.lW,K.Hw,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,y.NW,p.YE,p.nU,n._Y,n.JL,n.sg,n.x0,$.V,v,I,N,T,w],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-size:300%;margin-top:2%;margin-bottom:3%;color:#fff}.warn[_ngcontent-%COMP%]{background-color:red;color:#fff}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}"]});let Zt=_.m;const At=[{path:"newBrief",component:B},{path:"readyBriefs",component:O},{path:"readyBriefs/:id",component:F},{path:"sentBriefs",component:G},{path:"sentBriefs/:id",component:P},{path:"",redirectTo:`${Zt.forms}`,pathMatch:"full"},{path:"**",redirectTo:"/site/notFound"}];class x{}x.\u0275fac=function(o){return new(o||x)},x.\u0275mod=e.oAB({type:x}),x.\u0275inj=e.cJS({imports:[g.Bz.forChild(At),g.Bz]});var Ct=s(8519),vt=s(9347),It=s(3435),Nt=s(3006);class S{}S.\u0275fac=function(o){return new(o||S)},S.\u0275mod=e.oAB({type:S}),S.\u0275inj=e.cJS({imports:[u.ez,x,Ct.q,n.UX,n.u5,vt.Is,It.ViewBriefModule,Nt.SharingModule]})}}]);