"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[294],{3294:(It,L,s)=>{s.r(L),s.d(L,{SalesModule:()=>w});var p=s(6814),g=s(1896),n=s(6223),x=s(5753),H=s(1213),e=s(5879),N=s(3934),$=s(5869),T=s(9554),J=s(9229),Q=s(4960),f=s(4170),M=s(2296);class U{ngOnChanges(){this.cdRef.detectChanges()}constructor(t){this.cdRef=t,this.progress=0}}U.\u0275fac=function(t){return new(t||U)(e.Y36(e.sBO))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-progress-loader"]],inputs:{progress:"progress"},features:[e.TTD],decls:2,vars:2,consts:[[1,"progress"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e._UZ(1,"div",0),e.qZA()),2&t&&(e.xp6(1),e.Udp("width",o.progress+"%"))},styles:[".progress{background-color:#4c97cb}\n"],encapsulation:2});class D{constructor(){this.fileDropped=new e.vpe}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!1}ondrop(t){if(t.preventDefault(),t.stopPropagation(),this.fileOver=!1,t.dataTransfer){let o=t.dataTransfer.files;o.length>0&&this.fileDropped.emit(o)}}}function V(i,t){if(1&i){const o=e.EpF();e.TgZ(0,"div",7),e._UZ(1,"img",8),e.TgZ(2,"div",9)(3,"h4",10),e._uU(4),e.qZA(),e.TgZ(5,"p",11),e._uU(6),e.qZA(),e._UZ(7,"app-progress-loader",12),e.qZA(),e.TgZ(8,"div",13),e.NdJ("click",function(){const c=e.CHM(o).index,d=e.oxw();return e.KtG(d.deleteFile(c))}),e._UZ(9,"img",14),e.qZA()()}if(2&i){const o=t.$implicit,a=e.oxw();e.xp6(4),e.hij(" ",o.name," "),e.xp6(2),e.hij(" ",a.formatBytes(o.size)," "),e.xp6(1),e.Q6J("progress",o.progress)}}D.\u0275fac=function(t){return new(t||D)},D.\u0275dir=e.lG2({type:D,selectors:[["","appDnd",""]],hostVars:2,hostBindings:function(t,o){1&t&&e.NdJ("dragover",function(r){return o.onDragOver(r)})("dragleave",function(r){return o.onDragLeave(r)})("drop",function(r){return o.ondrop(r)}),2&t&&e.ekj("fileover",o.fileOver)},outputs:{fileDropped:"fileDropped"}});class _{constructor(t){this.toastrService=t,this.filesUploaded=new e.vpe,this.files=[],this.allowedTypes=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.oasis.opendocument.text","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.oasis.opendocument.presentation"]}onFileDropped(t){this.prepareFilesList(t)}fileBrowseHandler(t){const o=t.target;if(o.files&&o.files.length){const a=Array.from(o.files);this.prepareFilesList(a)}}deleteFile(t){this.files.splice(t,1),console.log(this.files)}uploadFilesSimulator(t){setTimeout(()=>{if(t!==this.files.length){const o=setInterval(()=>{100===this.files[t].progress?(clearInterval(o),this.uploadFilesSimulator(t+1)):this.files[t].progress+=5},300)}},1e3)}prepareFilesList(t){for(const o of t)o.progress=0,o&&this.allowedTypes.includes(o.type)?(this.files.push(o),this.filesUploaded.emit(this.files)):this.toastrService.error("File type not supported","Error");this.uploadFilesSimulator(0)}formatBytes(t,o=2){if(0===t)return"0 Bytes";const r=o<=0?0:o||2,d=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,d)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][d]}}_.\u0275fac=function(t){return new(t||_)(e.Y36(J._W))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-upload-files"]],outputs:{filesUploaded:"filesUploaded"},decls:12,vars:1,consts:[["appDnd","",1,"container",3,"fileDropped"],["type","file","id","fileDropRef","multiple","","accept",".xls,.xlsx,.pdf,.doc,.docx,.ppt,.pptx",3,"change"],["fileDropRef",""],["src","../../../../../assets/img/dnd/ic-upload-file.svg","alt",""],["for","fileDropRef"],[1,"files-list"],["class","single-file",4,"ngFor","ngForOf"],[1,"single-file"],["src","../../../../../assets/img/dnd/ic-file.svg","alt","",2,"height","100%"],[1,"info"],[1,"name"],[1,"size"],[3,"progress"],[1,"delete",3,"click"],["src","../../../../../assets/img/dnd/ic-delete-file.svg","alt",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("fileDropped",function(r){return o.onFileDropped(r)}),e.TgZ(1,"input",1,2),e.NdJ("change",function(r){return o.fileBrowseHandler(r)}),e.qZA(),e._UZ(3,"img",3),e.TgZ(4,"h3"),e._uU(5,"Drag and drop file here"),e.qZA(),e.TgZ(6,"h3"),e._uU(7,"or"),e.qZA(),e.TgZ(8,"label",4),e._uU(9,"Browse for file"),e.qZA()(),e.TgZ(10,"div",5),e.YNc(11,V,10,3,"div",6),e.qZA()),2&t&&(e.xp6(11),e.Q6J("ngForOf",o.files))},dependencies:[p.sg,U,D],styles:[".container[_ngcontent-%COMP%]{width:450px;height:250px;padding:2rem;text-align:center;border:dashed 1px #979797;position:relative;margin:0 auto}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;background-color:#db202f;padding:8px 16px;margin-top:1%;margin-bottom:2%}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30%}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.fileover[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake 1s;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]{padding:.5rem;justify-content:space-between;align-items:center;border:dashed 1px #979797;margin-bottom:1rem;height:100px;display:flex;flex-grow:1}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   img.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff!important}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0;margin-bottom:.25rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%}@keyframes _ngcontent-%COMP%_shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}"]});var h=s(1218),R=s(2032),S=s(8525),B=s(3680);function X(i,t){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.Oqu(o)}}function W(i,t){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.Oqu(o)}}function ee(i,t){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.Oqu(o)}}class b{constructor(t){this.rootFormGroup=t,this.clientIndustries=h.r5,this.campaignobjectives=h.Tj,this.currencies=h.QT,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}b.\u0275fac=function(t){return new(t||b)(e.Y36(n.sg))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-basic-information"]],inputs:{formGroupName:"formGroupName"},decls:48,vars:4,consts:[[3,"formGroup"],[1,"row"],["matInput","","type","text","formControlName","Agency","autocomplete","off"],["matInput","","type","text","formControlName","Client","autocomplete","off"],["formControlName","ClientIndustry"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","CampaignName","autocomplete","off"],["matInput","","formControlName","CampaignOverview","rows","1","autocomplete","off"],["formControlName","CampaignObjective"],["matInput","","formControlName","CampaignObjectiveDetails","rows","1","autocomplete","off"],["matInput","","type","number","formControlName","NumberofRecommendations","autocomplete","off"],["formControlName","Currency"],["matInput","","type","number","formControlName","Budget","autocomplete","off"],[3,"value"]],template:function(t,o){1&t&&(e.ynx(0,0),e.TgZ(1,"div",1)(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Agency"),e.qZA(),e._UZ(5,"input",2),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Client"),e.qZA(),e._UZ(9,"input",3),e.qZA(),e.TgZ(10,"mat-form-field")(11,"mat-label"),e._uU(12,"Client's Industry"),e.qZA(),e.TgZ(13,"mat-select",4),e.YNc(14,X,2,2,"mat-option",5),e.qZA()()(),e.TgZ(15,"div",1)(16,"mat-form-field")(17,"mat-label"),e._uU(18,"Campaign Name"),e.qZA(),e._UZ(19,"input",6),e.qZA(),e.TgZ(20,"mat-form-field")(21,"mat-label"),e._uU(22,"Campaign Overview"),e.qZA(),e._UZ(23,"textarea",7),e.qZA()(),e.TgZ(24,"div",1)(25,"mat-form-field")(26,"mat-label"),e._uU(27,"Campaign Objective"),e.qZA(),e.TgZ(28,"mat-select",8),e.YNc(29,W,2,2,"mat-option",5),e.qZA()(),e.TgZ(30,"mat-form-field")(31,"mat-label"),e._uU(32,"Campaign Objective Details"),e.qZA(),e._UZ(33,"textarea",9),e.qZA()(),e.TgZ(34,"div",1)(35,"mat-form-field")(36,"mat-label"),e._uU(37,"Number of recommendations"),e.qZA(),e._UZ(38,"input",10),e.qZA(),e.TgZ(39,"mat-form-field")(40,"mat-label"),e._uU(41,"Currency"),e.qZA(),e.TgZ(42,"mat-select",11),e.YNc(43,ee,2,2,"mat-option",5),e.qZA()(),e.TgZ(44,"mat-form-field")(45,"mat-label"),e._uU(46,"Approximate Budget"),e.qZA(),e._UZ(47,"input",12),e.qZA()(),e.BQk()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(14),e.Q6J("ngForOf",o.clientIndustries),e.xp6(15),e.Q6J("ngForOf",o.campaignobjectives),e.xp6(14),e.Q6J("ngForOf",o.currencies))},dependencies:[p.sg,R.Nt,f.KE,f.hX,S.gD,B.ey,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u]});var Y=s(5986),E=s(8034);function te(i,t){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}class C{constructor(t){this.rootFormGroup=t,this.briefPlatforms=h.l$,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}function oe(i,t){if(1&i&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function ie(i,t){if(1&i&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function ne(i,t){if(1&i&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function ae(i,t){1&i&&(e.TgZ(0,"div",31),e._uU(1," Less than 10,000 followers "),e.qZA())}function re(i,t){1&i&&(e.TgZ(0,"div",31),e._uU(1," Between 10,000 and 100,000 followers "),e.qZA())}function se(i,t){1&i&&(e.TgZ(0,"div",31),e._uU(1," Between 100,000 and 1,000,000 followers "),e.qZA())}function le(i,t){1&i&&(e.TgZ(0,"div",31),e._uU(1," More than 1,000,000 followers "),e.qZA())}C.\u0275fac=function(t){return new(t||C)(e.Y36(n.sg))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-campaign-overview"]],inputs:{formGroupName:"formGroupName"},decls:49,vars:6,consts:[[3,"formGroup"],[1,"row"],["matInput","","formControlName","CampaignStartDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","CampaignEndDate",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","CampaignMessagePhaseOne","rows","1","autocomplete","off"],["matInput","","formControlName","CampaignMessagePhaseTwo","rows","1","autocomplete","off"],["matInput","","formControlName","CampaignMessagePhaseThree","rows","1","autocomplete","off"],["formControlName","ContentDeliverables","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","BrandExclusivityDurationinDays","autocomplete","off"],[1,"checkbox-container"],["color","primary","formControlName","VideoProduction"],["color","primary","formControlName","VideoEditing"],[3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Campaign Launch Date"),e.qZA(),e._UZ(5,"input",2)(6,"mat-datepicker-toggle",3)(7,"mat-datepicker",null,4),e.qZA(),e.TgZ(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Campaign End Date"),e.qZA(),e._UZ(12,"input",5)(13,"mat-datepicker-toggle",3)(14,"mat-datepicker",null,6),e.qZA()(),e.TgZ(16,"div",1)(17,"mat-form-field")(18,"mat-label"),e._uU(19,"Campaign Message Phase 1"),e.qZA(),e._UZ(20,"textarea",7),e.qZA(),e.TgZ(21,"mat-form-field")(22,"mat-label"),e._uU(23,"Campaign Message Phase 2"),e.qZA(),e._UZ(24,"textarea",8),e.qZA(),e.TgZ(25,"mat-form-field")(26,"mat-label"),e._uU(27,"Campaign Message Phase 3"),e.qZA(),e._UZ(28,"textarea",9),e.qZA()(),e.TgZ(29,"div",1)(30,"h2"),e._uU(31,"Content Deliverables"),e.qZA(),e.TgZ(32,"mat-form-field")(33,"mat-label"),e._uU(34," Platforms "),e.qZA(),e.TgZ(35,"mat-select",10),e.YNc(36,te,2,2,"mat-option",11),e.qZA()(),e.TgZ(37,"mat-form-field")(38,"mat-label"),e._uU(39,"Brand Exclusivity Duration in Days"),e.qZA(),e._UZ(40,"input",12),e.qZA()(),e.TgZ(41,"div")(42,"h2"),e._uU(43,"Video"),e.qZA(),e.TgZ(44,"div",13)(45,"mat-checkbox",14),e._uU(46,"Production"),e.qZA(),e.TgZ(47,"mat-checkbox",15),e._uU(48,"Editing"),e.qZA()()()()),2&t){const a=e.MAs(8),r=e.MAs(15);e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(23),e.Q6J("ngForOf",o.briefPlatforms)}},dependencies:[p.sg,R.Nt,f.KE,f.hX,f.R9,S.gD,B.ey,Y.oG,E.Mq,E.hl,E.nW,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u],styles:[".mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}"]});class Z{constructor(t){this.rootFormGroup=t,this.clientIndustries=h.r5,this.countries=h.hW,this.showInfo1=!1,this.showInfo2=!1,this.showInfo3=!1,this.showInfo4=!1,this.showInfo5=!1,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}function ce(i,t){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function me(i,t){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function de(i,t){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function fe(i,t){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}Z.\u0275fac=function(t){return new(t||Z)(e.Y36(n.sg))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["app-influencer-details"]],inputs:{formGroupName:"formGroupName"},decls:85,vars:8,consts:[[3,"formGroup"],[1,"row"],["formGroupName","InfluencerAgeRange",1,"checkbox-container"],["color","primary","formControlName","AgeGroup1"],["color","primary","formControlName","AgeGroup2"],["color","primary","formControlName","AgeGroup3"],["color","primary","formControlName","AgeGroup4"],["color","primary","formControlName","AgeGroup5"],["formControlName","InfluencerLocation","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","InfluencerCity","autocomplete","off"],["formControlName","InfluencerNationality","multiple",""],["formControlName","InfluencerInterest","multiple",""],["formControlName","InfluencerGender"],["value","Male"],["value","Female"],["value","Both"],["matInput","","formControlName","InfluencerNotes","rows","1","autocomplete","off"],["matInput","","type","text","formControlName","SimilarProfileLink","autocomplete","off"],["formGroupName","InfluencerNumberOfFollowers",1,"checkbox-container",2,"flex","0.5"],[1,"hoverable-text",3,"mouseover","mouseout"],["color","primary","formControlName","Nano"],["class","info-box",4,"ngIf"],["color","primary","formControlName","Micro"],["color","primary","formControlName","Macro"],["color","primary","formControlName","Mega"],["color","primary","formControlName","Celebrity"],[2,"flex","1"],[2,"width","50rem"],["matInput","","type","text","formControlName","NoteForNumberOfFollowers","autocomplete","off"],[3,"value"],[1,"info-box"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2"),e._uU(3,"Influencer Age Range"),e.qZA(),e.TgZ(4,"div",2)(5,"mat-checkbox",3),e._uU(6," 12 - 17"),e.qZA(),e.TgZ(7,"mat-checkbox",4),e._uU(8," 18 - 24"),e.qZA(),e.TgZ(9,"mat-checkbox",5),e._uU(10," 25 - 34"),e.qZA(),e.TgZ(11,"mat-checkbox",6),e._uU(12," 35 - 49"),e.qZA(),e.TgZ(13,"mat-checkbox",7),e._uU(14," 50 + "),e.qZA()()(),e._UZ(15,"hr"),e.TgZ(16,"div",1)(17,"h2"),e._uU(18,"Influencer Location, Nationality, Gender, and Interests"),e.qZA(),e.TgZ(19,"mat-form-field")(20,"mat-label"),e._uU(21,"Influencer Location"),e.qZA(),e.TgZ(22,"mat-select",8),e.YNc(23,oe,2,2,"mat-option",9),e.qZA()(),e.TgZ(24,"mat-form-field")(25,"mat-label"),e._uU(26,"Influencer City"),e.qZA(),e._UZ(27,"input",10),e.qZA(),e.TgZ(28,"mat-form-field")(29,"mat-label"),e._uU(30,"Influencer Nationality"),e.qZA(),e.TgZ(31,"mat-select",11),e.YNc(32,ie,2,2,"mat-option",9),e.qZA()(),e.TgZ(33,"mat-form-field")(34,"mat-label"),e._uU(35,"Influencer Interests"),e.qZA(),e.TgZ(36,"mat-select",12),e.YNc(37,ne,2,2,"mat-option",9),e.qZA()()(),e.TgZ(38,"div",1)(39,"mat-form-field")(40,"mat-label"),e._uU(41,"Influencer Gender"),e.qZA(),e.TgZ(42,"mat-select",13)(43,"mat-option",14),e._uU(44," Male"),e.qZA(),e.TgZ(45,"mat-option",15),e._uU(46," Female"),e.qZA(),e.TgZ(47,"mat-option",16),e._uU(48," Both"),e.qZA()()(),e.TgZ(49,"mat-form-field")(50,"mat-label"),e._uU(51,"Influencer Notes"),e.qZA(),e._UZ(52,"textarea",17),e.qZA(),e.TgZ(53,"mat-form-field")(54,"mat-label"),e._uU(55,"Similar Profile Handle (Link) "),e.qZA(),e._UZ(56,"input",18),e.qZA()(),e._UZ(57,"hr"),e.TgZ(58,"div",1)(59,"h2"),e._uU(60,"Number of Followers"),e.qZA(),e.TgZ(61,"div",19)(62,"div",20),e.NdJ("mouseover",function(){return o.showInfo1=!0})("mouseout",function(){return o.showInfo1=!1}),e.TgZ(63,"mat-checkbox",21),e._uU(64," Nano"),e.qZA(),e.YNc(65,ae,2,0,"div",22),e.qZA(),e.TgZ(66,"div",20),e.NdJ("mouseover",function(){return o.showInfo2=!0})("mouseout",function(){return o.showInfo2=!1}),e.TgZ(67,"mat-checkbox",23),e._uU(68," Micro"),e.qZA(),e.YNc(69,re,2,0,"div",22),e.qZA(),e.TgZ(70,"div",20),e.NdJ("mouseover",function(){return o.showInfo3=!0})("mouseout",function(){return o.showInfo3=!1}),e.TgZ(71,"mat-checkbox",24),e._uU(72," Macro "),e.qZA(),e.YNc(73,se,2,0,"div",22),e.qZA(),e.TgZ(74,"div",20),e.NdJ("mouseover",function(){return o.showInfo4=!0})("mouseout",function(){return o.showInfo4=!1}),e.TgZ(75,"mat-checkbox",25),e._uU(76," Mega "),e.qZA(),e.YNc(77,le,2,0,"div",22),e.qZA(),e.TgZ(78,"mat-checkbox",26),e._uU(79," Celebrity"),e.qZA()(),e.TgZ(80,"div",27)(81,"mat-form-field",28)(82,"mat-label"),e._uU(83,"Note for number of followers "),e.qZA(),e._UZ(84,"input",29),e.qZA()()()()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(23),e.Q6J("ngForOf",o.countries),e.xp6(9),e.Q6J("ngForOf",o.countries),e.xp6(5),e.Q6J("ngForOf",o.clientIndustries),e.xp6(28),e.Q6J("ngIf",o.showInfo1),e.xp6(4),e.Q6J("ngIf",o.showInfo2),e.xp6(4),e.Q6J("ngIf",o.showInfo3),e.xp6(4),e.Q6J("ngIf",o.showInfo4))},dependencies:[p.sg,p.O5,R.Nt,f.KE,f.hX,S.gD,B.ey,Y.oG,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,n.x0],styles:[".row[_ngcontent-%COMP%]{color:#fff!important}.checkbox-container[_ngcontent-%COMP%]{color:#fff}  .mat-mdc-checkbox label{color:#fff!important;cursor:pointer}.mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}"]});class A{constructor(t){this.rootFormGroup=t,this.countries=h.hW,this.clientIndustries=h.r5,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}A.\u0275fac=function(t){return new(t||A)(e.Y36(n.sg))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-audience-details"]],inputs:{formGroupName:"formGroupName"},decls:53,vars:5,consts:[[3,"formGroup"],[1,"row"],["formGroupName","AudienceAgeRange",1,"checkbox-container"],["color","primary","formControlName","AgeGroup1"],["color","primary","formControlName","AgeGroup2"],["color","primary","formControlName","AgeGroup3"],["color","primary","formControlName","AgeGroup4"],["color","primary","formControlName","AgeGroup5"],["formControlName","AudienceLocation","multiple",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","AudienceNationality","multiple",""],["formControlName","AudienceGender"],["value","Male"],["value","Female"],["value","Both"],["formControlName","PrimaryAudienceInterest","multiple",""],["formControlName","SecondaryAudienceInterest","multiple",""],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2"),e._uU(3,"Audience Age Range"),e.qZA(),e.TgZ(4,"div",2)(5,"mat-checkbox",3),e._uU(6," 12 - 17"),e.qZA(),e.TgZ(7,"mat-checkbox",4),e._uU(8," 18 - 24"),e.qZA(),e.TgZ(9,"mat-checkbox",5),e._uU(10," 25 - 34"),e.qZA(),e.TgZ(11,"mat-checkbox",6),e._uU(12," 35 - 49"),e.qZA(),e.TgZ(13,"mat-checkbox",7),e._uU(14," 50 + "),e.qZA()()(),e._UZ(15,"hr"),e.TgZ(16,"div",1)(17,"h2"),e._uU(18,"Audience Location, Nationality and Gender"),e.qZA(),e.TgZ(19,"mat-form-field")(20,"mat-label"),e._uU(21,"Audience Location"),e.qZA(),e.TgZ(22,"mat-select",8),e.YNc(23,ce,2,2,"mat-option",9),e.qZA()(),e.TgZ(24,"mat-form-field")(25,"mat-label"),e._uU(26,"Audience Nationality"),e.qZA(),e.TgZ(27,"mat-select",10),e.YNc(28,me,2,2,"mat-option",9),e.qZA()(),e.TgZ(29,"mat-form-field")(30,"mat-label"),e._uU(31," Audience Gender"),e.qZA(),e.TgZ(32,"mat-select",11)(33,"mat-option",12),e._uU(34," Male"),e.qZA(),e.TgZ(35,"mat-option",13),e._uU(36," Female"),e.qZA(),e.TgZ(37,"mat-option",14),e._uU(38," Both"),e.qZA()()()(),e._UZ(39,"hr"),e.TgZ(40,"div",1)(41,"h2"),e._uU(42,"Audience Primary and Seconadry Interest"),e.qZA(),e.TgZ(43,"mat-form-field")(44,"mat-label"),e._uU(45,"Primary Audience Interest"),e.qZA(),e.TgZ(46,"mat-select",15),e.YNc(47,de,2,2,"mat-option",9),e.qZA()(),e.TgZ(48,"mat-form-field")(49,"mat-label"),e._uU(50,"Secondary Audience Interest"),e.qZA(),e.TgZ(51,"mat-select",16),e.YNc(52,fe,2,2,"mat-option",9),e.qZA()()()()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(23),e.Q6J("ngForOf",o.countries),e.xp6(5),e.Q6J("ngForOf",o.countries),e.xp6(19),e.Q6J("ngForOf",o.clientIndustries),e.xp6(5),e.Q6J("ngForOf",o.clientIndustries))},dependencies:[p.sg,f.KE,f.hX,S.gD,B.ey,Y.oG,n._Y,n.JJ,n.JL,n.sg,n.u,n.x0],styles:[".mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}"]});class v{constructor(t){this.rootFormGroup=t,this.formGroupName=""}ngOnInit(){this.form=this.rootFormGroup.control.get(this.formGroupName)}}v.\u0275fac=function(t){return new(t||v)(e.Y36(n.sg))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-department-details"]],inputs:{formGroupName:"formGroupName"},decls:41,vars:1,consts:[[3,"formGroup"],[1,"row"],[2,"width","50rem"],["matInput","","type","text","formControlName","ConfirmedInfluencerHandles","autocomplete","off"],["matInput","","type","text","formControlName","PreviousBrandAmbassadorsName","autocomplete","off"],["formControlName","ItpDepartment"],["value","UAE"],["value","KSA"],["value","Originals"],["value","Gaming"],["matInput","","type","text","formControlName","KPIs","autocomplete","off"],[1,"checkbox-container"],["color","primary","formControlName","Strategy"],["color","primary","formControlName","Concept"],["color","primary","formControlName","Event"],["color","primary","formControlName","Performance"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2"),e._uU(3,"Confirmed and Previous Influencers"),e.qZA(),e.TgZ(4,"mat-form-field",2)(5,"mat-label"),e._uU(6,"Confirmed Influencers Handles "),e.qZA(),e._UZ(7,"input",3),e.qZA(),e.TgZ(8,"mat-form-field",2)(9,"mat-label"),e._uU(10,"Previous Influncer Partners "),e.qZA(),e._UZ(11,"input",4),e.qZA()(),e._UZ(12,"hr"),e.TgZ(13,"div",1)(14,"mat-form-field",2)(15,"mat-label"),e._uU(16,"ITP Department"),e.qZA(),e.TgZ(17,"mat-select",5)(18,"mat-option",6),e._uU(19," UAE "),e.qZA(),e.TgZ(20,"mat-option",7),e._uU(21," KSA "),e.qZA(),e.TgZ(22,"mat-option",8),e._uU(23," Originals"),e.qZA(),e.TgZ(24,"mat-option",9),e._uU(25," Gaming "),e.qZA()()(),e.TgZ(26,"mat-form-field",2)(27,"mat-label"),e._uU(28,"KPIs"),e.qZA(),e._UZ(29,"input",10),e.qZA()(),e.TgZ(30,"div",1)(31,"div",11)(32,"div",11)(33,"mat-checkbox",12),e._uU(34,"Strategy required"),e.qZA(),e.TgZ(35,"mat-checkbox",13),e._uU(36,"Concept required"),e.qZA(),e.TgZ(37,"mat-checkbox",14),e._uU(38,"Event required"),e.qZA(),e.TgZ(39,"mat-checkbox",15),e._uU(40,"Performance Marketing required"),e.qZA()()()()()),2&t&&e.Q6J("formGroup",o.form)},dependencies:[R.Nt,f.KE,f.hX,S.gD,B.ey,Y.oG,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: white;--mdc-checkbox-disabled-unselected-icon-color: white;--mdc-checkbox-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-icon-color: #4789A1;--mdc-checkbox-selected-hover-icon-color: #4789A1;--mdc-checkbox-selected-icon-color: #4789A1;--mdc-checkbox-selected-pressed-icon-color: #4789A1;--mdc-checkbox-unselected-focus-icon-color: white;--mdc-checkbox-unselected-hover-icon-color: white;--mdc-checkbox-unselected-icon-color: white;--mdc-checkbox-unselected-pressed-icon-color: white;--mdc-checkbox-selected-focus-state-layer-color: #4789A1;--mdc-checkbox-selected-hover-state-layer-color: #4789A1;--mdc-checkbox-selected-pressed-state-layer-color: #4789A1;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}"]});class q{constructor(t,o,a,r,c,d,G){this.formBuilder=t,this.userService=o,this.notificationService=a,this.salesService=r,this.router=c,this.toastrService=d,this.fileService=G,this.userId=this.userService.getID(),this.path=x.m,this.headOfKSA=15,this.headofUAE=23,this.progress=0,this.message="",this.filesToUpload=[],this.fileName="Select File",this.userService.getUserNameById(this.userId).subscribe(m=>{this.userName=m}),this.initializeElements()}initializeElements(){this.newForm=this.formBuilder.group({basicInfo:this.formBuilder.group({Agency:["",[n.kI.required]],Client:["",[n.kI.required]],ClientIndustry:["",[n.kI.required]],CampaignName:["",[n.kI.required]],CampaignOverview:[""],CampaignObjective:[""],CampaignObjectiveDetails:[""],NumberofRecommendations:["",[n.kI.required]],Currency:[""],Budget:["",[n.kI.required]]}),campaignOverview:this.formBuilder.group({CampaignStartDate:["",[n.kI.required]],CampaignEndDate:["",[n.kI.required]],CampaignMessagePhaseOne:[""],CampaignMessagePhaseTwo:[""],CampaignMessagePhaseThree:[""],ContentDeliverables:[""],BrandExclusivityDurationinDays:["",[n.kI.required]],VideoProduction:new n.NI(!1),VideoEditing:new n.NI(!1)}),influencerDetails:this.formBuilder.group({InfluencerAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),InfluencerLocation:[""],InfluencerCity:[""],InfluencerNationality:[""],InfluencerGender:[""],InfluencerNotes:[""],SimilarProfileLink:[""],InfluencerInterest:[""],InfluencerNumberOfFollowers:new n.cw({Nano:new n.NI(!1),Micro:new n.NI(!1),Macro:new n.NI(!1),Mega:new n.NI(!1),Celebrity:new n.NI(!1)}),NoteForNumberOfFollowers:[""]}),audienceDetails:this.formBuilder.group({AudienceAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),AudienceLocation:[""],AudienceNationality:[""],AudienceGender:[""],PrimaryAudienceInterest:[""],SecondaryAudienceInterest:[""]}),departmentDetails:this.formBuilder.group({ConfirmedInfluencerHandles:[""],PreviousBrandAmbassadorsName:[""],Performance:new n.NI(!1),Event:new n.NI(!1),Concept:new n.NI(!1),Strategy:new n.NI(!1),ItpDepartment:["",[n.kI.required]],KPIs:[""]})})}submitForm(){const t=this.newForm.value.departmentDetails.ItpDepartment,o=this.processFormGroups(this.newForm);o.CreatedbyID=this.userService.getID(),o.Ready=!1,o.ResultsViewed=!1,this.salesService.createBrief({...o}).subscribe(a=>{if(this.newBrief=a,this.uploadFiles(this.newBrief.id),"Originals"==t||"UAE"==t){let r=this.headofUAE,c={message:"New Sales Brief has been created by "+this.userName.name,link:`${this.path.viewBrief+this.newBrief.id}`};this.notificationService.createNotification(r,c).subscribe(d=>{})}else if("KSA"==t||"Gaming"==t){let r=this.headOfKSA,c={message:"New Sales Brief has been created by "+this.userName.name,link:`${this.path.viewBrief+this.newBrief.id}`};this.notificationService.createNotification(r,c).subscribe(()=>{})}}),this.toastrService.success("Brief submitted successfully!"),this.router.navigate([this.path.forms])}processFormGroups(t){let o={};return t instanceof n.cw&&Object.keys(t.controls)?.forEach(a=>{const r=t.get(a);if(console.log(r?.value),"InfluencerAgeRange"===a||"AudienceAgeRange"===a||"InfluencerNumberOfFollowers"===a)o[a]=this.processAgeRangeGroup(r);else if(r instanceof n.cw)o={...o,...this.processFormGroups(r)};else if(r instanceof n.NI)if(Array.isArray(r?.value)){const c=(r?.value).map(d=>d.toString()).join(", ");o[a]=c}else o[a]=r?.value}),o}processAgeRangeGroup(t){return Object.keys(t.controls).filter(a=>!0===t.get(a)?.value).join(", ")}transferedFiles(t){this.filesToUpload=t}uploadFiles(t){for(let o=0;o<this.filesToUpload.length;o++)this.fileService.uploadFile(this.filesToUpload[o],t,this.userId,H.yE.SALES).subscribe(a=>{console.log(a),this.toastrService.success(this.filesToUpload[o].name+" uploaded successfully!")},a=>{console.log(a),this.progress=0,this.toastrService.error("Could not upload the file:"+this.filesToUpload[o].name)})}}q.\u0275fac=function(t){return new(t||q)(e.Y36(n.qu),e.Y36(N.K),e.Y36($.g),e.Y36(T.M),e.Y36(g.F0),e.Y36(J._W),e.Y36(Q.I))},q.\u0275cmp=e.Xpm({type:q,selectors:[["app-new-sales-brief"]],decls:20,vars:2,consts:[[1,"form-container"],[2,"align-content","center","text-align","center","font-size","300%","margin-top","2%","margin-bottom","3%"],["autocomplete","off",3,"formGroup","ngSubmit"],["formGroupName","basicInfo"],["formGroupName","campaignOverview"],["formGroupName","influencerDetails"],["formGroupName","audienceDetails"],["formGroupName","departmentDetails"],[3,"filesUploaded"],["mat-raised-button","","color","primary","type","submit",2,"margin-bottom","2%","margin-top","2%","color","white",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"New Sales Brief"),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return o.submitForm()}),e._UZ(4,"app-basic-information",3)(5,"app-campaign-overview",4)(6,"hr")(7,"app-influencer-details",5)(8,"hr")(9,"app-audience-details",6)(10,"hr")(11,"app-department-details",7)(12,"hr"),e.TgZ(13,"mat-label")(14,"h2"),e._uU(15," Upload Files "),e.qZA()(),e.TgZ(16,"app-upload-files",8),e.NdJ("filesUploaded",function(r){return o.transferedFiles(r)}),e.qZA(),e._UZ(17,"hr"),e.TgZ(18,"button",9),e._uU(19,"Submit Brief Form"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",o.newForm),e.xp6(15),e.Q6J("disabled",!o.newForm.valid))},dependencies:[f.hX,M.lW,n._Y,n.JL,n.sg,n.x0,_,b,C,Z,A,v],styles:["ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{color:#fff}mat-label[_ngcontent-%COMP%]{color:#fff;margin-right:2%}.progress-bar[_ngcontent-%COMP%]{padding:0}.progress[_ngcontent-%COMP%]{width:50px}#fileInput[_ngcontent-%COMP%]{position:absolute;cursor:pointer;z-index:10;opacity:0;height:100%;left:0;top:0}.mat-toolbar-single-row[_ngcontent-%COMP%]{height:auto!important;background:transparent;padding:0}.mat-toolbar-single-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.message[_ngcontent-%COMP%]{background-color:#ddd;padding:15px;color:#333;border:#aaa solid 1px;border-radius:4px;margin-bottom:10px}.container[_ngcontent-%COMP%]{width:100vw;margin:20px auto}"]});var z=s(1921),pe=s(7630),ue=s(7257);function ge(i,t){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Oqu(o.budgetSheet.originalname)}}function he(i,t){1&i&&e._UZ(0,"td")}function _e(i,t){if(1&i){const o=e.EpF();e.TgZ(0,"td")(1,"button",6),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.downloadFilexlsx(r.budgetSheet.id,r.budgetSheet.originalname))}),e._uU(2," Download "),e.qZA()()}}function be(i,t){1&i&&e._UZ(0,"td")}function Ce(i,t){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Oqu(o.presentation.originalname)}}function Ze(i,t){1&i&&e._UZ(0,"td")}function Ae(i,t){if(1&i){const o=e.EpF();e.TgZ(0,"td")(1,"button",6),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.downloadFilePPTX(r.presentation.id,r.presentation.originalname))}),e._uU(2," Download "),e.qZA()()}}function ve(i,t){1&i&&e._UZ(0,"td")}function Ie(i,t){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Oqu(o.pdf.originalname)}}function ye(i,t){1&i&&e._UZ(0,"td")}function we(i,t){if(1&i){const o=e.EpF();e.TgZ(0,"td")(1,"button",6),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.downloadFilePDF(r.pdf.id,r.pdf.originalname))}),e._uU(2," Download "),e.qZA()()}}function xe(i,t){1&i&&e._UZ(0,"td")}class k{constructor(t,o,a,r,c){this.activatedRoute=t,this.fileService=o,this.salesService=a,this.userService=r,this.taskService=c}ngOnInit(){this.loadFiles()}loadFiles(){this.activatedRoute.params.subscribe(t=>{this.brief_id=t.id,this.salesService.getSalesBrief(this.brief_id).subscribe(o=>{this.brief=o.data,console.log(this.brief),this.budgetSheetId=this.brief.BudgetSheetId,this.getBudgetSheet(this.budgetSheetId),this.presentationId=this.brief.PresentationId,this.getPresentation(this.presentationId),this.pdfId=this.brief.PdfId,this.getPDF(this.pdfId)}),this.salesService.getSalesBriefWithFiles(this.brief_id).subscribe(o=>{this.brief=o,this.getSalesPerson(this.brief.data.CreatedbyID),this.getAssignedUser(this.brief.data.id)})})}getSalesPerson(t){this.userService.getUserNameById(t).subscribe(o=>{this.salesperson=o.name})}getAssignedUser(t){this.taskService.getTaskByBriefId(t).subscribe(o=>{this.task=o.data[0],this.userService.getUserNameById(this.task?.assigned_to).subscribe(a=>{this.assignedUser=a?.name})})}getBudgetSheet(t){this.fileService.getFile(t).subscribe(o=>{this.budgetSheet=o.data})}getPresentation(t){this.fileService.getFile(t).subscribe(o=>{this.presentation=o.data})}getPDF(t){this.fileService.getFile(t).subscribe(o=>{console.log(o),this.pdf=o.data})}downloadFilePPTX(t,o){this.fileService.downloadFile(t,o).subscribe(a=>{const r=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}),c=window.URL.createObjectURL(r);window.open(c)})}downloadFilexlsx(t,o){this.fileService.downloadFile(t,o).subscribe(a=>{const r=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=window.URL.createObjectURL(r);window.open(c)})}downloadFilePDF(t,o){this.fileService.downloadFile(t,o).subscribe(a=>{const r=new Blob([a],{type:"application/pdf"}),c=window.URL.createObjectURL(r);window.open(c)})}}k.\u0275fac=function(t){return new(t||k)(e.Y36(g.gz),e.Y36(Q.I),e.Y36(T.M),e.Y36(N.K),e.Y36(z.M))},k.\u0275cmp=e.Xpm({type:k,selectors:[["app-ready-briefs-id"]],decls:33,vars:15,consts:[[3,"assignedUser","salesperson"],[1,"row"],[1,"my-table"],[1,"centered"],[4,"ngIf"],[3,"brief"],["mat-raised-button","",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-person-info",0),e.TgZ(2,"div",1)(3,"table",2)(4,"tr")(5,"th",3),e._uU(6,"File Type"),e.qZA(),e.TgZ(7,"th",3),e._uU(8,"File Name"),e.qZA(),e.TgZ(9,"th",3),e._uU(10,"Download"),e.qZA()(),e.TgZ(11,"tr")(12,"td"),e._uU(13,"Excel Sheet"),e.qZA(),e.YNc(14,ge,2,1,"td",4),e.YNc(15,he,1,0,"td",4),e.YNc(16,_e,3,0,"td",4),e.YNc(17,be,1,0,"td",4),e.qZA(),e.TgZ(18,"tr")(19,"td"),e._uU(20,"Presentation"),e.qZA(),e.YNc(21,Ce,2,1,"td",4),e.YNc(22,Ze,1,0,"td",4),e.YNc(23,Ae,3,0,"td",4),e.YNc(24,ve,1,0,"td",4),e.qZA(),e.TgZ(25,"tr")(26,"td"),e._uU(27,"PDF File"),e.qZA(),e.YNc(28,Ie,2,1,"td",4),e.YNc(29,ye,1,0,"td",4),e.YNc(30,we,3,0,"td",4),e.YNc(31,xe,1,0,"td",4),e.qZA()()(),e._UZ(32,"app-all-info",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("assignedUser",o.assignedUser)("salesperson",o.salesperson),e.xp6(13),e.Q6J("ngIf",o.budgetSheet),e.xp6(1),e.Q6J("ngIf",!o.budgetSheet),e.xp6(1),e.Q6J("ngIf",o.budgetSheet),e.xp6(1),e.Q6J("ngIf",!o.budgetSheet),e.xp6(4),e.Q6J("ngIf",o.presentation),e.xp6(1),e.Q6J("ngIf",!o.presentation),e.xp6(1),e.Q6J("ngIf",o.presentation),e.xp6(1),e.Q6J("ngIf",!o.presentation),e.xp6(4),e.Q6J("ngIf",o.pdf),e.xp6(1),e.Q6J("ngIf",!o.pdf),e.xp6(1),e.Q6J("ngIf",o.pdf),e.xp6(1),e.Q6J("ngIf",!o.presentation),e.xp6(1),e.Q6J("brief",o.brief))},dependencies:[p.O5,M.lW,pe.L,ue.A],styles:[".my-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px;overflow:hidden;max-width:100%}.my-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;max-width:100%;text-align:center;color:#fff}.my-table[_ngcontent-%COMP%]   th.centered[_ngcontent-%COMP%]{background-color:#4789a1;max-width:100%;color:#fff;font-weight:700;padding:10px;text-align:left;border:1px solid #ddd;text-align:center}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:1%;padding-left:1%;overflow-x:hidden;max-width:100%}"]});var I=s(3365),u=s(3566),l=s(5313);function Ne(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Campaign Name"),e.qZA())}function Te(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.Oqu(o.CampaignName)}}function Ue(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Agency"),e.qZA())}function De(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.Oqu(o.Agency)}}function Se(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Client"),e.qZA())}function Be(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.Oqu(o.Client)}}function qe(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Created At"),e.qZA())}function ke(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.createdAt)," ")}}function Oe(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1,"Updated At"),e.qZA())}function Fe(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.updatedAt)," ")}}function Pe(i,t){1&i&&(e.TgZ(0,"th",17),e._uU(1,"Action"),e.qZA())}function Ge(i,t){if(1&i){const o=e.EpF();e.TgZ(0,"td",16)(1,"button",18),e.NdJ("click",function(){const c=e.CHM(o).$implicit,d=e.oxw();return e.KtG(d.viewFiles(c.id))}),e._uU(2," View "),e.qZA()()}}function Me(i,t){1&i&&e._UZ(0,"tr",19)}function Re(i,t){1&i&&e._UZ(0,"tr",20)}const Ye=function(){return[3,5,10,25,100]};class O{constructor(t,o,a){this.salesService=t,this.router=o,this.userService=a,this.path=x.m,this.user_id=this.userService.getID(),this.displayedColumns=["CampaignName","Agency","Client","CreatedAt","UpdatedAt","Action"]}ngOnInit(){this.getReadyBriefs()}getReadyBriefs(){this.salesService.getBriefByCreatedbyId(this.user_id).subscribe(t=>{this.briefs=t,this.dataSource=new l.by(this.briefs.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}viewFiles(t){this.salesService.viewBriefBySales(t).subscribe(o=>{}),this.router.navigate([`${this.path.readyBriefs+t}`])}}O.\u0275fac=function(t){return new(t||O)(e.Y36(T.M),e.Y36(g.F0),e.Y36(N.K))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-ready-briefs"]],viewQuery:function(t,o){if(1&t&&(e.Gf(I.NW,5),e.Gf(u.YE,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.paginator=a.first),e.iGM(a=e.CRH())&&(o.sort=a.first)}},decls:24,vars:8,consts:[[2,"position","relative"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","CampaignName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Agency"],["matColumnDef","Client"],["matColumnDef","CreatedAt"],["matColumnDef","UpdatedAt"],["matColumnDef","Action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-raised-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e.ynx(3,3),e.YNc(4,Ne,2,0,"th",4),e.YNc(5,Te,2,1,"td",5),e.BQk(),e.ynx(6,6),e.YNc(7,Ue,2,0,"th",4),e.YNc(8,De,2,1,"td",5),e.BQk(),e.ynx(9,7),e.YNc(10,Se,2,0,"th",4),e.YNc(11,Be,2,1,"td",5),e.BQk(),e.ynx(12,8),e.YNc(13,qe,2,0,"th",4),e.YNc(14,ke,3,3,"td",5),e.BQk(),e.ynx(15,9),e.YNc(16,Oe,2,0,"th",4),e.YNc(17,Fe,3,3,"td",5),e.BQk(),e.ynx(18,10),e.YNc(19,Pe,2,0,"th",11),e.YNc(20,Ge,3,0,"td",5),e.BQk(),e.YNc(21,Me,1,0,"tr",12),e.YNc(22,Re,1,0,"tr",13),e.qZA(),e._UZ(23,"mat-paginator",14),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",100)("pageSize",5)("pageSizeOptions",e.DdM(7,Ye)))},dependencies:[M.lW,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,I.NW,u.YE,u.nU,p.uU],styles:[".search-container[_ngcontent-%COMP%]{padding-top:2%;padding-bottom:2%;padding-left:1%;position:absolute;top:5;left:0;right:0;z-index:1}.table-container[_ngcontent-%COMP%]{padding-top:1%;overflow-y:scroll;max-height:auto;padding-left:2%}table[_ngcontent-%COMP%]{width:100%}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#888;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#555}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}"]});var K=s(617);function Je(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1," Campaign Name "),e.qZA())}function Qe(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.hij(" ",o.CampaignName," ")}}function Ee(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1," Agency "),e.qZA())}function je(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.hij(" ",o.Agency," ")}}function Le(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1," Client "),e.qZA())}function He(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.hij(" ",o.Client," ")}}function $e(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1," Created At "),e.qZA())}function ze(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.createdAt)," ")}}function Ke(i,t){1&i&&(e.TgZ(0,"th",15),e._uU(1," Last Edited "),e.qZA())}function Ve(i,t){if(1&i&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.updatedAt)," ")}}function Xe(i,t){1&i&&(e.TgZ(0,"th",17),e._uU(1," Action "),e.qZA())}function We(i,t){if(1&i&&(e.TgZ(0,"td",16)(1,"button",18)(2,"mat-icon"),e._uU(3,"remove_red_eye"),e.qZA()()()),2&i){const o=t.$implicit,a=e.oxw();e.xp6(1),e.s9C("routerLink",a.path.sentBriefs+o.id)}}function et(i,t){1&i&&e._UZ(0,"tr",19)}function tt(i,t){1&i&&e._UZ(0,"tr",20)}const ot=function(){return[3,5,10,25,100]};class F{constructor(t,o){this.userService=t,this.salesService=o,this.path=x.m,this.user_id=this.userService.getID(),this.displayedColumns=["CampaignName","Agency","Client","CreatedAt","UpdatedAt","Action"]}ngOnInit(){this.getSentBriefs()}getSentBriefs(){this.salesService.viewMyBriefs(this.user_id).subscribe(t=>{this.dataSource=new l.by(t.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}}F.\u0275fac=function(t){return new(t||F)(e.Y36(N.K),e.Y36(T.M))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-sent-briefs"]],viewQuery:function(t,o){if(1&t&&(e.Gf(I.NW,5),e.Gf(u.YE,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.paginator=a.first),e.iGM(a=e.CRH())&&(o.sort=a.first)}},decls:24,vars:8,consts:[[2,"position","relative"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","CampaignName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Agency"],["matColumnDef","Client"],["matColumnDef","CreatedAt"],["matColumnDef","UpdatedAt"],["matColumnDef","Action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"icon-btn",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e.ynx(3,3),e.YNc(4,Je,2,0,"th",4),e.YNc(5,Qe,2,1,"td",5),e.BQk(),e.ynx(6,6),e.YNc(7,Ee,2,0,"th",4),e.YNc(8,je,2,1,"td",5),e.BQk(),e.ynx(9,7),e.YNc(10,Le,2,0,"th",4),e.YNc(11,He,2,1,"td",5),e.BQk(),e.ynx(12,8),e.YNc(13,$e,2,0,"th",4),e.YNc(14,ze,3,3,"td",5),e.BQk(),e.ynx(15,9),e.YNc(16,Ke,2,0,"th",4),e.YNc(17,Ve,3,3,"td",5),e.BQk(),e.ynx(18,10),e.YNc(19,Xe,2,0,"th",11),e.YNc(20,We,4,1,"td",5),e.BQk(),e.YNc(21,et,1,0,"tr",12),e.YNc(22,tt,1,0,"tr",13),e.qZA(),e._UZ(23,"mat-paginator",14),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",100)("pageSize",10)("pageSizeOptions",e.DdM(7,ot)))},dependencies:[g.rH,K.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,I.NW,u.YE,u.nU,p.uU],styles:[".table-container[_ngcontent-%COMP%]{padding-top:1%;overflow-y:scroll;max-height:auto;padding-left:2%}"]});var it=s(3762);function nt(i,t){1&i&&(e.TgZ(0,"th",21),e._uU(1,"ID"),e.qZA())}function at(i,t){if(1&i&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.Oqu(o.id)}}function rt(i,t){1&i&&(e.TgZ(0,"th",21),e._uU(1,"File Name"),e.qZA())}function st(i,t){if(1&i&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.Oqu(o.originalname)}}function lt(i,t){1&i&&(e.TgZ(0,"th",21),e._uU(1,"Type "),e.qZA())}function ct(i,t){if(1&i&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&i){const o=t.$implicit;e.xp6(1),e.Oqu(o.fileType)}}function mt(i,t){1&i&&(e.TgZ(0,"th",21),e._uU(1,"Download"),e.qZA())}function dt(i,t){if(1&i){const o=e.EpF();e.TgZ(0,"td",22)(1,"mat-icon",23),e.NdJ("click",function(){const c=e.CHM(o).$implicit,d=e.oxw();return e.KtG(d.deleteFile(c.id))}),e._uU(2," delete "),e.qZA()()}}function ft(i,t){1&i&&e._UZ(0,"tr",24)}function pt(i,t){1&i&&e._UZ(0,"tr",25)}const ut=function(){return[3,5,10,25,100]};class P{constructor(t,o,a,r,c,d,G,m,j,At){this.formBuilder=t,this.userService=o,this.notificationService=a,this.salesService=r,this.activatedRoute=c,this.taskService=d,this.router=G,this.toastrService=m,this.fileService=j,this.dialogService=At,this.path=x.m,this.userId=this.userService.getID(),this.filesToUpload=[],this.displayedColumns=["id","originalname","fileType","action"],this.userService.getUserNameById(this.userId).subscribe(vt=>{this.userName=vt}),this.loadSalesBriefData(),this.initializeElements(),this.getSalesFiles()}initializeElements(){this.editForm=this.formBuilder.group({basicInfo:this.formBuilder.group({Agency:["",[n.kI.required]],Client:["",[n.kI.required]],ClientIndustry:["",[n.kI.required]],CampaignName:["",[n.kI.required]],CampaignOverview:[""],CampaignObjective:[""],CampaignObjectiveDetails:[""],NumberofRecommendations:["",[n.kI.required]],Currency:[""],Budget:["",[n.kI.required]]}),campaignOverview:this.formBuilder.group({CampaignStartDate:["",[n.kI.required]],CampaignEndDate:["",[n.kI.required]],CampaignMessagePhaseOne:[""],CampaignMessagePhaseTwo:[""],CampaignMessagePhaseThree:[""],ContentDeliverables:[""],BrandExclusivityDurationinDays:["",[n.kI.required]],VideoProduction:new n.NI(!1),VideoEditing:new n.NI(!1)}),influencerDetails:this.formBuilder.group({InfluencerAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),InfluencerLocation:[""],InfluencerCity:[""],InfluencerNationality:[""],InfluencerGender:[""],InfluencerNotes:[""],SimilarProfileLink:[""],InfluencerInterest:[""],InfluencerNumberOfFollowers:new n.cw({Nano:new n.NI(!1),Micro:new n.NI(!1),Macro:new n.NI(!1),Mega:new n.NI(!1),Celebrity:new n.NI(!1)}),NoteForNumberOfFollowers:[""]}),audienceDetails:this.formBuilder.group({AudienceAgeRange:new n.cw({AgeGroup1:new n.NI(!1),AgeGroup2:new n.NI(!1),AgeGroup3:new n.NI(!1),AgeGroup4:new n.NI(!1),AgeGroup5:new n.NI(!1)}),AudienceLocation:[""],AudienceNationality:[""],AudienceGender:[""],PrimaryAudienceInterest:[""],SecondaryAudienceInterest:[""]}),departmentDetails:this.formBuilder.group({ConfirmedInfluencerHandles:[""],PreviousBrandAmbassadorsName:[""],Performance:new n.NI(!1),Event:new n.NI(!1),Concept:new n.NI(!1),Strategy:new n.NI(!1),ItpDepartment:["",[n.kI.required]],KPIs:[""]})})}loadSalesBriefData(){this.activatedRoute.params.subscribe(t=>{this.briefId=t.id}),this.salesService.getSalesBrief(this.briefId).subscribe(t=>{this.briefData=t,this.briefData.data.assigned&&this.taskService.getTaskByBriefId(this.briefId).subscribe(m=>{this.taskData=m,this.userService.getUserByID(this.taskData.data[0].assigned_to).subscribe(j=>{this.assignedUser=j})});const o=this.briefData.data.InfluencerAgeRange?.split(",").map(m=>m.trim()),a=this.editForm.get("influencerDetails.InfluencerAgeRange");o?.forEach(m=>{a.get(m)?.setValue(!0)});const r=this.briefData.data.AudienceAgeRange?.split(",").map(m=>m.trim()),c=this.editForm.get("audienceDetails.AudienceAgeRange");r?.forEach(m=>{c.get(m)?.setValue(!0)});const d=this.briefData.data.InfluencerNumberOfFollowers?.split(",").map(m=>m.trim()),G=this.editForm.get("influencerDetails.InfluencerNumberOfFollowers");d?.forEach(m=>{G.get(m)?.setValue(!0)}),null!=this.briefData.data&&this.editForm.patchValue({basicInfo:{Agency:this.briefData.data.Agency,Client:this.briefData.data.Client,ClientIndustry:this.briefData.data.ClientIndustry,CampaignName:this.briefData.data.CampaignName,CampaignOverview:this.briefData.data.CampaignOverview,CampaignObjective:this.briefData.data.CampaignObjective,CampaignObjectiveDetails:this.briefData.data.CampaignObjectiveDetails,NumberofRecommendations:this.briefData.data.NumberofRecommendations,Currency:this.briefData.data.Currency,Budget:this.briefData.data.Budget},campaignOverview:{CampaignStartDate:this.briefData.data.CampaignStartDate,CampaignEndDate:this.briefData.data.CampaignEndDate,CampaignMessagePhaseOne:this.briefData.data.CampaignMessagePhaseOne,CampaignMessagePhaseTwo:this.briefData.data.CampaignMessagePhaseTwo,CampaignMessagePhaseThree:this.briefData.data.CampaignMessagePhaseThree,ContentDeliverables:this.briefData.data.ContentDeliverables?.split(",").map(m=>m.trim()),BrandExclusivityDurationinDays:this.briefData.data.BrandExclusivityDurationinDays,VideoProduction:this.briefData.data.VideoProduction,VideoEditing:this.briefData.data.VideoEditing},influencerDetails:{InfluencerAgeRange:this.briefData.data.InfluencerAgeRange,InfluencerLocation:this.briefData.data.InfluencerLocation?.split(",").map(m=>m.trim()),InfluencerCity:this.briefData.data.InfluencerCity,InfluencerNationality:this.briefData.data.InfluencerNationality?.split(",").map(m=>m.trim()),InfluencerGender:this.briefData.data.InfluencerGender,InfluencerNotes:this.briefData.data.InfluencerNotes,SimilarProfileLink:this.briefData.data.SimilarProfileLink,InfluencerInterest:this.briefData.data.InfluencerInterest?.split(",").map(m=>m.trim()),InfluencerNumberOfFollowers:this.briefData.data.InfluencerNumberOfFollowers,NoteForNumberOfFollowers:this.briefData.data.NoteForNumberOfFollowers},audienceDetails:{AudienceAgeRange:this.briefData.data.AudienceAgeRange,AudienceLocation:this.briefData.data.AudienceLocation?.split(",").map(m=>m.trim()),AudienceNationality:this.briefData.data.AudienceNationality?.split(",").map(m=>m.trim()),AudienceGender:this.briefData.data.AudienceGender,PrimaryAudienceInterest:this.briefData.data.PrimaryAudienceInterest?.split(",").map(m=>m.trim()),SecondaryAudienceInterest:this.briefData.data.SecondaryAudienceInterest?.split(",").map(m=>m.trim())},departmentDetails:{ConfirmedInfluencerHandles:this.briefData.data.ConfirmedInfluencerHandles,PreviousBrandAmbassadorsName:this.briefData.data.PreviousBrandAmbassadorsName,Performance:this.briefData.data.Performance,Event:this.briefData.data.Event,Concept:this.briefData.data.Concept,Strategy:this.briefData.data.Strategy,ItpDepartment:this.briefData.data.ItpDepartment,KPIs:this.briefData.data.KPIs}})})}submitForm(){const t=this.editForm.value.departmentDetails.ItpDepartment,o=this.processFormGroups(this.editForm);o.CreatedbyID=this.userService.getID(),o.Ready=!1,o.ResultsViewed=!1,this.salesService.updateBrief(this.briefId,o).subscribe(a=>{if(this.uploadFiles(this.briefId),"Originals"==t||"UAE"==t){let r=23,c={message:"Sales Brief "+o.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};if(this.notificationService.createNotification(r,c).subscribe(()=>{}),null!=this.assignedUser){let d={message:"Sales Brief "+o.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};this.notificationService.createNotification(this.assignedUser.id,d).subscribe(()=>{})}}else if("KSA"==t||"Gaming"==t){let r=15,c={message:"Sales Brief "+o.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};if(this.notificationService.createNotification(r,c).subscribe(()=>{}),null!=this.assignedUser){let d={message:"Sales Brief "+o.CampaignName+" has been edited",link:`${this.path.viewBrief+this.briefId}`};this.notificationService.createNotification(this.assignedUser.id,d).subscribe(()=>{})}}this.toastrService.success("Sales brief edited successfully"),this.router.navigate([this.path.forms])},a=>{this.toastrService.error("An error occurred while creating the sales brief")})}processFormGroups(t){let o={};return t instanceof n.cw&&Object.keys(t.controls)?.forEach(a=>{const r=t.get(a);if(console.log(r?.value),"InfluencerAgeRange"===a||"AudienceAgeRange"===a||"InfluencerNumberOfFollowers"===a)o[a]=this.processAgeRangeGroup(r);else if(r instanceof n.cw)o={...o,...this.processFormGroups(r)};else if(r instanceof n.NI)if(Array.isArray(r?.value)){const c=(r?.value).map(d=>d.toString()).join(", ");o[a]=c}else o[a]=r?.value}),o}processAgeRangeGroup(t){return Object.keys(t.controls).filter(a=>!0===t.get(a)?.value).join(", ")}getSalesFiles(){this.fileService.getSalesBriefFiles(this.briefId).subscribe(t=>{console.log(t),this.dataSource=new l.by(t.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}deleteFile(t){this.dialogService.openConfirmationDialog("Confirm!","Are you sure you want to delete?").subscribe(o=>{!0===o&&this.fileService.deleteFile(t).subscribe(()=>{this.toastrService.success("File deleted successfully!"),this.getSalesFiles()})})}transferedFiles(t){this.filesToUpload=t}uploadFiles(t){for(let o=0;o<this.filesToUpload.length;o++)this.fileService.uploadFile(this.filesToUpload[o],t,this.userId,H.yE.SALES).subscribe(a=>{console.log(a),this.toastrService.success(this.filesToUpload[o].name+" uploaded successfully!")},a=>{console.log(a),this.toastrService.error("Could not upload the file:"+this.filesToUpload[o].name)})}}P.\u0275fac=function(t){return new(t||P)(e.Y36(n.qu),e.Y36(N.K),e.Y36($.g),e.Y36(T.M),e.Y36(g.gz),e.Y36(z.M),e.Y36(g.F0),e.Y36(J._W),e.Y36(Q.I),e.Y36(it.O))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-sent-briefs-id"]],viewQuery:function(t,o){if(1&t&&(e.Gf(I.NW,5),e.Gf(u.YE,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.paginator=a.first),e.iGM(a=e.CRH())&&(o.sort=a.first)}},decls:40,vars:9,consts:[[1,"form-container"],["autocomplete","off",3,"formGroup","ngSubmit"],["formGroupName","basicInfo"],["formGroupName","campaignOverview"],["formGroupName","influencerDetails"],["formGroupName","audienceDetails"],["formGroupName","departmentDetails"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","originalname"],["matColumnDef","fileType"],["matColumnDef","action"],["mat-header-row","","sticky","",4,"matHeaderRowDef"],["mat-row","","sticky","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],[3,"filesUploaded"],["mat-raised-button","","type","submit",2,"margin-bottom","2%","margin-top","2%",3,"disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["color","warn",3,"click"],["mat-header-row","","sticky",""],["mat-row","","sticky",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Edit Sales Brief"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return o.submitForm()}),e._UZ(4,"app-basic-information",2)(5,"app-campaign-overview",3)(6,"hr")(7,"app-influencer-details",4)(8,"hr")(9,"app-audience-details",5)(10,"hr")(11,"app-department-details",6)(12,"hr"),e.TgZ(13,"h2"),e._uU(14," Uploaded Files "),e.qZA(),e.TgZ(15,"div",7)(16,"table",8,9),e.ynx(18,10),e.YNc(19,nt,2,0,"th",11),e.YNc(20,at,2,1,"td",12),e.BQk(),e.ynx(21,13),e.YNc(22,rt,2,0,"th",11),e.YNc(23,st,2,1,"td",12),e.BQk(),e.ynx(24,14),e.YNc(25,lt,2,0,"th",11),e.YNc(26,ct,2,1,"td",12),e.BQk(),e.ynx(27,15),e.YNc(28,mt,2,0,"th",11),e.YNc(29,dt,3,0,"td",12),e.BQk(),e.YNc(30,ft,1,0,"tr",16),e.YNc(31,pt,1,0,"tr",17),e.qZA(),e._UZ(32,"mat-paginator",18),e.qZA(),e._UZ(33,"hr"),e.TgZ(34,"h2"),e._uU(35," Upload Files "),e.qZA(),e.TgZ(36,"app-upload-files",19),e.NdJ("filesUploaded",function(r){return o.transferedFiles(r)}),e.qZA(),e._UZ(37,"hr"),e.TgZ(38,"button",20),e._uU(39,"Edit Brief Form"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",o.editForm),e.xp6(13),e.Q6J("dataSource",o.dataSource),e.xp6(14),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",null==o.dataSource?null:o.dataSource.data.length)("pageSize",15)("pageSizeOptions",e.DdM(8,ut)),e.xp6(6),e.Q6J("disabled",!o.editForm.valid))},dependencies:[M.lW,K.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,I.NW,u.YE,u.nU,n._Y,n.JL,n.sg,n.x0,_,b,C,Z,A,v],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-size:300%;margin-top:2%;margin-bottom:3%;color:#fff}.warn[_ngcontent-%COMP%]{background-color:red;color:#fff}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}"]});let gt=x.m;const ht=[{path:"newBrief",component:q},{path:"readyBriefs",component:O},{path:"readyBriefs/:id",component:k},{path:"sentBriefs",component:F},{path:"sentBriefs/:id",component:P},{path:"",redirectTo:`${gt.forms}`,pathMatch:"full"},{path:"**",redirectTo:"/site/notFound"}];class y{}y.\u0275fac=function(t){return new(t||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({imports:[g.Bz.forChild(ht),g.Bz]});var _t=s(8519),bt=s(9347),Ct=s(9757),Zt=s(9637);class w{}w.\u0275fac=function(t){return new(t||w)},w.\u0275mod=e.oAB({type:w}),w.\u0275inj=e.cJS({imports:[p.ez,y,_t.q,n.UX,n.u5,bt.Is,Ct.ViewBriefModule,Zt.SharingModule]})}}]);